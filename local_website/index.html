<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivaha AI - Wedding Planner</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- Wedding Theme Images CSS -->
    <link rel="stylesheet" href="/css/wedding-theme-images.css">
    
    <!-- Google Places API for enhanced city selection -->
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBok7kGkk5_3y4FZmEpFCJ4AjJgQ_S8pj8&libraries=places&callback=initGoogleMaps">
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #2d3748;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }
        
        .app-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            background: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.05);
            border-right: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            z-index: 1000;
        }
        
        .sidebar-header {
            padding: 24px 20px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #8B4B6B, #4A1B2E);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }
        
        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1a202c;
        }
        
        .logo-text p {
            font-size: 0.875rem;
            color: #718096;
        }
        
        .nav-section {
            padding: 16px 0;
        }
        
        .nav-section-title {
            padding: 0 20px 8px;
            font-size: 0.75rem;
            font-weight: 600;
            color: #a0aec0;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            margin: 2px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
            color: #4a5568;
        }
        
        .nav-item:hover {
            background: #f7fafc;
            color: #2d3748;
        }
        
        .nav-item.active {
            background: linear-gradient(135deg, #8B4B6B, #4A1B2E);
            color: white;
        }
        
        .nav-icon {
            width: 20px;
            height: 20px;
            opacity: 0.7;
        }
        
        .nav-item.active .nav-icon {
            opacity: 1;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 20;
        }
        
        .top-bar {
            background: white;
            padding: 16px 32px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .page-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1a202c;
        }
        
        .top-bar-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: #fdf2f8;
            color: #4A1B2E;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #8B4B6B;
        }
        
        .save-btn {
            background: linear-gradient(135deg, #8B4B6B, #4A1B2E);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .save-btn:hover {
            transform: translateY(-1px);
        }
        
        .content-area {
            flex: 1;
            padding: 24px 32px;
            overflow-y: auto;
        }
        
        /* Screen Content */
        .screen {
            display: none;
        }
        
        .screen.active {
            display: block;
        }
        
        /* Overview Layout */
        .overview-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }
        
        .hero-section {
            background: linear-gradient(135deg, #8B4B6B, #4A1B2E);
            color: white;
            padding: 32px;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transform: translate(30px, -30px);
        }
        
        .hero-content h2 {
            font-size: 2rem;
            margin-bottom: 12px;
            font-weight: 700;
        }
        
        .hero-content p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 24px;
        }
        
        .hero-actions {
            display: flex;
            gap: 12px;
        }
        
        .btn-primary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
        }
        
        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-secondary:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .progress-panel {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .progress-panel h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #1a202c;
        }
        
        .progress-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .progress-item:last-child {
            border-bottom: none;
        }
        
        .progress-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .progress-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }
        
        .progress-text {
            font-weight: 500;
            color: #2d3748;
        }
        
        .progress-status {
            font-size: 0.875rem;
            color: #718096;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .stat-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            text-align: center;
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #8B4B6B;
            margin-bottom: 8px;
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: #718096;
            font-weight: 500;
        }
        
        .recommendations-panel {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-top: 24px;
        }
        
        .recommendations-panel h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #1a202c;
        }
        
        .recommendation-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .recommendation-item:last-child {
            border-bottom: none;
        }
        
        .rec-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #8B4B6B, #4A1B2E);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }
        
        .rec-content {
            flex: 1;
        }
        
        .rec-title {
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 4px;
        }
        
        .rec-desc {
            font-size: 0.875rem;
            color: #718096;
        }
        
        /* Form Styles */
        .form-container {
            max-width: 800px;
        }
        
        .form-section {
            background: white;
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 24px;
        }
        
        .form-section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 24px;
            color: #1a202c;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
            font-size: 0.875rem;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #8B4B6B;
        }
        
        .form-actions {
            display: flex;
            gap: 12px;
            justify-content: space-between;
            align-items: center;
            margin-top: 24px;
        }

        .form-actions .btn {
            min-width: 120px;
            padding: 12px 20px;
        }

        .form-actions .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Progress Indicator */
        .progress-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0 40px 0;
            padding: 20px 0;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e5e7eb;
            color: #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-number {
            background: #8B4B6B;
            color: white;
        }

        .progress-step.completed .step-number {
            background: #10b981;
            color: white;
        }

        .step-label {
            font-size: 12px;
            color: #6b7280;
            font-weight: 500;
            text-align: center;
        }

        .progress-step.active .step-label {
            color: #8B4B6B;
            font-weight: 600;
        }

        .progress-line {
            width: 100px;
            height: 2px;
            background: #e5e7eb;
            margin: 0 10px;
        }

        .progress-line.completed {
            background: #10b981;
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }
        
        .btn-primary-solid {
            background: linear-gradient(135deg, #8B4B6B, #4A1B2E);
            color: white;
        }
        
        .btn-primary-solid:hover {
            transform: translateY(-1px);
        }
        
        .btn-secondary-solid {
            background: #f7fafc;
            color: #4a5568;
            border: 2px solid #e2e8f0;
        }
        
        .btn-secondary-solid:hover {
            background: #edf2f7;
        }

        /* Date & Timeline Section Styles */
        .form-section-header {
            margin: 32px 0 24px 0;
            padding-bottom: 16px;
            border-bottom: 2px solid #e2e8f0;
        }

        .form-section-header h3 {
            font-size: 1.4rem;
            font-weight: 600;
            color: #1a202c;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .date-timeline-section {
            background: #f7fafc;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .preference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .preference-category {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .category-title {
            font-size: 1rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .option-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .option-btn {
            padding: 10px 12px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
            color: #4a5568;
        }

        .option-btn:hover {
            border-color: #8B4B6B;
            color: #8B4B6B;
        }

        .option-btn.selected {
            background: linear-gradient(135deg, #8B4B6B, #4A1B2E);
            color: white;
            border-color: #8B4B6B;
        }

        .date-input-section {
            margin-bottom: 24px;
        }

        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .budget-section {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .budget-buttons {
            grid-template-columns: 1fr 1fr;
        }

        .form-group small {
            display: block;
            font-size: 11px;
            color: #718096;
            margin-top: 4px;
        }
        
        /* Preferences Styles */
        .preferences-container {
            max-width: 1200px;
        }
        
        .preferences-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .preferences-header h2 {
            font-size: 2rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 12px;
        }
        
        .preferences-header p {
            font-size: 1.1rem;
            color: #718096;
        }
        
        .preference-section {
            background: white;
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .preference-section h3 {
            font-size: 1.4rem;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Theme Cards */
        .theme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .theme-card {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .theme-card:hover {
            border-color: #8B4B6B;
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(139, 75, 107, 0.15);
        }
        
        .theme-card.selected {
            border-color: #8B4B6B;
            background: linear-gradient(135deg, rgba(139, 75, 107, 0.1), rgba(74, 27, 46, 0.1));
        }
        
        .theme-image {
            font-size: 3rem;
            margin-bottom: 16px;
        }
        
        .theme-content h4 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 8px;
        }
        
        .theme-content p {
            color: #718096;
            font-size: 0.9rem;
        }
        
        /* Premium Theme Cards */
        .premium-theme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .premium-theme-card {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .premium-theme-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
        }

        .premium-theme-card.selected {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(139, 92, 246, 0.3);
            border: 3px solid var(--primary-purple);
        }

        .theme-image-container {
            position: relative;
            height: 280px;
            overflow: hidden;
        }

        .premium-theme-card .theme-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .premium-theme-card:hover .theme-image {
            transform: scale(1.05);
        }

        .theme-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 50%, transparent 100%);
            color: white;
            padding: 25px 20px 20px;
            transform: translateY(0);
            transition: transform 0.3s ease;
        }

        .theme-badge {
            position: absolute;
            top: -200px;
            left: 20px;
            background: var(--primary-purple);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .theme-overlay h4 {
            font-size: 20px;
            font-weight: 700;
            margin: 0 0 8px 0;
            color: white;
        }

        .theme-overlay p {
            font-size: 14px;
            line-height: 1.4;
            margin: 0 0 15px 0;
            opacity: 0.9;
        }

        .theme-features {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 12px 0;
        }

        .feature {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        .theme-budget {
            position: absolute;
            bottom: 15px;
            right: 20px;
            background: #8B4B6B;
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 14px;
        }

        /* Decor & Cuisine Cards */
        .decor-grid, .cuisine-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .decor-card, .cuisine-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .decor-card:hover, .cuisine-card:hover {
            border-color: #8B4B6B;
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(139, 75, 107, 0.15);
        }

        .decor-card.selected, .cuisine-card.selected {
            border-color: #8B4B6B;
            background: linear-gradient(135deg, rgba(139, 75, 107, 0.1) 0%, rgba(74, 27, 46, 0.1) 100%);
        }

        .decor-icon, .cuisine-icon {
            font-size: 3rem;
            margin-bottom: 16px;
            display: block;
        }

        .decor-card h4, .cuisine-card h4 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1a202c;
            margin: 12px 0 8px 0;
        }

        .decor-card p, .cuisine-card p {
            color: #718096;
            font-size: 0.9rem;
            line-height: 1.4;
            margin: 0;
        }

        /* Enhanced Music Grid */
        .music-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }

        .music-category {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
        }

        .music-category h4 {
            color: #2d3748;
            font-size: 1.1rem;
            margin-bottom: 16px;
            font-weight: 600;
        }

        .music-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: background-color 0.2s;
        }

        .checkbox-option:hover {
            background-color: rgba(139, 75, 107, 0.1);
        }

        .checkbox-option input[type="checkbox"] {
            accent-color: #8B4B6B;
            width: 16px;
            height: 16px;
        }
        

        
        .custom-color-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        /* Photography Cards */
        .photography-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }
        
        .photography-card {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .photography-card:hover {
            border-color: #8B4B6B;
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(139, 75, 107, 0.15);
        }
        
        .photography-card.selected {
            border-color: #8B4B6B;
            background: linear-gradient(135deg, rgba(139, 75, 107, 0.1), rgba(74, 27, 46, 0.1));
        }
        
        .photo-icon {
            font-size: 2.5rem;
            margin-bottom: 16px;
        }
        
        .photography-card h4 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 8px;
        }
        
        .photography-card p {
            color: #718096;
            margin-bottom: 16px;
        }
        
        .photography-card ul {
            list-style: none;
            padding: 0;
        }
        
        .photography-card li {
            color: #4a5568;
            font-size: 0.875rem;
            margin-bottom: 4px;
            padding-left: 12px;
            position: relative;
        }
        
        .photography-card li::before {
            content: 'âœ“';
            position: absolute;
            left: 0;
            color: #8B4B6B;
            font-weight: bold;
        }
        
        /* Decor Grid */
        .decor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }
        
        .decor-category h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 16px;
        }
        
        .option-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .option-btn {
            padding: 10px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
            color: #4a5568;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .option-btn:hover {
            border-color: #8B4B6B;
            color: #8B4B6B;
        }
        
        .option-btn.selected {
            border-color: #8B4B6B;
            background: #8B4B6B;
            color: white;
        }
        
        /* Venue Cards */
        .venue-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }
        
        .venue-card {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .venue-card:hover {
            border-color: #8B4B6B;
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(139, 75, 107, 0.15);
        }
        
        .venue-card.selected {
            border-color: #8B4B6B;
            background: linear-gradient(135deg, rgba(139, 75, 107, 0.1), rgba(74, 27, 46, 0.1));
        }
        
        .venue-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }
        
        .venue-card h4 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 16px;
        }
        
        .venue-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }
        
        .venue-tag {
            background: #f7fafc;
            color: #4a5568;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        /* Music Grid */
        .music-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
        }
        
        .music-category h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 16px;
        }
        
        .music-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            color: #4a5568;
        }
        
        .checkbox-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #8B4B6B;
        }
        
        /* Preferences Summary */
        .preferences-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            padding: 24px;
            background: #f8fafc;
            border-radius: 12px;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .summary-item strong {
            color: #2d3748;
        }
        
        .summary-item span {
            color: #718096;
            font-style: italic;
        }
        
        .preferences-actions {
            margin-top: 40px;
            padding-top: 32px;
            border-top: 1px solid #e2e8f0;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                width: 240px;
            }
            
            .main-content {
                margin-left: 240px;
            }
            
            .overview-grid {
                grid-template-columns: 1fr;
            }
            
            .theme-grid,
            .photography-grid,
            .venue-grid {
                grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .content-area {
                padding: 16px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .color-categories,
            .decor-grid,
            .music-grid {
                grid-template-columns: 1fr;
            }
            
            .preferences-summary {
                grid-template-columns: 1fr;
            }
        }
        
        /* Enhanced Dashboard Styles - Maroon & Pink Theme */
        .enhanced-hero {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #D4A574 0%, #E8B4CB 25%, #F5C2C7 50%, #E8B4CB 75%, #8B4B6B 100%);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 32px;
            color: #4A1B2E;
            min-height: 320px;
            position: relative;
            overflow: hidden;
        }
        
        .enhanced-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            z-index: 1;
        }
        
        .enhanced-hero::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -10%;
            width: 200px;
            height: 200px;
            background: rgba(139, 75, 107, 0.15);
            border-radius: 50%;
            z-index: 1;
        }
        
        .hero-greeting {
            margin-bottom: 24px;
            z-index: 2;
            position: relative;
        }
        
        .greeting-icon {
            font-size: 2rem;
            margin-bottom: 16px;
            display: block;
            color: #8B4B6B;
        }
        
        .hero-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 12px;
            line-height: 1.2;
            color: #4A1B2E;
            text-shadow: 0 2px 4px rgba(255, 255, 255, 0.3);
        }
        
        .hero-subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
            margin-bottom: 32px;
            color: #6B2C42;
        }
        
        .couple-info-card {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 24px;
            display: flex;
            align-items: center;
            gap: 16px;
            min-width: 280px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(139, 75, 107, 0.2);
            z-index: 2;
            position: relative;
        }
        
        .couple-avatar {
            width: 80px;
            height: 80px;
            background: rgba(139, 75, 107, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            border: 3px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 20px rgba(139, 75, 107, 0.3);
            transition: all 0.3s ease;
        }
        
        .couple-avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 25px rgba(139, 75, 107, 0.4);
        }
        
        .couple-avatar svg {
            transition: all 0.3s ease;
        }
        
        .couple-info-card:hover .couple-avatar svg {
            transform: scale(1.1);
        }
        
        .couple-names {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: #4A1B2E;
        }
        
        .wedding-date {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 8px;
            color: #6B2C42;
        }
        
        .countdown-info {
            display: flex;
            align-items: baseline;
            gap: 4px;
        }
        
        .days-count {
            font-size: 1.8rem;
            font-weight: 700;
            color: #8B4B6B;
        }
        
        .days-label {
            font-size: 0.8rem;
            opacity: 0.8;
            color: #6B2C42;
        }
        
        .progress-circle-container {
            position: relative;
        }
        
        .progress-circle {
            position: relative;
        }
        
        .progress-svg {
            transform: rotate(-90deg);
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        
        .progress-percentage {
            font-size: 2rem;
            font-weight: 700;
            display: block;
        }
        
        .progress-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .quick-actions-section {
            margin-bottom: 32px;
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 24px;
        }
        
        .title-icon {
            font-size: 1.3rem;
        }
        
        .quick-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
        }
        
        .action-card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 16px;
            position: relative;
            overflow: hidden;
        }
        
        .action-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #8B4B6B, #D4A574);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .action-card:hover {
            border-color: #8B4B6B;
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(139, 75, 107, 0.25);
        }
        
        .action-card:hover::before {
            transform: scaleX(1);
        }
        
        .action-icon-wrapper {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #8B4B6B, #D4A574);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(139, 75, 107, 0.3);
        }
        
        .action-content {
            flex: 1;
        }
        
        .action-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 4px;
        }
        
        .action-description {
            color: #718096;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }
        
        .action-status {
            margin-top: 8px;
        }
        
        .status-indicator {
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 500;
        }
        
        .status-indicator.pending {
            background: #F5C2C7;
            color: #8B4B6B;
        }
        
        .status-indicator.progress {
            background: #D4A574;
            color: #4A1B2E;
        }
        
        .status-indicator.complete {
            background: #8B4B6B;
            color: #FFFFFF;
        }
        
        .status-indicator.coming-soon {
            background: #E8B4CB;
            color: #6B2C42;
        }
        
        .action-arrow {
            font-size: 1.2rem;
            color: #cbd5e0;
            transition: all 0.3s ease;
        }
        
        .action-card:hover .action-arrow {
            color: #8B4B6B;
            transform: translateX(4px);
        }
        
        .dashboard-insights {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
        }
        
        .recommendations-card,
        .recent-activity-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
        }
        
        .card-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 20px;
        }
        
        .recommendations-list,
        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .recommendation-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            background: #fdf2f8;
            border-radius: 12px;
            border-left: 4px solid #8B4B6B;
        }
        
        .rec-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #8B4B6B, #D4A574);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            flex-shrink: 0;
        }
        
        .rec-content {
            flex: 1;
        }
        
        .rec-title {
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 4px;
        }
        
        .rec-desc {
            font-size: 0.875rem;
            color: #718096;
            line-height: 1.4;
        }
        
        .stats-cards {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
        }
        
        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .budget-card .stat-icon {
            background: linear-gradient(135deg, #D4A574, #8B4B6B);
        }
        
        .guests-card .stat-icon {
            background: linear-gradient(135deg, #8B4B6B, #E8B4CB);
        }
        
        .city-card .stat-icon {
            background: linear-gradient(135deg, #E8B4CB, #F5C2C7);
        }
        
        .stat-info {
            flex: 1;
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 2px;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: #718096;
        }
        
        .activity-item {
            padding: 12px 16px;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 3px solid #e2e8f0;
        }
        
        .activity-time {
            font-size: 0.75rem;
            color: #9ca3af;
            margin-bottom: 4px;
        }
        
        .activity-text {
            font-size: 0.9rem;
            color: #374151;
            line-height: 1.4;
        }
        
        /* Animations */
        @keyframes progressFill {
            from {
                stroke-dashoffset: 440;
            }
            to {
                stroke-dashoffset: var(--progress-offset);
            }
        }
        
        #progress-ring {
            animation: progressFill 2s ease-out forwards;
        }
        
                @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes floatHearts {
            0%, 100% {
                transform: translateY(0px);
                opacity: 0.7;
            }
            50% {
                transform: translateY(-3px);
                opacity: 1;
            }
        }
        
        @keyframes gentlePulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
        }
        
        .couple-avatar svg g[fill="#E8B4CB"] {
            animation: floatHearts 3s ease-in-out infinite;
        }
        
        .couple-info-card {
            animation: gentlePulse 6s ease-in-out infinite;
        }
        
        .action-card {
            animation: fadeInUp 0.6s ease-out forwards;
        }
        
        .action-card:nth-child(2) { animation-delay: 0.1s; }
        .action-card:nth-child(3) { animation-delay: 0.2s; }
        .action-card:nth-child(4) { animation-delay: 0.3s; }
        .action-card:nth-child(5) { animation-delay: 0.4s; }
        .action-card:nth-child(6) { animation-delay: 0.5s; }
        
        /* Enhanced Mobile Responsiveness */
        @media (max-width: 768px) {
            .enhanced-hero {
                flex-direction: column;
                text-align: center;
                gap: 24px;
                padding: 24px;
            }
            
            .couple-info-card {
                min-width: auto;
                width: 100%;
            }
            
            .dashboard-insights {
                grid-template-columns: 1fr;
            }
            
            .quick-actions-grid {
                grid-template-columns: 1fr;
            }
        }

        .banner-img {
            width: 100%;
            max-height: 320px;
            object-fit: cover;
            border-radius: 18px;
            margin-bottom: 24px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.08);
        }

        .overview-banner {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #fff;
            padding: 0 0 16px 0;
        }

        .banner-cover {
            width: 100vw;
            max-width: 100vw;
            height: 180px;
            overflow: hidden;
            position: relative;
            left: 50%;
            right: 50%;
            margin-left: -50vw;
            margin-right: -50vw;
            box-shadow: 0 6px 32px rgba(0,0,0,0.10);
            z-index: 10;
            background: #fff;
            padding: 0;
            margin-bottom: 24px;
        }
        .banner-cover-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            display: block;
        }
        .banner-days-circle, .banner-progress-circle {
            position: absolute;
            z-index: 20;
        }
        .banner-days-circle {
            top: 60%;
            left: 1.5rem;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.95);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 12px rgba(0,0,0,0.10);
            font-size: 1.1rem;
            font-weight: bold;
        }
        .banner-progress-circle {
            top: 50%;
            right: 1.5rem;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.95);
            border-radius: 50%;
            width: 70px;
            height: 70px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 12px rgba(0,0,0,0.10);
            font-size: 1.2rem;
            font-weight: bold;
        }
        @media (max-width: 600px) {
            .banner-cover {
                height: 110px;
                margin-bottom: 14px;
            }
            .banner-days-circle, .banner-progress-circle {
                width: 38px;
                height: 38px;
                font-size: 0.7rem;
            }
            .banner-progress-circle {
                right: 0.5rem;
            }
            .banner-days-circle {
                left: 0.5rem;
            }
        }

        /* Hero Banner Base */
        .hero-banner {
            position: relative;
            width: 100%;
            height: 400px;
            border-radius: 24px;
            overflow: hidden;
            margin-bottom: 32px;
        }

        /* Image Layer */
        .banner-image {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        /* Gradient Overlay */
        .banner-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, 
                rgba(139, 75, 107, 0.65) 0%,  /* Reduced from 0.85 to 0.65 */
                rgba(255, 182, 193, 0.5) 100%  /* Reduced from 0.7 to 0.5 */
            );
        }

        /* Content Layout */
        .banner-content {
            position: relative;
            height: 100%;
            padding: 32px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            z-index: 2;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);  /* Added subtle text shadow for better readability */
        }

        /* Top Section Layout */
        .top-section {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        /* Welcome Text Styles */
        .welcome-text {
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);  /* Enhanced text shadow for better contrast */
        }

        .sparkle {
            display: block;
            font-size: 24px;
            margin-bottom: 12px;
        }

        .welcome-text h1 {
            font-size: 36px;
            font-weight: 600;
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .welcome-text p {
            font-size: 18px;
            opacity: 0.9;
        }

        /* Progress Circle */
        .progress-circle {
            width: 100px;
            height: 100px;
        }

        .progress-circle svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .progress-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.2);
            stroke-width: 8;
        }

        .progress-ring {
            fill: none;
            stroke: white;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dasharray 0.3s;
        }

        .progress-text {
            fill: white;
            font-size: 24px;
            font-weight: 600;
            text-anchor: middle;
            transform: rotate(90deg);
        }

        .progress-label {
            fill: white;
            font-size: 12px;
            text-anchor: middle;
            transform: rotate(90deg);
            opacity: 0.9;
        }

        /* Countdown Card */
        .countdown-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 24px;
            border-radius: 16px;
            max-width: 320px;
            backdrop-filter: blur(8px);
        }

        .countdown-card .icon {
            font-size: 32px;
            margin-bottom: 16px;
        }

        .countdown-card h2 {
            font-size: 24px;
            color: #8B4B6B;
            margin-bottom: 8px;
        }

        .countdown-card .date {
            font-size: 16px;
            color: #666;
            margin-bottom: 8px;
        }

        .countdown-card .days {
            font-size: 18px;
            color: #E91E63;
            font-weight: 500;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .hero-banner {
                height: 500px;
            }
            
            .banner-content {
                padding: 24px;
            }
            
            .top-section {
                flex-direction: column;
                gap: 24px;
            }
            
            .welcome-text h1 {
                font-size: 28px;
            }
            
            .welcome-text p {
                font-size: 16px;
            }
            
            .countdown-card {
                max-width: 100%;
            }
        }

        /* Progress Circle Styles */
        .progress-circle {
            width: 100px;
            height: 100px;
            position: relative;
        }

        .progress-circle svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .progress-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.2);
            stroke-width: 8;
        }

        .progress-ring {
            fill: none;
            stroke: white;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dasharray 0.3s;
        }

        .progress-text-group {
            transform: rotate(90deg);
        }

        .progress-text {
            fill: white;
            font-size: 24px;
            font-weight: 600;
            dominant-baseline: middle;
        }

        .progress-label {
            fill: white;
            font-size: 12px;
            dominant-baseline: middle;
            opacity: 0.9;
        }

        /* Budget Management Styles */
        .budget-container {
            padding: 24px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .budget-overview-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 24px;
        }

        .budget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .total-budget {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .budget-amount {
            font-size: 24px;
            font-weight: 600;
            color: #8B4B6B;
        }

        .edit-budget-btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            background: #f0f0f0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .budget-progress {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
        }

        .progress-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin-bottom: 16px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #8B4B6B, #D4A574);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .budget-stats {
            display: flex;
            justify-content: space-between;
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            font-size: 14px;
            color: #6c757d;
        }

        .stat-value {
            display: block;
            font-size: 18px;
            font-weight: 600;
            color: #8B4B6B;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .budget-category-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            transition: transform 0.3s ease;
        }

        .budget-category-card:hover {
            transform: translateY(-2px);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .category-icon {
            font-size: 24px;
        }

        .percentage {
            margin-left: auto;
            font-weight: 600;
            color: #8B4B6B;
        }

        .category-amount {
            margin-bottom: 16px;
        }

        .amount-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
        }

        .details-btn {
            width: 100%;
            padding: 8px;
            border: none;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .details-btn:hover {
            background: #e9ecef;
        }

        .budget-insights {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .insights-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        @media (max-width: 768px) {
            .budget-container {
                padding: 16px;
            }
            
            .category-grid {
                grid-template-columns: 1fr;
            }
            
            .budget-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
        }

        /* Enhanced Budget Management Styles */
        .budget-container {
            padding: 32px;
            max-width: 1400px;
            margin: 0 auto;
            background: #f8f9fa;
            min-height: 100vh;
        }

        .budget-overview-card {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.06);
            border: 1px solid rgba(255,255,255,0.8);
            margin-bottom: 32px;
        }

        .budget-header {
            display: flex;
            flex-direction: column;
            gap: 24px;
            margin-bottom: 32px;
        }

        .budget-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .budget-title h2 {
            font-size: 28px;
            font-weight: 700;
            color: #1a202c;
            margin: 0;
        }

        .budget-actions {
            display: flex;
            gap: 16px;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            border: none;
            border-radius: 12px;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #4a5568;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
            background: #8B4B6B;
            color: white;
        }

        .total-budget {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px;
            background: linear-gradient(135deg, #8B4B6B 0%, #D4A574 100%);
            border-radius: 16px;
            color: white;
        }

        .budget-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .budget-label {
            font-size: 16px;
            opacity: 0.9;
            font-weight: 500;
        }

        .budget-amount {
            font-size: 36px;
            font-weight: 700;
            color: white;
        }

        .edit-budget-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            background: rgba(255,255,255,0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }

        .edit-budget-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-1px);
        }

        .budget-progress {
            background: white;
            padding: 24px;
            border-radius: 16px;
            margin-top: 16px;
        }

        .progress-bar {
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8B4B6B 0%, #D4A574 100%);
            border-radius: 6px;
            transition: width 0.6s ease;
            position: relative;
        }

        .budget-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }

        .stat {
            text-align: center;
            padding: 16px;
            background: #f7fafc;
            border-radius: 12px;
        }

        .stat-label {
            font-size: 14px;
            color: #718096;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .stat-value {
            display: block;
            font-size: 20px;
            font-weight: 700;
            color: #8B4B6B;
        }

        /* Categories Section */
        .budget-categories {
            margin-bottom: 32px;
        }

        .categories-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .categories-header h3 {
            font-size: 22px;
            font-weight: 700;
            color: #1a202c;
            margin: 0;
        }

        .view-toggle {
            display: flex;
            background: white;
            border-radius: 12px;
            padding: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }

        .toggle-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            background: transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #718096;
        }

        .toggle-btn.active,
        .toggle-btn:hover {
            background: #8B4B6B;
            color: white;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        /* Category Cards */
        .budget-category-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid rgba(255,255,255,0.8);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .budget-category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #8B4B6B 0%, #D4A574 100%);
        }

        .budget-category-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 32px rgba(139, 75, 107, 0.15);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .category-icon {
            font-size: 28px;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #8B4B6B 0%, #D4A574 100%);
            border-radius: 12px;
            color: white;
        }

        .category-header h3 {
            flex: 1;
            font-size: 18px;
            font-weight: 600;
            color: #1a202c;
            margin: 0;
        }

        .percentage {
            font-weight: 700;
            color: #8B4B6B;
            background: #f7fafc;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 14px;
        }

        .category-amount {
            margin-bottom: 20px;
        }

        .amount-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            background: #f7fafc;
        }

        .amount-input:focus {
            outline: none;
            border-color: #8B4B6B;
            background: white;
            box-shadow: 0 0 0 3px rgba(139, 75, 107, 0.1);
        }

        .category-progress {
            margin-bottom: 20px;
        }

        .subcategories {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 16px 0 20px 0;
        }

        .subcategory {
            font-size: 12px;
            padding: 6px 12px;
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border-radius: 16px;
            color: #4a5568;
            font-weight: 500;
            border: 1px solid #e2e8f0;
        }

        .category-actions {
            display: flex;
            gap: 12px;
        }

        .category-actions .action-btn {
            flex: 1;
            justify-content: center;
            padding: 10px 16px;
            font-size: 14px;
        }

        /* Insights Section */
        .budget-insights {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.06);
            border: 1px solid rgba(255,255,255,0.8);
            margin-bottom: 32px;
        }

        .insights-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .insights-header h3 {
            font-size: 22px;
            font-weight: 700;
            color: #1a202c;
            margin: 0;
        }

        .refresh-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            border: none;
            border-radius: 10px;
            background: #f7fafc;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #4a5568;
        }

        .refresh-btn:hover {
            background: #8B4B6B;
            color: white;
            transform: translateY(-1px);
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
        }

        .insight-card {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .insight-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }

        .insight-card h4 {
            margin: 0 0 16px 0;
            color: #8B4B6B;
            font-size: 16px;
            font-weight: 600;
        }

        .alert-list, .optimization-tips, .recommendation-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .alert-list li, .optimization-tips li, .recommendation-list li {
            margin-bottom: 12px;
            padding: 12px 16px 12px 40px;
            position: relative;
            background: white;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            border-left: 3px solid #8B4B6B;
        }

        .alert-list li::before,
        .optimization-tips li::before,
        .recommendation-list li::before {
            position: absolute;
            left: 12px;
            top: 12px;
            font-size: 16px;
        }

        .alert-list li::before {
            content: "âš ï¸";
        }

        .optimization-tips li::before {
            content: "ðŸ’°";
        }

        .recommendation-list li::before {
            content: "âœ¨";
        }

        /* Payment Timeline */
        .payment-timeline {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.06);
            border: 1px solid rgba(255,255,255,0.8);
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .timeline-header h3 {
            font-size: 22px;
            font-weight: 700;
            color: #1a202c;
            margin: 0;
        }

        .calendar-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #8B4B6B 0%, #D4A574 100%);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .calendar-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(139, 75, 107, 0.3);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .budget-container {
                padding: 20px;
            }
            
            .budget-overview-card,
            .budget-insights,
            .payment-timeline {
                padding: 24px;
            }
            
            .budget-title {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }
            
            .budget-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .total-budget {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }
            
            .budget-stats {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            /* Modern Overview Styles */
            .modern-hero-section {
                position: relative;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 24px;
                padding: 3rem;
                margin-bottom: 2rem;
                overflow: hidden;
                color: white;
            }

            .hero-background {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                overflow: hidden;
            }

            .gradient-orb {
                position: absolute;
                border-radius: 50%;
                filter: blur(40px);
                opacity: 0.7;
                animation: float 6s ease-in-out infinite;
            }

            .orb-1 {
                width: 200px;
                height: 200px;
                background: rgba(255, 255, 255, 0.1);
                top: -100px;
                left: -100px;
                animation-delay: 0s;
            }

            .orb-2 {
                width: 150px;
                height: 150px;
                background: rgba(255, 255, 255, 0.08);
                top: 50%;
                right: -75px;
                animation-delay: 2s;
            }

            .orb-3 {
                width: 100px;
                height: 100px;
                background: rgba(255, 255, 255, 0.06);
                bottom: -50px;
                left: 30%;
                animation-delay: 4s;
            }

            @keyframes float {
                0%, 100% { transform: translateY(0px) rotate(0deg); }
                33% { transform: translateY(-20px) rotate(120deg); }
                66% { transform: translateY(10px) rotate(240deg); }
            }

            .hero-content-wrapper {
                position: relative;
                z-index: 2;
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 2rem;
            }

            .hero-title {
                font-size: 2.5rem;
                font-weight: 800;
                margin: 0;
                display: flex;
                align-items: center;
                gap: 1rem;
            }

            .title-emoji {
                font-size: 3rem;
                filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
            }

            .title-sparkle {
                font-size: 2rem;
                animation: sparkle 2s ease-in-out infinite;
            }

            @keyframes sparkle {
                0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
                50% { transform: scale(1.2) rotate(180deg); opacity: 0.8; }
            }

            .hero-subtitle {
                font-size: 1.2rem;
                margin: 0.5rem 0 0 0;
                opacity: 0.9;
                font-weight: 400;
            }

            .hero-stats {
                display: flex;
                gap: 2rem;
            }

            .stat-card {
                text-align: center;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 16px;
                padding: 1.5rem;
                min-width: 120px;
            }

            .stat-value {
                font-size: 2rem;
                font-weight: 700;
                margin-bottom: 0.5rem;
            }

            .stat-label {
                font-size: 0.9rem;
                opacity: 0.8;
            }

            /* Modern Dashboard Grid */
            .modern-dashboard-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 2rem;
                margin-bottom: 2rem;
            }

            .dashboard-left, .dashboard-right {
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
            }

            /* Modern Card Styles */
            .modern-card {
                background: white;
                border-radius: 20px;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                overflow: hidden;
                transition: all 0.3s ease;
                border: 1px solid rgba(255, 255, 255, 0.8);
            }

            .modern-card:hover {
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
                transform: translateY(-2px);
            }

            .card-header {
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                padding: 1.5rem;
                border-bottom: 1px solid #e2e8f0;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .card-title {
                display: flex;
                align-items: center;
                gap: 0.75rem;
            }

            .card-icon {
                font-size: 1.5rem;
                filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
            }

            .card-title h3 {
                margin: 0;
                color: #1f2937;
                font-size: 1.25rem;
                font-weight: 600;
            }

            .modern-edit-btn {
                background: rgba(139, 92, 246, 0.1);
                color: #8B5CF6;
                border: 1px solid rgba(139, 92, 246, 0.2);
                border-radius: 12px;
                padding: 0.75rem;
                cursor: pointer;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .modern-edit-btn:hover {
                background: #8B5CF6;
                color: white;
                transform: scale(1.05);
            }

            .card-content {
                padding: 1.5rem;
            }

            /* Info Grid Styles */
            .info-grid {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .info-item {
                display: flex;
                align-items: center;
                gap: 1rem;
                padding: 1rem;
                background: #f8fafc;
                border-radius: 12px;
                transition: all 0.2s ease;
            }

            .info-item:hover {
                background: #f1f5f9;
                transform: translateX(4px);
            }

            .info-item.featured {
                background: linear-gradient(135deg, #8B5CF6, #7C3AED);
                color: white;
            }

            .info-item.countdown {
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
            }

            .info-icon {
                font-size: 1.5rem;
                min-width: 2rem;
                text-align: center;
            }

            .info-details {
                flex: 1;
            }

            .info-label {
                display: block;
                font-size: 0.85rem;
                font-weight: 500;
                opacity: 0.8;
                margin-bottom: 0.25rem;
            }

            .info-value {
                display: block;
                font-size: 1rem;
                font-weight: 600;
            }

            /* Preferences Grid */
            .preferences-grid {
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
            }

            .pref-tag-group {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }

            .pref-category {
                font-size: 0.85rem;
                font-weight: 600;
                color: #6b7280;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }

            .pref-tags {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .pref-tag {
                background: linear-gradient(135deg, #e0e7ff, #c7d2fe);
                color: #3730a3;
                padding: 0.5rem 1rem;
                border-radius: 20px;
                font-size: 0.85rem;
                font-weight: 500;
                border: 1px solid #c7d2fe;
                transition: all 0.2s ease;
            }

            .pref-tag:hover {
                background: linear-gradient(135deg, #8B5CF6, #7C3AED);
                color: white;
                transform: translateY(-1px);
            }

            /* Budget Hero */
            .budget-hero {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 2rem;
            }

            .budget-circle {
                background: linear-gradient(135deg, #8B5CF6, #7C3AED);
                border-radius: 50%;
                width: 120px;
                height: 120px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                color: white;
                box-shadow: 0 8px 16px rgba(139, 92, 246, 0.3);
            }

            .budget-amount-large {
                font-size: 1.25rem;
                font-weight: 700;
                line-height: 1;
            }

            .budget-label-small {
                font-size: 0.75rem;
                opacity: 0.9;
                margin-top: 0.25rem;
            }

            .budget-status {
                display: flex;
                align-items: center;
            }

            .status-indicator {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                padding: 0.75rem 1rem;
                border-radius: 20px;
                font-size: 0.85rem;
                font-weight: 500;
            }

            .status-indicator.positive {
                background: #dcfce7;
                color: #166534;
            }

            .status-dot {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                background: currentColor;
            }

            /* Budget Breakdown */
            .budget-breakdown-modern {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .budget-item {
                background: #f8fafc;
                border-radius: 12px;
                padding: 1rem;
            }

            .budget-bar {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }

            .bar-info {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .bar-label {
                font-weight: 500;
                color: #374151;
            }

            .bar-amount {
                font-weight: 600;
                color: #1f2937;
            }

            .progress-bar {
                height: 8px;
                background: #e5e7eb;
                border-radius: 4px;
                overflow: hidden;
            }

            .progress-fill {
                height: 100%;
                border-radius: 4px;
                transition: width 0.3s ease;
            }

            .progress-bar.venue .progress-fill { background: linear-gradient(90deg, #8B5CF6, #7C3AED); }
            .progress-bar.photography .progress-fill { background: linear-gradient(90deg, #10b981, #059669); }
            .progress-bar.catering .progress-fill { background: linear-gradient(90deg, #f59e0b, #d97706); }
            .progress-bar.decor .progress-fill { background: linear-gradient(90deg, #ef4444, #dc2626); }

            /* Vendor Tracking */
            .vendor-stats-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 1rem;
                margin-bottom: 1.5rem;
            }

            .vendor-stat-item {
                text-align: center;
                padding: 1rem;
                background: #f8fafc;
                border-radius: 12px;
            }

            .stat-number {
                font-size: 1.5rem;
                font-weight: 700;
                color: #8B5CF6;
                margin-bottom: 0.25rem;
            }

            .stat-text {
                font-size: 0.85rem;
                color: #6b7280;
                font-weight: 500;
            }

            .vendor-categories-compact {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }

            .vendor-category-row {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0.75rem;
                background: #f8fafc;
                border-radius: 8px;
                transition: all 0.2s ease;
            }

            .vendor-category-row:hover {
                background: #f1f5f9;
                transform: translateX(4px);
            }

            .category-info {
                display: flex;
                align-items: center;
                gap: 0.75rem;
            }

            .category-icon {
                font-size: 1.1rem;
            }

            .category-label {
                font-weight: 500;
                color: #374151;
            }

            .status-badge {
                padding: 0.25rem 0.75rem;
                border-radius: 12px;
                font-size: 0.8rem;
                font-weight: 600;
            }

            .status-badge.empty {
                background: #f3f4f6;
                color: #6b7280;
            }

            .status-badge.selected {
                background: #dcfce7;
                color: #166534;
            }

            .status-badge.contacted {
                background: #dbeafe;
                color: #1e40af;
            }

            .status-badge.booked {
                background: #ede9fe;
                color: #6b21a8;
            }

            /* Modern Overview Screen Styles */
            .modern-hero-section {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                padding: 3rem 2rem;
                margin-bottom: 2rem;
                position: relative;
                overflow: hidden;
                border-radius: 0 0 24px 24px;
                box-shadow: 0 8px 32px rgba(102, 126, 234, 0.15);
            }

            .modern-hero-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="10" cy="60" r="0.5" fill="white" opacity="0.1"/><circle cx="90" cy="40" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
                pointer-events: none;
            }

            .hero-content {
                max-width: 1400px;
                margin: 0 auto;
                display: flex;
                justify-content: space-between;
                align-items: center;
                position: relative;
                z-index: 2;
            }

            .hero-left {
                flex: 1;
            }

            .hero-welcome h1 {
                margin: 0 0 0.5rem 0;
                color: white;
                font-size: 2.5rem;
                font-weight: 800;
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }

            .hero-welcome p {
                margin: 0 0 2rem 0;
                color: rgba(255,255,255,0.9);
                font-size: 1.2rem;
                font-weight: 400;
            }

            .hero-stats-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 1rem;
                max-width: 400px;
            }

            .hero-stat-card {
                background: rgba(255,255,255,0.15);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255,255,255,0.2);
                border-radius: 16px;
                padding: 1.5rem;
                text-align: center;
                transition: all 0.3s ease;
            }

            .hero-stat-card:hover {
                transform: translateY(-4px);
                background: rgba(255,255,255,0.2);
            }

            .stat-icon {
                font-size: 2rem;
                margin-bottom: 0.5rem;
                display: block;
            }

            .stat-content {
                color: white;
            }

            .stat-number {
                font-size: 1.75rem;
                font-weight: 800;
                margin-bottom: 0.25rem;
                display: block;
            }

            .stat-label {
                font-size: 0.875rem;
                font-weight: 500;
                opacity: 0.9;
            }

            .hero-right {
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .progress-ring-container {
                position: relative;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .progress-ring {
                transform: rotate(-90deg);
            }

            .progress-ring-bg {
                fill: none;
                stroke: rgba(255,255,255,0.2);
            }

            .progress-ring-fill {
                fill: none;
                stroke: white;
                stroke-linecap: round;
                transition: stroke-dashoffset 0.5s ease;
            }

            .progress-text {
                position: absolute;
                display: flex;
                justify-content: center;
                align-items: center;
                width: 80px;
                height: 80px;
                background: rgba(255,255,255,0.2);
                border-radius: 50%;
                backdrop-filter: blur(10px);
            }

            .progress-percentage {
                color: white;
                font-size: 1.25rem;
                font-weight: 700;
            }

            .modern-dashboard-grid {
                width: 100%;
                padding: 0;
                display: flex;
                flex-direction: column;
                gap: 2rem;
            }

            .dashboard-row {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
                gap: 2rem;
                width: 100%;
                padding: 0 2rem;
            }

            .dashboard-row.two-columns {
                grid-template-columns: 1fr 1fr;
            }

            .dashboard-row.full-width {
                grid-template-columns: 1fr;
            }

            .couple-info-card,
            .budget-overview-card,
            .preferences-card,
            .quick-actions-card,
            .vendor-tracking-card,
            .timeline-card,
            .insights-card,
            .progress-card {
                background: white;
                border-radius: 20px;
                border: 1px solid #e2e8f0;
                overflow: hidden;
                box-shadow: 0 4px 20px rgba(139, 92, 246, 0.08);
                transition: all 0.3s ease;
                position: relative;
            }

            .couple-info-card:hover,
            .budget-overview-card:hover,
            .preferences-card:hover,
            .quick-actions-card:hover,
            .vendor-tracking-card:hover,
            .timeline-card:hover,
            .insights-card:hover,
            .progress-card:hover {
                transform: translateY(-4px);
                box-shadow: 0 12px 40px rgba(139, 92, 246, 0.15);
            }

            .card-header-modern {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 1.5rem 2rem;
                background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
                border-bottom: 1px solid #e9d5ff;
            }

            .header-left {
                display: flex;
                align-items: center;
                gap: 1rem;
            }

            .icon-circle {
                width: 48px;
                height: 48px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
                font-weight: 600;
            }

            .couple-icon {
                background: linear-gradient(135deg, #ff6b6b, #ee5a24);
                color: white;
            }

            .budget-icon {
                background: linear-gradient(135deg, #2ed573, #1e90ff);
                color: white;
            }

            .preferences-icon {
                background: linear-gradient(135deg, #ffa502, #ff6348);
                color: white;
            }

            .actions-icon {
                background: linear-gradient(135deg, #8b5cf6, #7c3aed);
                color: white;
            }

            .vendor-icon {
                background: linear-gradient(135deg, #8b5cf6, #a855f7);
                color: white;
            }

            .timeline-icon {
                background: linear-gradient(135deg, #8b5cf6, #7c3aed);
                color: white;
            }

            .insights-icon {
                background: linear-gradient(135deg, #8b5cf6, #a855f7);
                color: white;
            }

            .header-text h3 {
                margin: 0;
                color: #1e293b;
                font-size: 1.25rem;
                font-weight: 700;
            }

            .header-text p {
                margin: 0.25rem 0 0 0;
                color: #64748b;
                font-size: 0.875rem;
                font-weight: 500;
            }

            .modern-edit-btn {
                background: rgba(255,255,255,0.8);
                border: 1px solid #e2e8f0;
                color: #64748b;
                cursor: pointer;
                padding: 0.75rem;
                border-radius: 12px;
                transition: all 0.2s ease;
                backdrop-filter: blur(10px);
            }

            .modern-edit-btn:hover {
                background: white;
                color: #1e293b;
                transform: translateY(-1px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            }

            /* Card Content Styles */
            .couple-details-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
                padding: 2rem;
            }

            .detail-item {
                display: flex;
                align-items: center;
                gap: 1rem;
                padding: 1rem;
                background: #f8fafc;
                border-radius: 12px;
                border: 1px solid #e2e8f0;
                transition: all 0.2s ease;
            }

            .detail-item:hover {
                background: #f1f5f9;
                transform: translateY(-1px);
            }

            .detail-icon {
                font-size: 1.5rem;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                border-radius: 10px;
            }

            .detail-content {
                flex: 1;
            }

            .detail-label {
                font-size: 0.875rem;
                color: #64748b;
                font-weight: 500;
                margin-bottom: 0.25rem;
            }

            .detail-value {
                font-size: 1rem;
                color: #1e293b;
                font-weight: 600;
            }

            /* Budget Content Styles */
            .budget-content {
                padding: 2rem;
            }

            .total-budget-display {
                text-align: center;
                padding: 2rem;
                background: linear-gradient(135deg, #f8fafc, #e2e8f0);
                border-radius: 16px;
                margin-bottom: 1.5rem;
            }

            .budget-amount {
                font-size: 2.5rem;
                font-weight: 800;
                color: #2ed573;
                margin-bottom: 0.5rem;
            }

            .budget-label {
                font-size: 1rem;
                color: #64748b;
                font-weight: 500;
            }

            .budget-categories {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .budget-category-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 1rem;
                background: #f8fafc;
                border-radius: 12px;
                border: 1px solid #e2e8f0;
                transition: all 0.2s ease;
            }

            .budget-category-item:hover {
                background: #f1f5f9;
                transform: translateX(4px);
            }

            .category-info {
                display: flex;
                align-items: center;
                gap: 0.75rem;
            }

            .category-icon {
                font-size: 1.25rem;
            }

            .category-name {
                font-weight: 600;
                color: #1e293b;
            }

            .category-amount {
                font-weight: 700;
                color: #2ed573;
                font-size: 1.1rem;
            }

            /* Preferences Grid */
            .preferences-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
                padding: 2rem;
            }

            .preference-item {
                display: flex;
                align-items: center;
                gap: 1rem;
                padding: 1.5rem;
                background: #f8fafc;
                border-radius: 16px;
                border: 1px solid #e2e8f0;
                transition: all 0.2s ease;
            }

            .preference-item:hover {
                background: #f1f5f9;
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            }

            .pref-icon {
                font-size: 1.5rem;
                width: 48px;
                height: 48px;
                display: flex;
                align-items: center;
                justify-content: center;
                background: linear-gradient(135deg, #ffa502, #ff6348);
                color: white;
                border-radius: 12px;
            }

            .pref-content {
                flex: 1;
            }

            .pref-label {
                font-size: 0.875rem;
                color: #64748b;
                font-weight: 500;
                margin-bottom: 0.25rem;
            }

            .pref-value {
                font-size: 1rem;
                color: #1e293b;
                font-weight: 600;
            }

            /* Quick Actions Grid */
            .actions-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 1rem;
                padding: 2rem;
            }

            .action-card {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 1rem;
                padding: 2rem 1.5rem;
                border: none;
                border-radius: 16px;
                cursor: pointer;
                transition: all 0.3s ease;
                text-align: center;
            }

            .action-card.primary {
                background: linear-gradient(135deg, #5f27cd, #341f97);
                color: white;
            }

            .action-card.secondary {
                background: #f8fafc;
                color: #1e293b;
                border: 1px solid #e2e8f0;
            }

            .action-card:hover {
                transform: translateY(-4px);
                box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            }

            .action-card.primary:hover {
                background: linear-gradient(135deg, #4c1d95, #2d1b69);
            }

            .action-card.secondary:hover {
                background: #f1f5f9;
            }

            .action-icon {
                font-size: 2rem;
                margin-bottom: 0.5rem;
            }

            .action-title {
                font-size: 1.1rem;
                font-weight: 700;
                margin-bottom: 0.25rem;
            }

            .action-desc {
                font-size: 0.875rem;
                opacity: 0.8;
            }

            /* Vendor Grid */
            .vendor-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 1.5rem;
                padding: 2rem;
            }

            .vendor-category-modern {
                background: #f8fafc;
                border-radius: 16px;
                border: 1px solid #e2e8f0;
                overflow: hidden;
                transition: all 0.2s ease;
            }

            .vendor-category-modern:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            }

            .vendor-category-header {
                display: flex;
                align-items: center;
                gap: 0.75rem;
                padding: 1rem;
                background: #f1f5f9;
                border-bottom: 1px solid #e2e8f0;
            }

            .vendor-category-icon {
                font-size: 1.25rem;
            }

            .vendor-category-info {
                flex: 1;
            }

            .vendor-category-name {
                font-weight: 600;
                color: #1e293b;
                font-size: 0.9rem;
            }

            .vendor-count {
                font-size: 0.75rem;
                color: #64748b;
                margin-top: 0.25rem;
            }

            .vendor-list-modern {
                padding: 1rem;
                min-height: 80px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .no-vendors {
                color: #64748b;
                font-size: 0.875rem;
                text-align: center;
                font-style: italic;
            }

            /* Timeline Modern */
            .timeline-modern {
                padding: 2rem;
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
            }

            .timeline-item-modern {
                display: flex;
                align-items: flex-start;
                gap: 1rem;
                position: relative;
            }

            .timeline-item-modern:not(:last-child)::after {
                content: '';
                position: absolute;
                left: 20px;
                top: 40px;
                bottom: -1.5rem;
                width: 2px;
                background: #e2e8f0;
            }

            .timeline-dot-modern {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                background: #e2e8f0;
                border: 3px solid white;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                flex-shrink: 0;
                position: relative;
                z-index: 1;
            }

            .timeline-item-modern.completed .timeline-dot-modern {
                background: linear-gradient(135deg, #2ed573, #1e90ff);
            }

            .timeline-content-modern {
                flex: 1;
                padding: 0.5rem 0;
            }

            .timeline-title-modern {
                font-weight: 600;
                color: #1e293b;
                margin-bottom: 0.25rem;
            }

            .timeline-desc-modern {
                font-size: 0.875rem;
                color: #64748b;
            }

            /* Progress Content Styles */
            .progress-content {
                padding: 2rem;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 2rem;
            }

            .progress-center {
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .progress-ring-large {
                position: relative;
                transform: rotate(-90deg);
            }

            .progress-ring-large .progress-ring-bg {
                fill: none;
                stroke: #e9d5ff;
            }

            .progress-ring-large .progress-ring-fill {
                fill: none;
                stroke: #8b5cf6;
                stroke-linecap: round;
                transition: stroke-dashoffset 0.5s ease;
            }

            .progress-text-large {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) rotate(90deg);
                text-align: center;
            }

            .progress-percentage-large {
                display: block;
                font-size: 1.75rem;
                font-weight: 800;
                color: #8b5cf6;
                margin-bottom: 0.25rem;
            }

            .progress-label-large {
                font-size: 0.875rem;
                color: #64748b;
                font-weight: 500;
            }

            .milestone-list {
                display: flex;
                flex-direction: column;
                gap: 1rem;
                width: 100%;
                max-width: 200px;
            }

            .milestone-item {
                display: flex;
                align-items: center;
                gap: 0.75rem;
            }

            .milestone-dot {
                width: 12px;
                height: 12px;
                border-radius: 50%;
                background: #e9d5ff;
                border: 2px solid white;
                box-shadow: 0 2px 4px rgba(139, 92, 246, 0.1);
            }

            .milestone-dot.completed {
                background: #8b5cf6;
            }

            .milestone-text {
                font-size: 0.875rem;
                color: #64748b;
                font-weight: 500;
            }

            /* Insights Content Styles */
            .insights-content {
                padding: 2rem;
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .insight-item {
                display: flex;
                align-items: flex-start;
                gap: 1rem;
                padding: 1rem;
                background: #faf5ff;
                border-radius: 12px;
                border: 1px solid #e9d5ff;
                transition: all 0.2s ease;
            }

            .insight-item:hover {
                background: #f3e8ff;
                transform: translateX(4px);
            }

            .insight-icon {
                font-size: 1.25rem;
                color: #8b5cf6;
                margin-top: 0.1rem;
            }

            .insight-text {
                font-size: 0.875rem;
                color: #64748b;
                line-height: 1.5;
            }

            /* Vendor Grid Full Width */
            .vendor-grid-full {
                display: grid;
                grid-template-columns: repeat(6, 1fr);
                gap: 1.5rem;
                padding: 2rem;
            }

            /* Update existing vendor grid for better spacing */
            .vendor-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 1.5rem;
                padding: 2rem;
            }

            .card-body {
                padding: 2rem;
                background: white;
            }

            /* Enhanced Info List Styles */
            .info-list {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .info-row {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 1rem;
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 12px;
                border: 1px solid rgba(226, 232, 240, 0.8);
                transition: all 0.3s ease;
            }

            .info-row:hover {
                background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
                transform: translateX(4px);
            }

            .info-row:last-child {
                border-bottom: none;
            }

            .info-label {
                font-weight: 600;
                color: #475569;
                font-size: 0.95rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .info-label::before {
                content: 'â€¢';
                color: #667eea;
                font-weight: bold;
            }

            .info-value {
                color: #1e293b;
                font-weight: 600;
                font-size: 1rem;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            /* Enhanced Preferences Summary */
            .preferences-summary {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .pref-section {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 1rem;
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 12px;
                border: 1px solid rgba(226, 232, 240, 0.8);
                transition: all 0.3s ease;
            }

            .pref-section:hover {
                background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
                transform: translateX(4px);
            }

            .pref-section:last-child {
                border-bottom: none;
            }

            .pref-label {
                font-weight: 600;
                color: #475569;
                font-size: 0.95rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .pref-label::before {
                content: 'ðŸŽ¨';
                font-size: 0.8rem;
            }

            .pref-value {
                color: #1e293b;
                font-weight: 600;
                font-size: 1rem;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                padding: 0.25rem 0.75rem;
                background: rgba(102, 126, 234, 0.1);
                border-radius: 8px;
                border: 1px solid rgba(102, 126, 234, 0.2);
            }

            /* Enhanced Budget Summary */
            .budget-summary {
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
            }

            .budget-total {
                text-align: center;
                padding: 2rem;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 16px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                color: white;
                position: relative;
                overflow: hidden;
                box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
            }

            .budget-total::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="budget-grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23budget-grain)"/></svg>');
                pointer-events: none;
            }

            .total-amount {
                font-size: 2.5rem;
                font-weight: 800;
                color: white;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                position: relative;
                z-index: 2;
            }

            .total-label {
                font-size: 1rem;
                color: rgba(255, 255, 255, 0.9);
                margin-top: 0.5rem;
                font-weight: 500;
                position: relative;
                z-index: 2;
            }

            .budget-breakdown {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }

            .budget-category {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 1rem;
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 12px;
                border: 1px solid rgba(226, 232, 240, 0.8);
                transition: all 0.3s ease;
            }

            .budget-category:hover {
                background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
                transform: translateX(4px);
            }

            .budget-category:last-child {
                border-bottom: none;
            }

            .category-name {
                font-weight: 600;
                color: #475569;
                font-size: 0.95rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .category-name::before {
                content: 'ðŸ’°';
                font-size: 0.8rem;
            }

            .category-amount {
                color: #1e293b;
                font-weight: 700;
                font-size: 1rem;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                padding: 0.25rem 0.75rem;
                background: rgba(102, 126, 234, 0.1);
                border-radius: 8px;
                border: 1px solid rgba(102, 126, 234, 0.2);
            }

            /* Enhanced Vendor Categories */
            .vendor-categories {
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
            }

            .vendor-category {
                border: 1px solid rgba(226, 232, 240, 0.8);
                border-radius: 16px;
                overflow: hidden;
                background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
                transition: all 0.3s ease;
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
            }

            .vendor-category:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
                border-color: rgba(102, 126, 234, 0.3);
            }

            .category-header {
                display: flex;
                align-items: center;
                gap: 1rem;
                padding: 1rem 1.5rem;
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-bottom: 1px solid rgba(226, 232, 240, 0.8);
            }

            .category-icon {
                font-size: 1.25rem;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                filter: drop-shadow(0 2px 4px rgba(102, 126, 234, 0.2));
            }

            .category-name {
                font-weight: 600;
                color: #1e293b;
                flex-grow: 1;
                font-size: 1rem;
            }

            .selection-count {
                font-size: 0.8rem;
                color: #667eea;
                background: rgba(102, 126, 234, 0.1);
                padding: 0.5rem 0.75rem;
                border-radius: 20px;
                font-weight: 600;
                border: 1px solid rgba(102, 126, 234, 0.2);
            }

            .vendor-list {
                padding: 1rem 1.5rem;
                min-height: 3rem;
                background: white;
            }

            .no-selection {
                color: #94a3b8;
                font-style: italic;
                text-align: center;
                font-size: 0.9rem;
                padding: 1rem;
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 8px;
                border: 1px dashed rgba(148, 163, 184, 0.3);
            }

            /* Enhanced Action Buttons */
            .action-buttons {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .action-btn {
                display: flex;
                align-items: center;
                gap: 1rem;
                padding: 1rem 1.5rem;
                border: none;
                border-radius: 12px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 1rem;
                position: relative;
                overflow: hidden;
            }

            .action-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                transition: left 0.5s ease;
            }

            .action-btn:hover::before {
                left: 100%;
            }

            .action-btn.primary {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
            }

            .action-btn.primary:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
            }

            .action-btn.secondary {
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                color: #1e293b;
                border: 1px solid rgba(226, 232, 240, 0.8);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            }

            .action-btn.secondary:hover {
                background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
                transform: translateY(-2px);
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
                border-color: rgba(102, 126, 234, 0.3);
            }

            .btn-icon {
                font-size: 1.2rem;
                filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
            }

            /* Enhanced Insights List */
            .insights-list {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .insight-item {
                display: flex;
                align-items: flex-start;
                gap: 1rem;
                padding: 1rem;
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 12px;
                border: 1px solid rgba(226, 232, 240, 0.8);
                transition: all 0.3s ease;
            }

            .insight-item:hover {
                background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
                transform: translateX(4px);
            }

            .insight-icon {
                font-size: 1.2rem;
                margin-top: 0.1rem;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                filter: drop-shadow(0 2px 4px rgba(102, 126, 234, 0.2));
            }

            .insight-text {
                font-size: 0.95rem;
                color: #475569;
                line-height: 1.5;
                font-weight: 500;
            }

            /* Enhanced Timeline List */
            .timeline-list {
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
                position: relative;
            }

            .timeline-list::before {
                content: '';
                position: absolute;
                left: 0.5rem;
                top: 0;
                bottom: 0;
                width: 2px;
                background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
                opacity: 0.3;
            }

            .timeline-item {
                display: flex;
                align-items: flex-start;
                gap: 1.5rem;
                position: relative;
                padding-left: 1rem;
            }

            .timeline-dot {
                width: 1.25rem;
                height: 1.25rem;
                border-radius: 50%;
                background: #d1d5db;
                border: 3px solid white;
                box-shadow: 0 0 0 3px rgba(226, 232, 240, 0.8);
                flex-shrink: 0;
                margin-top: 0.25rem;
                transition: all 0.3s ease;
                position: relative;
                z-index: 2;
            }

            .timeline-item.completed .timeline-dot {
                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
            }

            .timeline-item.in-progress .timeline-dot {
                background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
                box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.1); }
            }

            .timeline-content {
                flex-grow: 1;
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                padding: 1rem;
                border-radius: 12px;
                border: 1px solid rgba(226, 232, 240, 0.8);
                transition: all 0.3s ease;
            }

            .timeline-content:hover {
                background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
                transform: translateX(4px);
            }

            .timeline-title {
                font-weight: 700;
                color: #1e293b;
                margin-bottom: 0.5rem;
                font-size: 1rem;
            }

            .timeline-desc {
                font-size: 0.9rem;
                color: #64748b;
                line-height: 1.4;
            }

            /* Vendor Categories Styles */
            .vendor-categories {
                margin: 2rem 0;
            }

            .category-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 1rem;
                margin-bottom: 2rem;
            }

            .category-card {
                background: white;
                border: 2px solid #e5e7eb;
                border-radius: 12px;
                padding: 1.5rem;
                text-align: center;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            }

            .category-card:hover {
                border-color: #8B5CF6;
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(139, 92, 246, 0.15);
            }

            .category-card.active {
                background: linear-gradient(135deg, #8B5CF6, #7C3AED);
                color: white;
                border-color: #8B5CF6;
            }

            .category-icon {
                font-size: 2rem;
                margin-bottom: 0.75rem;
                display: block;
            }

            .category-name {
                font-size: 0.9rem;
                font-weight: 600;
                color: #374151;
            }

            .category-card.active .category-name {
                color: white;
            }

            .search-controls {
                display: flex;
                gap: 1rem;
                align-items: center;
                margin-bottom: 2rem;
                flex-wrap: wrap;
            }

            .form-select {
                padding: 0.75rem 1rem;
                border: 1px solid #e5e7eb;
                border-radius: 8px;
                background: white;
                color: #374151;
                font-size: 0.9rem;
                min-width: 150px;
            }

            .vendor-results {
                background: white;
                border-radius: 12px;
                padding: 2rem;
                border: 1px solid #e5e7eb;
                min-height: 200px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .text-center {
                text-align: center;
                color: #6b7280;
            }

            /* Enhanced Overview Animations */
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes slideInLeft {
                from {
                    opacity: 0;
                    transform: translateX(-30px);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }

            @keyframes slideInRight {
                from {
                    opacity: 0;
                    transform: translateX(30px);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }

            .overview-header {
                animation: fadeInUp 0.8s ease-out;
            }

            .overview-left .overview-card:nth-child(1) {
                animation: slideInLeft 0.6s ease-out 0.2s both;
            }

            .overview-left .overview-card:nth-child(2) {
                animation: slideInLeft 0.6s ease-out 0.4s both;
            }

            .overview-left .overview-card:nth-child(3) {
                animation: slideInLeft 0.6s ease-out 0.6s both;
            }

            .overview-right .overview-card:nth-child(1) {
                animation: slideInRight 0.6s ease-out 0.3s both;
            }

            .overview-right .overview-card:nth-child(2) {
                animation: slideInRight 0.6s ease-out 0.5s both;
            }

            .overview-right .overview-card:nth-child(3) {
                animation: slideInRight 0.6s ease-out 0.7s both;
            }

            .overview-right .overview-card:nth-child(4) {
                animation: slideInRight 0.6s ease-out 0.9s both;
            }

            /* Enhanced Hover Effects */
            .overview-card:hover .card-icon {
                transform: scale(1.1) rotate(5deg);
                transition: all 0.3s ease;
            }

            .stat-item:hover .stat-number {
                transform: scale(1.1);
                transition: all 0.3s ease;
            }

            /* Responsive Design */
            @media (max-width: 768px) {
                .modern-hero-section {
                    padding: 2rem 1rem;
                }

                .hero-content {
                    flex-direction: column;
                    gap: 2rem;
                    text-align: center;
                }

                .hero-welcome h1 {
                    font-size: 2rem;
                }

                .hero-stats-grid {
                    grid-template-columns: repeat(3, 1fr);
                    max-width: 100%;
                }

                .hero-stat-card {
                    padding: 1rem;
                }

                .modern-dashboard-grid {
                    padding: 0 1rem;
                }

                .dashboard-row {
                    grid-template-columns: 1fr;
                    gap: 1.5rem;
                }

                .couple-details-grid {
                    grid-template-columns: 1fr;
                }

                .preferences-grid {
                    grid-template-columns: 1fr;
                }

                .actions-grid {
                    grid-template-columns: 1fr;
                }

                .vendor-grid {
                    grid-template-columns: repeat(2, 1fr);
                }

                .vendor-grid-full {
                    grid-template-columns: repeat(3, 1fr);
                }

                .milestone-list {
                    max-width: 100%;
                }

                .progress-content {
                    flex-direction: row;
                    gap: 1.5rem;
                }

                .budget-categories {
                    gap: 0.75rem;
                }

                .card-header-modern {
                    padding: 1rem 1.5rem;
                }

                .header-left {
                    gap: 0.75rem;
                }

                .icon-circle {
                    width: 40px;
                    height: 40px;
                    font-size: 1.25rem;
                }

                .header-text h3 {
                    font-size: 1.1rem;
                }

                .header-text p {
                    font-size: 0.8rem;
                }

                /* Legacy responsive styles */
                .vendor-discovery-header {
                    flex-direction: column;
                    gap: 1rem;
                    text-align: center;
                }

                .vendor-tabs {
                    justify-content: flex-start;
                }

                .vendor-stats-grid {
                    grid-template-columns: repeat(2, 1fr);
                }
            }

            @media (max-width: 480px) {
                .hero-welcome h1 {
                    font-size: 1.75rem;
                }

                .hero-stats-grid {
                    grid-template-columns: 1fr;
                    gap: 0.75rem;
                }

                .vendor-grid {
                    grid-template-columns: 1fr;
                }

                .vendor-grid-full {
                    grid-template-columns: repeat(2, 1fr);
                }

                .actions-grid {
                    gap: 0.75rem;
                }

                .progress-content {
                    flex-direction: column;
                    gap: 1rem;
                }

                .action-card {
                    padding: 1.5rem 1rem;
                }

                .detail-item,
                .preference-item,
                .budget-category-item {
                    padding: 0.75rem;
                }

                .detail-icon,
                .pref-icon {
                    width: 36px;
                    height: 36px;
                    font-size: 1.25rem;
                }
            }

            .couple-info-display, .preferences-summary, .budget-summary {
                padding: 1.5rem;
            }

            .couple-names-display {
                font-size: 1.5rem;
                font-weight: 700;
                color: #8B5CF6;
                margin-bottom: 1rem;
                text-align: center;
            }

            .wedding-date-display, .location-display, .countdown-display {
                display: flex;
                align-items: center;
                gap: 0.75rem;
                margin-bottom: 0.75rem;
                padding: 0.75rem;
                background: #f8fafc;
                border-radius: 8px;
            }

            .date-icon, .location-icon, .countdown-icon {
                font-size: 1.2rem;
            }

            .preference-item, .budget-category {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0.75rem 0;
                border-bottom: 1px solid #f3f4f6;
            }

            .preference-item:last-child, .budget-category:last-child {
                border-bottom: none;
            }

            .pref-label, .category-name {
                font-weight: 500;
                color: #6b7280;
            }

            .pref-value, .category-amount {
                font-weight: 600;
                color: #374151;
            }

            .budget-total {
                background: linear-gradient(135deg, #8B5CF6, #7C3AED);
                color: white;
                padding: 1rem;
                border-radius: 8px;
                margin-bottom: 1rem;
                text-align: center;
            }

            .budget-label {
                display: block;
                font-size: 0.9rem;
                opacity: 0.9;
            }

            .budget-amount {
                display: block;
                font-size: 1.5rem;
                font-weight: 700;
                margin-top: 0.25rem;
            }

            .vendors-grid {
                padding: 1.5rem;
            }

            .vendor-category {
                margin-bottom: 1.5rem;
            }

            .category-header {
                display: flex;
                align-items: center;
                gap: 0.75rem;
                margin-bottom: 0.75rem;
                padding: 0.75rem;
                background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
                border-radius: 8px;
            }

            .category-icon {
                font-size: 1.2rem;
            }

            .category-name {
                font-weight: 600;
                color: #374151;
                flex-grow: 1;
            }

            .selection-count {
                font-size: 0.85rem;
                color: #6b7280;
                background: #e5e7eb;
                padding: 0.25rem 0.5rem;
                border-radius: 12px;
            }

            .vendor-list {
                min-height: 2rem;
            }

            .no-selection {
                color: #9ca3af;
                font-style: italic;
                padding: 0.5rem;
                text-align: center;
            }

            .vendor-item {
                background: #f8fafc;
                border: 1px solid #e5e7eb;
                border-radius: 6px;
                padding: 0.75rem;
                margin-bottom: 0.5rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .vendor-name {
                font-weight: 500;
                color: #374151;
            }

            .vendor-status {
                font-size: 0.8rem;
                padding: 0.25rem 0.5rem;
                border-radius: 12px;
                background: #10b981;
                color: white;
            }

            .action-buttons {
                padding: 1rem 1.5rem;
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }

            .blueprint-btn {
                display: flex;
                align-items: center;
                gap: 0.75rem;
                padding: 0.75rem 1rem;
                border: none;
                border-radius: 8px;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.2s ease;
            }

            .blueprint-btn.primary {
                background: #8B5CF6;
                color: white;
            }

            .blueprint-btn.primary:hover {
                background: #7C3AED;
                transform: translateY(-1px);
            }

            .blueprint-btn.secondary {
                background: #f3f4f6;
                color: #374151;
                border: 1px solid #e5e7eb;
            }

            .blueprint-btn.secondary:hover {
                background: #e5e7eb;
            }

            .ai-insights {
                padding: 1rem 1.5rem;
                border-top: 1px solid #e5e7eb;
            }

            .ai-insights h4 {
                margin: 0 0 1rem 0;
                font-size: 1rem;
                color: #374151;
            }

            .insight-item {
                display: flex;
                align-items: flex-start;
                gap: 0.75rem;
                margin-bottom: 0.75rem;
            }

            .insight-icon {
                font-size: 1rem;
                margin-top: 0.1rem;
            }

            .insight-text {
                font-size: 0.9rem;
                color: #6b7280;
                line-height: 1.4;
            }

            .timeline-items {
                padding: 1.5rem;
            }

            .timeline-item {
                display: flex;
                align-items: flex-start;
                gap: 1rem;
                margin-bottom: 1.5rem;
                position: relative;
            }

            .timeline-item:last-child {
                margin-bottom: 0;
            }

            .timeline-item::after {
                content: '';
                position: absolute;
                left: 0.625rem;
                top: 2rem;
                width: 2px;
                height: calc(100% + 0.5rem);
                background: #e5e7eb;
            }

            .timeline-item:last-child::after {
                display: none;
            }

            .timeline-dot {
                width: 1.25rem;
                height: 1.25rem;
                border-radius: 50%;
                background: #d1d5db;
                border: 3px solid white;
                box-shadow: 0 0 0 2px #e5e7eb;
                flex-shrink: 0;
                margin-top: 0.125rem;
            }

            .timeline-item.completed .timeline-dot {
                background: #10b981;
            }

            .timeline-item.in-progress .timeline-dot {
                background: #f59e0b;
            }

            .timeline-content {
                flex-grow: 1;
            }

            .timeline-title {
                font-weight: 600;
                color: #374151;
                margin-bottom: 0.25rem;
            }

            .timeline-desc {
                font-size: 0.9rem;
                color: #6b7280;
            }

            /* Multi-select styles */
            .multi-select-hint {
                font-size: 0.85rem;
                color: #8B5CF6;
                font-weight: 500;
                background: #f3f4f6;
                padding: 0.25rem 0.75rem;
                border-radius: 12px;
                margin-left: 0.5rem;
            }

            .option-btn.multi {
                transition: all 0.2s ease;
                border: 2px solid transparent;
            }

            .option-btn.multi.selected {
                background: #8B5CF6 !important;
                color: white !important;
                border-color: #7C3AED;
                transform: scale(1.02);
            }

            .option-btn.multi:hover {
                transform: translateY(-1px);
                box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
            }
            
            .category-grid {
                grid-template-columns: 1fr;
            }
            
            .insights-grid {
                grid-template-columns: 1fr;
            }
            
            .categories-header {
                flex-direction: column;
                gap: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">ðŸ’’</div>
                    <div class="logo-text">
                        <h1>Vivaha AI</h1>
                        <p>Intelligent Wedding Planner</p>
                    </div>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Planning</div>
                <div class="nav-item active" onclick="showScreen('overview')">
                    <span class="nav-icon">ðŸ </span>
                    <span>Overview</span>
                </div>
                <div class="nav-item" onclick="showScreen('couple-form')">
                    <span class="nav-icon">â¤ï¸</span>
                    <span>Couple Details</span>
                </div>
                <div class="nav-item" onclick="showScreen('preferences')">
                    <span class="nav-icon">ðŸŽ¨</span>
                    <span>Style & Design</span>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Management</div>
                <div class="nav-item" onclick="window.open('/vendor-discovery', '_blank')">
                    <span class="nav-icon">ðŸª</span>
                    <span>Vendor Discovery</span>
                </div>
                <div class="nav-item" onclick="showScreen('budget')">
                    <span class="nav-icon">ðŸ’°</span>
                    <span>Budget</span>
                </div>
                <div class="nav-item" onclick="showScreen('timeline')">
                    <span class="nav-icon">ðŸ“…</span>
                    <span>Timeline</span>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Tools</div>
                <div class="nav-item" onclick="showScreen('guest-list')">
                    <span class="nav-icon">ðŸ“</span>
                    <span>Guest List</span>
                </div>
                <div class="nav-item" onclick="showScreen('checklist')">
                    <span class="nav-icon">âœ…</span>
                    <span>Checklist</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="page-title" id="page-title">Overview</div>
                <div class="top-bar-actions">
                    <div class="status-indicator" id="status">
                        <div class="status-dot"></div>
                        <span>Checking connection...</span>
                    </div>
                    <button class="save-btn" onclick="saveProgress()">ðŸ’¾ Save Progress</button>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Modern Overview Screen -->
                <div id="overview" class="screen active">
                    <!-- Hero Section with Progress -->
                    <div class="modern-hero-section">
                        <div class="hero-content">
                            <div class="hero-left">
                                <div class="hero-welcome">
                                    <h1>ðŸŽ‰ Welcome to Your Wedding Journey</h1>
                                    <p>Let's make your dream wedding a reality together</p>
                                </div>
                                <div class="hero-stats-grid">
                                    <div class="hero-stat-card">
                                        <div class="stat-icon">ðŸ“Š</div>
                                        <div class="stat-content">
                                            <div class="stat-number" id="completion-percentage">15%</div>
                                            <div class="stat-label">Complete</div>
                                        </div>
                                    </div>
                                    <div class="hero-stat-card">
                                        <div class="stat-icon">â°</div>
                                        <div class="stat-content">
                                            <div class="stat-number" id="days-remaining">âˆž</div>
                                            <div class="stat-label">Days Left</div>
                                        </div>
                                    </div>
                                    <div class="hero-stat-card">
                                        <div class="stat-icon">ðŸª</div>
                                        <div class="stat-content">
                                            <div class="stat-number" id="vendors-selected">0</div>
                                            <div class="stat-label">Vendors</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="hero-right">
                                <div class="progress-ring-container">
                                    <svg class="progress-ring" width="120" height="120">
                                        <circle class="progress-ring-bg" cx="60" cy="60" r="54" stroke-width="8"/>
                                        <circle class="progress-ring-fill" cx="60" cy="60" r="54" stroke-width="8" 
                                                stroke-dasharray="339.292" stroke-dashoffset="288.398"/>
                                    </svg>
                                    <div class="progress-text">
                                        <span class="progress-percentage" id="completion-percentage-ring">15%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Dashboard Grid -->
                    <div class="modern-dashboard-grid">
                        <!-- Top Row - Couple Info, Budget & Progress -->
                        <div class="dashboard-row">
                            <div class="couple-info-card">
                                <div class="card-header-modern">
                                    <div class="header-left">
                                        <div class="icon-circle couple-icon">ðŸ’‘</div>
                                        <div class="header-text">
                                            <h3>Couple Details</h3>
                                            <p>Your wedding information</p>
                                        </div>
                                    </div>
                                    <button class="modern-edit-btn" onclick="showScreen('couple-form')">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="couple-details-grid">
                                    <div class="detail-item">
                                        <div class="detail-icon">ðŸ‘°ðŸ¤µ</div>
                                        <div class="detail-content">
                                            <div class="detail-label">Names</div>
                                            <div class="detail-value" id="couple-names-text">Add Your Names</div>
                                        </div>
                                    </div>
                                    <div class="detail-item">
                                        <div class="detail-icon">ðŸ“…</div>
                                        <div class="detail-content">
                                            <div class="detail-label">Wedding Date</div>
                                            <div class="detail-value" id="wedding-date-blueprint">Set Wedding Date</div>
                                        </div>
                                    </div>
                                    <div class="detail-item">
                                        <div class="detail-icon">ðŸ“</div>
                                        <div class="detail-content">
                                            <div class="detail-label">Location</div>
                                            <div class="detail-value" id="wedding-location-blueprint">Choose Location</div>
                                        </div>
                                    </div>
                                    <div class="detail-item">
                                        <div class="detail-icon">â³</div>
                                        <div class="detail-content">
                                            <div class="detail-label">Countdown</div>
                                            <div class="detail-value">
                                                <span id="days-countdown">âˆž</span> days to go
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="budget-overview-card">
                                <div class="card-header-modern">
                                    <div class="header-left">
                                        <div class="icon-circle budget-icon">ðŸ’°</div>
                                        <div class="header-text">
                                            <h3>Budget Overview</h3>
                                            <p>Financial planning</p>
                                        </div>
                                    </div>
                                    <button class="modern-edit-btn" onclick="showScreen('budget')">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="budget-content">
                                    <div class="total-budget-display">
                                        <div class="budget-amount" id="total-budget-display">â‚¹0</div>
                                        <div class="budget-label">Total Budget</div>
                                    </div>
                                    <div class="budget-categories">
                                        <div class="budget-category-item">
                                            <div class="category-info">
                                                <div class="category-icon">ðŸ›ï¸</div>
                                                <div class="category-name">Venue</div>
                                            </div>
                                            <div class="category-amount" id="venue-budget">â‚¹0</div>
                                        </div>
                                        <div class="budget-category-item">
                                            <div class="category-info">
                                                <div class="category-icon">ðŸ“¸</div>
                                                <div class="category-name">Photography</div>
                                            </div>
                                            <div class="category-amount" id="photography-budget">â‚¹0</div>
                                        </div>
                                        <div class="budget-category-item">
                                            <div class="category-info">
                                                <div class="category-icon">ðŸ½ï¸</div>
                                                <div class="category-name">Catering</div>
                                            </div>
                                            <div class="category-amount" id="catering-budget">â‚¹0</div>
                                        </div>
                                        <div class="budget-category-item">
                                            <div class="category-info">
                                                <div class="category-icon">ðŸŽ¨</div>
                                                <div class="category-name">Decor</div>
                                            </div>
                                            <div class="category-amount" id="decor-budget">â‚¹0</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="progress-card">
                                <div class="card-header-modern">
                                    <div class="header-left">
                                        <div class="icon-circle timeline-icon">ðŸ“Š</div>
                                        <div class="header-text">
                                            <h3>Planning Progress</h3>
                                            <p>Journey completion</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="progress-content">
                                    <div class="progress-center">
                                        <div class="progress-ring-large">
                                            <svg width="140" height="140">
                                                <circle class="progress-ring-bg" cx="70" cy="70" r="60" stroke-width="10"/>
                                                <circle class="progress-ring-fill" cx="70" cy="70" r="60" stroke-width="10" 
                                                        stroke-dasharray="377" stroke-dashoffset="320"/>
                                            </svg>
                                            <div class="progress-text-large">
                                                <span class="progress-percentage-large" id="completion-percentage-large">15%</span>
                                                <span class="progress-label-large">Complete</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="milestone-list">
                                        <div class="milestone-item">
                                            <div class="milestone-dot pending"></div>
                                            <span class="milestone-text">Wedding Details</span>
                                        </div>
                                        <div class="milestone-item">
                                            <div class="milestone-dot pending"></div>
                                            <span class="milestone-text">Style Preferences</span>
                                        </div>
                                        <div class="milestone-item">
                                            <div class="milestone-dot pending"></div>
                                            <span class="milestone-text">Vendor Selection</span>
                                        </div>
                                        <div class="milestone-item">
                                            <div class="milestone-dot pending"></div>
                                            <span class="milestone-text">Final Planning</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Middle Row - Preferences, Actions & Timeline -->
                        <div class="dashboard-row">
                            <div class="preferences-card">
                                <div class="card-header-modern">
                                    <div class="header-left">
                                        <div class="icon-circle preferences-icon">ðŸŽ¨</div>
                                        <div class="header-text">
                                            <h3>Style & Preferences</h3>
                                            <p>Your wedding vision</p>
                                        </div>
                                    </div>
                                    <button class="modern-edit-btn" onclick="showScreen('preferences')">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="preferences-grid" id="preferences-summary">
                                    <div class="preference-item">
                                        <div class="pref-icon">ðŸŽ­</div>
                                        <div class="pref-content">
                                            <div class="pref-label">Theme</div>
                                            <div class="pref-value" id="theme-display">Not set</div>
                                        </div>
                                    </div>
                                    <div class="preference-item">
                                        <div class="pref-icon">ðŸ›ï¸</div>
                                        <div class="pref-content">
                                            <div class="pref-label">Venue Type</div>
                                            <div class="pref-value" id="venue-type-display">Not set</div>
                                        </div>
                                    </div>
                                    <div class="preference-item">
                                        <div class="pref-icon">ðŸ“¸</div>
                                        <div class="pref-content">
                                            <div class="pref-label">Photography</div>
                                            <div class="pref-value" id="photography-display">Not set</div>
                                        </div>
                                    </div>
                                    <div class="preference-item">
                                        <div class="pref-icon">ðŸŽ¨</div>
                                        <div class="pref-content">
                                            <div class="pref-label">Decor</div>
                                            <div class="pref-value" id="decor-display">Not set</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="quick-actions-card">
                                <div class="card-header-modern">
                                    <div class="header-left">
                                        <div class="icon-circle actions-icon">âš¡</div>
                                        <div class="header-text">
                                            <h3>Quick Actions</h3>
                                            <p>Get things done</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="actions-grid">
                                    <button class="action-card primary" onclick="showScreen('vendor-discovery')">
                                        <div class="action-icon">ðŸ”</div>
                                        <div class="action-text">
                                            <div class="action-title">Find Vendors</div>
                                            <div class="action-desc">Discover perfect vendors</div>
                                        </div>
                                    </button>
                                    <button class="action-card secondary" onclick="showScreen('budget')">
                                        <div class="action-icon">ðŸ’°</div>
                                        <div class="action-text">
                                            <div class="action-title">Manage Budget</div>
                                            <div class="action-desc">Track expenses</div>
                                        </div>
                                    </button>
                                    <button class="action-card secondary" onclick="showScreen('preferences')">
                                        <div class="action-icon">ðŸŽ¨</div>
                                        <div class="action-text">
                                            <div class="action-title">Update Style</div>
                                            <div class="action-desc">Refine preferences</div>
                                        </div>
                                    </button>
                                </div>
                            </div>

                            <div class="insights-card">
                                <div class="card-header-modern">
                                    <div class="header-left">
                                        <div class="icon-circle insights-icon">ðŸ¤–</div>
                                        <div class="header-text">
                                            <h3>AI Insights</h3>
                                            <p>Smart recommendations</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="insights-content">
                                    <div class="insight-item">
                                        <div class="insight-icon">ðŸ’¡</div>
                                        <div class="insight-text">Complete your preferences to get personalized vendor suggestions</div>
                                    </div>
                                    <div class="insight-item">
                                        <div class="insight-icon">ðŸ“Š</div>
                                        <div class="insight-text">Set your budget to optimize vendor recommendations</div>
                                    </div>
                                    <div class="insight-item">
                                        <div class="insight-icon">ðŸŽ¯</div>
                                        <div class="insight-text">Book vendors 6-12 months in advance for best availability</div>
                                    </div>
                                    <div class="insight-item">
                                        <div class="insight-icon">ðŸ’°</div>
                                        <div class="insight-text">Consider allocating 40% of budget to venue and catering</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Bottom Row - Vendor Tracking (Full Width) -->
                        <div class="dashboard-row full-width">
                            <div class="vendor-tracking-card">
                                <div class="card-header-modern">
                                    <div class="header-left">
                                        <div class="icon-circle vendor-icon">ðŸª</div>
                                        <div class="header-text">
                                            <h3>Vendor Tracking</h3>
                                            <p>Your selected vendors across all categories</p>
                                        </div>
                                    </div>
                                    <button class="modern-edit-btn" onclick="showScreen('vendor-discovery')">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                            <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                                            <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="vendor-grid-full" id="vendors-grid">
                                    <div class="vendor-category-modern">
                                        <div class="vendor-category-header">
                                            <div class="vendor-category-icon">ðŸ›ï¸</div>
                                            <div class="vendor-category-info">
                                                <div class="vendor-category-name">Venues</div>
                                                <div class="vendor-count" id="venues-count">0 selected</div>
                                            </div>
                                        </div>
                                        <div class="vendor-list-modern" id="venues-list">
                                            <div class="no-vendors">No venues selected</div>
                                        </div>
                                    </div>
                                    
                                    <div class="vendor-category-modern">
                                        <div class="vendor-category-header">
                                            <div class="vendor-category-icon">ðŸ“¸</div>
                                            <div class="vendor-category-info">
                                                <div class="vendor-category-name">Photography</div>
                                                <div class="vendor-count" id="photography-count">0 selected</div>
                                            </div>
                                        </div>
                                        <div class="vendor-list-modern" id="photography-list">
                                            <div class="no-vendors">No photographers selected</div>
                                        </div>
                                    </div>
                                    
                                    <div class="vendor-category-modern">
                                        <div class="vendor-category-header">
                                            <div class="vendor-category-icon">ðŸ½ï¸</div>
                                            <div class="vendor-category-info">
                                                <div class="vendor-category-name">Catering</div>
                                                <div class="vendor-count" id="catering-count">0 selected</div>
                                            </div>
                                        </div>
                                        <div class="vendor-list-modern" id="catering-list">
                                            <div class="no-vendors">No caterers selected</div>
                                        </div>
                                    </div>
                                    
                                    <div class="vendor-category-modern">
                                        <div class="vendor-category-header">
                                            <div class="vendor-category-icon">ðŸŽ¨</div>
                                            <div class="vendor-category-info">
                                                <div class="vendor-category-name">Decor</div>
                                                <div class="vendor-count" id="decor-count">0 selected</div>
                                            </div>
                                        </div>
                                        <div class="vendor-list-modern" id="decor-list">
                                            <div class="no-vendors">No decorators selected</div>
                                        </div>
                                    </div>
                                    
                                    <div class="vendor-category-modern">
                                        <div class="vendor-category-header">
                                            <div class="vendor-category-icon">ðŸ’„</div>
                                            <div class="vendor-category-info">
                                                <div class="vendor-category-name">Beauty</div>
                                                <div class="vendor-count" id="beauty-count">0 selected</div>
                                            </div>
                                        </div>
                                        <div class="vendor-list-modern" id="beauty-list">
                                            <div class="no-vendors">No beauty services selected</div>
                                        </div>
                                    </div>
                                    
                                    <div class="vendor-category-modern">
                                        <div class="vendor-category-header">
                                            <div class="vendor-category-icon">ðŸŽµ</div>
                                            <div class="vendor-category-info">
                                                <div class="vendor-category-name">Entertainment</div>
                                                <div class="vendor-count" id="entertainment-count">0 selected</div>
                                            </div>
                                        </div>
                                        <div class="vendor-list-modern" id="entertainment-list">
                                            <div class="no-vendors">No entertainment selected</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Couple Details Screen -->
                <div id="couple-form" class="screen">
                    <div class="form-container">
                        <!-- Progress Indicator -->
                        <div class="progress-indicator">
                            <div class="progress-step active">
                                <div class="step-number">1</div>
                                <div class="step-label">Couple Details</div>
                            </div>
                            <div class="progress-line"></div>
                            <div class="progress-step">
                                <div class="step-number">2</div>
                                <div class="step-label">Style Preferences</div>
                            </div>
                            <div class="progress-line"></div>
                            <div class="progress-step">
                                <div class="step-number">3</div>
                                <div class="step-label">Vendor Matching</div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h2>Tell Us About Your Love Story</h2>
                            <form id="weddingForm">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="partner1">Partner 1 Name</label>
                                        <input type="text" id="partner1" name="partner1" placeholder="Enter first partner's name">
                                    </div>
                                    <div class="form-group">
                                        <label for="partner2">Partner 2 Name</label>
                                        <input type="text" id="partner2" name="partner2" placeholder="Enter second partner's name">
                                    </div>
                                    <div class="form-group">
                                        <label for="weddingCity">Wedding City</label>
                                        <input type="text" id="weddingCity" name="weddingCity" placeholder="Enter city">
                                    </div>
                                </div>

                                <!-- Wedding Date & Timeline Section -->
                                <div class="form-section-header">
                                    <h3>ðŸ“… Wedding Date & Timeline</h3>
                                </div>
                                
                                <div class="date-timeline-section">
                                    <div class="preference-grid">
                                        <div class="preference-category">
                                            <div class="category-title">
                                                <span>ðŸ“…</span> Date Flexibility
                                            </div>
                                            <div class="option-buttons">
                                                <button type="button" class="option-btn" data-category="dateFlexibility" data-value="specific" onclick="selectDateOption(this, 'dateFlexibility', 'Specific Date')">Specific Date</button>
                                                <button type="button" class="option-btn" data-category="dateFlexibility" data-value="3months" onclick="selectDateOption(this, 'dateFlexibility', 'Within 3 Months')">Within 3 Months</button>
                                                <button type="button" class="option-btn" data-category="dateFlexibility" data-value="6months" onclick="selectDateOption(this, 'dateFlexibility', 'Within 6 Months')">Within 6 Months</button>
                                                <button type="button" class="option-btn" data-category="dateFlexibility" data-value="12months" onclick="selectDateOption(this, 'dateFlexibility', 'Within 12 Months')">Within 12 Months</button>
                                            </div>
                                        </div>

                                        <div class="preference-category">
                                            <div class="category-title">
                                                <span>ðŸŒ™</span> Preferred Season
                                            </div>
                                            <div class="option-buttons">
                                                <button type="button" class="option-btn" data-category="season" data-value="winter" onclick="selectDateOption(this, 'season', 'Winter')">Winter</button>
                                                <button type="button" class="option-btn" data-category="season" data-value="spring" onclick="selectDateOption(this, 'season', 'Spring')">Spring</button>
                                                <button type="button" class="option-btn" data-category="season" data-value="summer" onclick="selectDateOption(this, 'season', 'Summer')">Summer</button>
                                                <button type="button" class="option-btn" data-category="season" data-value="monsoon" onclick="selectDateOption(this, 'season', 'Monsoon')">Monsoon</button>
                                            </div>
                                        </div>

                                        <div class="preference-category">
                                            <div class="category-title">
                                                <span>â°</span> Event Duration
                                            </div>
                                            <div class="option-buttons">
                                                <button type="button" class="option-btn" data-category="duration" data-value="1day" onclick="selectDateOption(this, 'duration', '1 Day')">1 Day</button>
                                                <button type="button" class="option-btn" data-category="duration" data-value="2days" onclick="selectDateOption(this, 'duration', '2 Days')">2 Days</button>
                                                <button type="button" class="option-btn" data-category="duration" data-value="3days" onclick="selectDateOption(this, 'duration', '3 Days')">3 Days</button>
                                                <button type="button" class="option-btn" data-category="duration" data-value="week" onclick="selectDateOption(this, 'duration', 'Week-long')">Week-long</button>
                                            </div>
                                        </div>

                                        <div class="preference-category">
                                            <div class="category-title">
                                                <span>ðŸ“</span> Guest Count
                                            </div>
                                            <div class="option-buttons">
                                                <button type="button" class="option-btn" data-category="guestCount" data-value="intimate" onclick="selectDateOption(this, 'guestCount', 'Intimate (50-100)')">Intimate (50-100)</button>
                                                <button type="button" class="option-btn" data-category="guestCount" data-value="medium" onclick="selectDateOption(this, 'guestCount', 'Medium (100-300)')">Medium (100-300)</button>
                                                <button type="button" class="option-btn" data-category="guestCount" data-value="large" onclick="selectDateOption(this, 'guestCount', 'Large (300-500)')">Large (300-500)</button>
                                                <button type="button" class="option-btn" data-category="guestCount" data-value="grand" onclick="selectDateOption(this, 'guestCount', 'Grand (500+)')">Grand (500+)</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="date-input-section">
                                        <div class="input-grid">
                                            <div class="form-group">
                                                <label for="weddingDate">Preferred Start Date (Optional)</label>
                                                <input type="date" id="weddingDate" name="weddingDate">
                                                <small>First day of your wedding celebration</small>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="budget-section">
                                        <div class="category-title">
                                            <span>ðŸ’°</span> Budget Range
                                        </div>
                                        <div class="option-buttons budget-buttons">
                                            <button type="button" class="option-btn" data-category="budget" data-value="budget" onclick="selectDateOption(this, 'budget', 'Budget (â‚¹5-15L)')">Budget (â‚¹5-15L)</button>
                                            <button type="button" class="option-btn" data-category="budget" data-value="premium" onclick="selectDateOption(this, 'budget', 'Premium (â‚¹15-30L)')">Premium (â‚¹15-30L)</button>
                                            <button type="button" class="option-btn" data-category="budget" data-value="luxury" onclick="selectDateOption(this, 'budget', 'Luxury (â‚¹30-50L)')">Luxury (â‚¹30-50L)</button>
                                            <button type="button" class="option-btn" data-category="budget" data-value="ultra" onclick="selectDateOption(this, 'budget', 'Ultra Luxury (â‚¹50L+)')">Ultra Luxury (â‚¹50L+)</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-grid">
                                    <!-- Moved the rest of the form fields here -->
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn btn-secondary-solid" onclick="showScreen('overview')">Back</button>
                                    <button type="button" class="btn btn-outline-solid" onclick="saveWeddingData()">Save Draft</button>
                                    <button type="button" class="btn btn-primary-solid" onclick="saveAndContinue()">Save & Continue</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Style Preferences Screen -->
                <div id="preferences" class="screen">
                    <div class="preferences-container">
                        <div class="preferences-header">
                            <h2>Style & Design Preferences</h2>
                            <p>Let's create the perfect aesthetic for your special day</p>
                        </div>

                        <!-- Wedding Theme Section - Keep Original Design -->
                        <div class="preference-section">
                            <h3>ðŸŽ¨ Most Popular Wedding Themes</h3>
                            <div class="theme-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 20px 0;">
                                
                                <!-- Royal Palace Wedding -->
                                <div class="theme-card" data-theme="royal" onclick="selectTheme('royal')" style="position: relative; border-radius: 16px; overflow: hidden; cursor: pointer; transition: all 0.3s ease;">
                                    <img src="/css/royal-palace.jpg" alt="Royal Palace Wedding" style="width: 100%; height: 280px; object-fit: cover;">
                                    <div style="position: absolute; top: 15px; left: 15px; background: rgba(139, 75, 107, 0.9); color: white; padding: 6px 12px; border-radius: 20px; font-size: 11px; font-weight: 600;">ROYAL PALACE</div>
                                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; padding: 20px;">
                                        <h4 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 700;">Royal Palace Wedding</h4>
                                        <p style="margin: 0 0 12px 0; font-size: 14px; opacity: 0.9;">Rajasthani grandeur with palace venues</p>
                                        <div style="display: flex; gap: 8px; margin: 8px 0;">
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸ° Palace Venues</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸ˜ Royal Entries</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">âœ¨ Grandeur</span>
                                        </div>
                                        <div style="position: absolute; bottom: 15px; right: 15px; background: #8B4B6B; padding: 8px 16px; border-radius: 25px; font-weight: 700; font-size: 14px;">â‚¹30-70 Lakhs</div>
                                    </div>
                                </div>

                                <!-- Minimalist Pastel -->
                                <div class="theme-card" data-theme="minimalist" onclick="selectTheme('minimalist')" style="position: relative; border-radius: 16px; overflow: hidden; cursor: pointer; transition: all 0.3s ease;">
                                    <img src="/css/minimalist-pastel.jpg" alt="Minimalist Pastel Wedding" style="width: 100%; height: 280px; object-fit: cover;">
                                    <div style="position: absolute; top: 15px; left: 15px; background: rgba(139, 75, 107, 0.9); color: white; padding: 6px 12px; border-radius: 20px; font-size: 11px; font-weight: 600;">MINIMALIST PASTEL</div>
                                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; padding: 20px;">
                                        <h4 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 700;">Minimalist Pastel</h4>
                                        <p style="margin: 0 0 12px 0; font-size: 14px; opacity: 0.9;">Modern aesthetic with ivory and blush tones</p>
                                        <div style="display: flex; gap: 8px; margin: 8px 0;">
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸŽ¨ Ivory & Blush</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸ“¸ Modern</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸ’¡ Clean Lines</span>
                                        </div>
                                        <div style="position: absolute; bottom: 15px; right: 15px; background: #8B4B6B; padding: 8px 16px; border-radius: 25px; font-weight: 700; font-size: 14px;">â‚¹10-25 Lakhs</div>
                                    </div>
                                </div>

                                <!-- Boho Garden -->
                                <div class="theme-card" data-theme="boho" onclick="selectTheme('boho')" style="position: relative; border-radius: 16px; overflow: hidden; cursor: pointer; transition: all 0.3s ease;">
                                    <img src="/css/boho-garden.jpg" alt="Boho Garden Wedding" style="width: 100%; height: 280px; object-fit: cover;">
                                    <div style="position: absolute; top: 15px; left: 15px; background: rgba(139, 75, 107, 0.9); color: white; padding: 6px 12px; border-radius: 20px; font-size: 11px; font-weight: 600;">BOHO GARDEN</div>
                                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; padding: 20px;">
                                        <h4 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 700;">Boho Garden</h4>
                                        <p style="margin: 0 0 12px 0; font-size: 14px; opacity: 0.9;">Relaxed outdoor vibe with pampas grass</p>
                                        <div style="display: flex; gap: 8px; margin: 8px 0;">
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸŒ¾ Pampas Grass</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸŒ¸ Outdoor Vibe</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸŒ¿ Relaxed</span>
                                        </div>
                                        <div style="position: absolute; bottom: 15px; right: 15px; background: #8B4B6B; padding: 8px 16px; border-radius: 25px; font-weight: 700; font-size: 14px;">â‚¹8-20 Lakhs</div>
                                    </div>
                                </div>

                                <!-- South Indian Temple -->
                                <div class="theme-card" data-theme="south-indian" onclick="selectTheme('south-indian')" style="position: relative; border-radius: 16px; overflow: hidden; cursor: pointer; transition: all 0.3s ease;">
                                    <img src="/css/south-indian-temple.jpg" alt="South Indian Temple Wedding" style="width: 100%; height: 280px; object-fit: cover;">
                                    <div style="position: absolute; top: 15px; left: 15px; background: rgba(139, 75, 107, 0.9); color: white; padding: 6px 12px; border-radius: 20px; font-size: 11px; font-weight: 600;">SOUTH INDIAN TEMPLE</div>
                                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; padding: 20px;">
                                        <h4 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 700;">South Indian Temple</h4>
                                        <p style="margin: 0 0 12px 0; font-size: 14px; opacity: 0.9;">Traditional with jasmine garlands</p>
                                        <div style="display: flex; gap: 8px; margin: 8px 0;">
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸŒ¼ Jasmine Garlands</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸ›ï¸ Temple Style</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸ•‰ï¸ Traditional</span>
                                        </div>
                                        <div style="position: absolute; bottom: 15px; right: 15px; background: #8B4B6B; padding: 8px 16px; border-radius: 25px; font-weight: 700; font-size: 14px;">â‚¹15-40 Lakhs</div>
                                    </div>
                                </div>

                                <!-- Beach Destination -->
                                <div class="theme-card" data-theme="beach" onclick="selectTheme('beach')" style="position: relative; border-radius: 16px; overflow: hidden; cursor: pointer; transition: all 0.3s ease;">
                                    <img src="/css/beach-destination.jpg" alt="Beach Destination Wedding" style="width: 100%; height: 280px; object-fit: cover;">
                                    <div style="position: absolute; top: 15px; left: 15px; background: rgba(139, 75, 107, 0.9); color: white; padding: 6px 12px; border-radius: 20px; font-size: 11px; font-weight: 600;">BEACH DESTINATION</div>
                                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; padding: 20px;">
                                        <h4 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 700;">Beach Destination</h4>
                                        <p style="margin: 0 0 12px 0; font-size: 14px; opacity: 0.9;">Scenic tropical weddings</p>
                                        <div style="display: flex; gap: 8px; margin: 8px 0;">
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸ–ï¸ Tropical</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸŒ… Scenic</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸŒº Beach Vibes</span>
                                        </div>
                                        <div style="position: absolute; bottom: 15px; right: 15px; background: #8B4B6B; padding: 8px 16px; border-radius: 25px; font-weight: 700; font-size: 14px;">â‚¹20-45 Lakhs</div>
                                    </div>
                                </div>

                                <!-- Bollywood -->
                                <div class="theme-card" data-theme="bollywood" onclick="selectTheme('bollywood')" style="position: relative; border-radius: 16px; overflow: hidden; cursor: pointer; transition: all 0.3s ease;">
                                    <img src="/css/bollywood-sangeet.jpg" alt="Bollywood Wedding" style="width: 100%; height: 280px; object-fit: cover;">
                                    <div style="position: absolute; top: 15px; left: 15px; background: rgba(139, 75, 107, 0.9); color: white; padding: 6px 12px; border-radius: 20px; font-size: 11px; font-weight: 600;">BOLLYWOOD</div>
                                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; padding: 20px;">
                                        <h4 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 700;">Bollywood</h4>
                                        <p style="margin: 0 0 12px 0; font-size: 14px; opacity: 0.9;">High energy dance-filled celebrations</p>
                                        <div style="display: flex; gap: 8px; margin: 8px 0;">
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸŽ¬ High Energy</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸ’ƒ Dance-filled</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸŒŸ Celebrations</span>
                                        </div>
                                        <div style="position: absolute; bottom: 15px; right: 15px; background: #8B4B6B; padding: 8px 16px; border-radius: 25px; font-weight: 700; font-size: 14px;">â‚¹25-60 Lakhs</div>
                                    </div>
                                </div>

                                <!-- Traditional Cultural -->
                                <div class="theme-card" data-theme="traditional-cultural" onclick="selectTheme('traditional-cultural')" style="position: relative; border-radius: 16px; overflow: hidden; cursor: pointer; transition: all 0.3s ease;">
                                    <img src="/css/traditional-cultural.jpg" alt="Traditional Cultural Wedding" style="width: 100%; height: 280px; object-fit: cover;">
                                    <div style="position: absolute; top: 15px; left: 15px; background: rgba(139, 75, 107, 0.9); color: white; padding: 6px 12px; border-radius: 20px; font-size: 11px; font-weight: 600;">TRADITIONAL CULTURAL</div>
                                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; padding: 20px;">
                                        <h4 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 700;">Traditional Cultural</h4>
                                        <p style="margin: 0 0 12px 0; font-size: 14px; opacity: 0.9;">Heritage-focused regional celebrations</p>
                                        <div style="display: flex; gap: 8px; margin: 8px 0;">
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸº Heritage</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸŽ­ Regional</span>
                                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; font-size: 11px;">ðŸŒŸ Cultural</span>
                                        </div>
                                        <div style="position: absolute; bottom: 15px; right: 15px; background: #8B4B6B; padding: 8px 16px; border-radius: 25px; font-weight: 700; font-size: 14px;">â‚¹12-35 Lakhs</div>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <!-- Photography Style Section -->
                        <div class="preference-section">
                            <h3>ðŸ“¸ Photography Style</h3>
                            <div class="photography-grid">
                                <div class="photography-card" data-style="traditional" onclick="selectPhotography('traditional')">
                                    <div class="photo-icon">ðŸ“·</div>
                                    <h4>Traditional</h4>
                                    <p>Classic posed portraits and formal shots</p>
                                    <ul>
                                        <li>Formal family portraits</li>
                                        <li>Ceremony highlights</li>
                                        <li>Traditional compositions</li>
                                    </ul>
                                </div>
                                <div class="photography-card" data-style="candid" onclick="selectPhotography('candid')">
                                    <div class="photo-icon">ðŸ“¸</div>
                                    <h4>Candid</h4>
                                    <p>Natural moments and genuine emotions</p>
                                    <ul>
                                        <li>Spontaneous reactions</li>
                                        <li>Behind-the-scenes moments</li>
                                        <li>Natural interactions</li>
                                    </ul>
                                </div>
                                <div class="photography-card" data-style="artistic" onclick="selectPhotography('artistic')">
                                    <div class="photo-icon">ðŸŽ¨</div>
                                    <h4>Artistic</h4>
                                    <p>Creative angles and artistic composition</p>
                                    <ul>
                                        <li>Unique perspectives</li>
                                        <li>Creative lighting</li>
                                        <li>Artistic editing</li>
                                    </ul>
                                </div>
                                <div class="photography-card" data-style="documentary" onclick="selectPhotography('documentary')">
                                    <div class="photo-icon">ðŸ“°</div>
                                    <h4>Documentary</h4>
                                    <p>Storytelling through images</p>
                                    <ul>
                                        <li>Event storytelling</li>
                                        <li>Chronological coverage</li>
                                        <li>Minimal intervention</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Decor & Styling Section -->
                        <div class="preference-section">
                            <h3>ðŸ’ Decor & Styling <span class="multi-select-hint">(Select multiple)</span></h3>
                            <div class="decor-grid">
                                <div class="decor-category">
                                    <h4>ðŸŒ¸ Floral Style</h4>
                                    <div class="option-buttons multi-select" data-category="floral">
                                        <button class="option-btn multi" data-option="minimalist" onclick="selectMultiOption('floral', 'minimalist', this)">Minimalist</button>
                                        <button class="option-btn multi" data-option="lush" onclick="selectMultiOption('floral', 'lush', this)">Lush & Full</button>
                                        <button class="option-btn multi" data-option="wildflower" onclick="selectMultiOption('floral', 'wildflower', this)">Wildflower</button>
                                        <button class="option-btn multi" data-option="exotic" onclick="selectMultiOption('floral', 'exotic', this)">Exotic</button>
                                        <button class="option-btn multi" data-option="rose-garden" onclick="selectMultiOption('floral', 'rose-garden', this)">Rose Garden</button>
                                        <button class="option-btn multi" data-option="tropical" onclick="selectMultiOption('floral', 'tropical', this)">Tropical</button>
                                    </div>
                                </div>
                                <div class="decor-category">
                                    <h4>ðŸ’¡ Lighting</h4>
                                    <div class="option-buttons multi-select" data-category="lighting">
                                        <button class="option-btn multi" data-option="fairy-lights" onclick="selectMultiOption('lighting', 'fairy-lights', this)">Fairy Lights</button>
                                        <button class="option-btn multi" data-option="chandeliers" onclick="selectMultiOption('lighting', 'chandeliers', this)">Chandeliers</button>
                                        <button class="option-btn multi" data-option="candles" onclick="selectMultiOption('lighting', 'candles', this)">Candles</button>
                                        <button class="option-btn multi" data-option="uplighting" onclick="selectMultiOption('lighting', 'uplighting', this)">Uplighting</button>
                                        <button class="option-btn multi" data-option="string-lights" onclick="selectMultiOption('lighting', 'string-lights', this)">String Lights</button>
                                        <button class="option-btn multi" data-option="lanterns" onclick="selectMultiOption('lighting', 'lanterns', this)">Lanterns</button>
                                    </div>
                                </div>
                                <div class="decor-category">
                                    <h4>ðŸª‘ Furniture Style</h4>
                                    <div class="option-buttons multi-select" data-category="furniture">
                                        <button class="option-btn multi" data-option="modern" onclick="selectMultiOption('furniture', 'modern', this)">Modern</button>
                                        <button class="option-btn multi" data-option="vintage" onclick="selectMultiOption('furniture', 'vintage', this)">Vintage</button>
                                        <button class="option-btn multi" data-option="rustic" onclick="selectMultiOption('furniture', 'rustic', this)">Rustic</button>
                                        <button class="option-btn multi" data-option="elegant" onclick="selectMultiOption('furniture', 'elegant', this)">Elegant</button>
                                        <button class="option-btn multi" data-option="bohemian" onclick="selectMultiOption('furniture', 'bohemian', this)">Bohemian</button>
                                        <button class="option-btn multi" data-option="classic" onclick="selectMultiOption('furniture', 'classic', this)">Classic</button>
                                    </div>
                                </div>
                                <div class="decor-category">
                                    <h4>ðŸŽ¨ Color Themes</h4>
                                    <div class="option-buttons multi-select" data-category="colors">
                                        <button class="option-btn multi" data-option="blush-gold" onclick="selectMultiOption('colors', 'blush-gold', this)">Blush & Gold</button>
                                        <button class="option-btn multi" data-option="sage-cream" onclick="selectMultiOption('colors', 'sage-cream', this)">Sage & Cream</button>
                                        <button class="option-btn multi" data-option="burgundy-navy" onclick="selectMultiOption('colors', 'burgundy-navy', this)">Burgundy & Navy</button>
                                        <button class="option-btn multi" data-option="coral-peach" onclick="selectMultiOption('colors', 'coral-peach', this)">Coral & Peach</button>
                                        <button class="option-btn multi" data-option="emerald-gold" onclick="selectMultiOption('colors', 'emerald-gold', this)">Emerald & Gold</button>
                                        <button class="option-btn multi" data-option="dusty-blue" onclick="selectMultiOption('colors', 'dusty-blue', this)">Dusty Blue</button>
                                    </div>
                                </div>
                                <div class="decor-category">
                                    <h4>ðŸª‘ Furniture Style</h4>
                                    <div class="option-buttons">
                                        <button class="option-btn" data-option="classic" onclick="selectOption('furniture', 'classic')">Classic</button>
                                        <button class="option-btn" data-option="modern" onclick="selectOption('furniture', 'modern')">Modern</button>
                                        <button class="option-btn" data-option="vintage" onclick="selectOption('furniture', 'vintage')">Vintage</button>
                                        <button class="option-btn" data-option="boho" onclick="selectOption('furniture', 'boho')">Bohemian</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Venue Preferences Section -->
                        <div class="preference-section">
                            <h3>ðŸ›ï¸ Venue Preferences</h3>
                            <div class="venue-grid">
                                <div class="venue-card" data-venue="indoor" onclick="selectVenue('indoor')">
                                    <div class="venue-icon">ðŸ¢</div>
                                    <h4>Indoor</h4>
                                    <div class="venue-options">
                                        <span class="venue-tag">Banquet Hall</span>
                                        <span class="venue-tag">Hotel</span>
                                        <span class="venue-tag">Heritage Building</span>
                                    </div>
                                </div>
                                <div class="venue-card" data-venue="outdoor" onclick="selectVenue('outdoor')">
                                    <div class="venue-icon">ðŸŒ³</div>
                                    <h4>Outdoor</h4>
                                    <div class="venue-options">
                                        <span class="venue-tag">Garden</span>
                                        <span class="venue-tag">Beach</span>
                                        <span class="venue-tag">Rooftop</span>
                                    </div>
                                </div>
                                <div class="venue-card" data-venue="destination" onclick="selectVenue('destination')">
                                    <div class="venue-icon">ðŸï¸</div>
                                    <h4>Destination</h4>
                                    <div class="venue-options">
                                        <span class="venue-tag">Resort</span>
                                        <span class="venue-tag">Palace</span>
                                        <span class="venue-tag">Villa</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Decor & Styling Section -->
                        <div class="preference-section">
                            <h3>ðŸŒº Decor & Styling Preferences</h3>
                            <div class="decor-grid">
                                <div class="decor-card" data-decor="floral" onclick="selectDecor('floral')">
                                    <div class="decor-icon">ðŸŒ¸</div>
                                    <h4>Floral Paradise</h4>
                                    <p>Fresh flowers, botanical arrangements, garden vibes</p>
                                </div>
                                <div class="decor-card" data-decor="royal" onclick="selectDecor('royal')">
                                    <div class="decor-icon">ðŸ‘‘</div>
                                    <h4>Royal Grandeur</h4>
                                    <p>Gold accents, crystal chandeliers, luxurious fabrics</p>
                                </div>
                                <div class="decor-card" data-decor="minimalist" onclick="selectDecor('minimalist')">
                                    <div class="decor-icon">âœ¨</div>
                                    <h4>Minimalist Chic</h4>
                                    <p>Clean lines, neutral tones, elegant simplicity</p>
                                </div>
                                <div class="decor-card" data-decor="cultural" onclick="selectDecor('cultural')">
                                    <div class="decor-icon">ðŸª”</div>
                                    <h4>Cultural Traditional</h4>
                                    <p>Diyas, rangoli, marigolds, traditional motifs</p>
                                </div>
                            </div>
                        </div>

                        <!-- Cuisine & Catering Section -->
                        <div class="preference-section">
                            <h3>ðŸ½ï¸ Cuisine & Catering Style</h3>
                            <div class="cuisine-grid">
                                <div class="cuisine-card" data-cuisine="north-indian" onclick="selectCuisine('north-indian')">
                                    <div class="cuisine-icon">ðŸ«“</div>
                                    <h4>North Indian</h4>
                                    <p>Rich gravies, tandoor items, naan & rotis</p>
                                </div>
                                <div class="cuisine-card" data-cuisine="south-indian" onclick="selectCuisine('south-indian')">
                                    <div class="cuisine-icon">ðŸ¥¥</div>
                                    <h4>South Indian</h4>
                                    <p>Coconut-based curries, rice varieties, sambhar</p>
                                </div>
                                <div class="cuisine-card" data-cuisine="gujarati" onclick="selectCuisine('gujarati')">
                                    <div class="cuisine-icon">ðŸ¯</div>
                                    <h4>Gujarati</h4>
                                    <p>Sweet & savory, thali style, dhokla & fafda</p>
                                </div>
                                <div class="cuisine-card" data-cuisine="multi-cuisine" onclick="selectCuisine('multi-cuisine')">
                                    <div class="cuisine-icon">ðŸŒ</div>
                                    <h4>Multi-Cuisine</h4>
                                    <p>Indian, Continental, Chinese & Italian</p>
                                </div>
                            </div>
                        </div>

                        <!-- Music & Entertainment Section -->
                        <div class="preference-section">
                            <h3>ðŸŽµ Music & Entertainment</h3>
                            <div class="music-grid">
                                <div class="music-category">
                                    <h4>Music Style</h4>
                                    <div class="music-options">
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="music" value="classical"> Classical
                                        </label>
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="music" value="bollywood"> Bollywood
                                        </label>
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="music" value="folk"> Folk/Traditional
                                        </label>
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="music" value="contemporary"> Contemporary
                                        </label>
                                    </div>
                                </div>
                                <div class="music-category">
                                    <h4>Entertainment</h4>
                                    <div class="music-options">
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="entertainment" value="dj"> DJ
                                        </label>
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="entertainment" value="live-band"> Live Band
                                        </label>
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="entertainment" value="cultural"> Cultural Performances
                                        </label>
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="entertainment" value="games"> Interactive Games
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Selected Preferences Summary -->
                        <div class="preference-section">
                            <h3>ðŸ“‹ Your Selections</h3>
                            <div class="preferences-summary">
                                <div class="summary-item">
                                    <strong>ðŸŽ­ Theme:</strong> <span id="selected-theme">Not selected</span>
                                </div>
                                <div class="summary-item">
                                    <strong>ðŸŒº Decor Style:</strong> <span id="selected-decor">Not selected</span>
                                </div>
                                <div class="summary-item">
                                    <strong>ðŸ½ï¸ Cuisine:</strong> <span id="selected-cuisine">Not selected</span>
                                </div>

                                <div class="summary-item">
                                    <strong>ðŸ“¸ Photography:</strong> <span id="selected-photography">Not selected</span>
                                </div>
                                <div class="summary-item">
                                    <strong>ðŸ›ï¸ Venue:</strong> <span id="selected-venue">Not selected</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions preferences-actions">
                            <button type="button" class="btn btn-secondary-solid" onclick="showScreen('couple-form')">Back</button>
                            <button type="button" class="btn btn-outline-solid" onclick="testPreferences()">ðŸ§ª Test Themes</button>
                            <button type="button" class="btn btn-primary-solid" onclick="savePreferences()">Save Preferences</button>
                        </div>
                    </div>
                </div>

                <!-- Vendors Screen -->
                <div id="vendors" class="screen">
                    <div class="form-section">
                        <h2>ðŸª Vendor Discovery</h2>
                        <p>Find and connect with the best vendors for your wedding</p>
                        
                        <div class="vendor-categories">
                            <div class="category-grid">
                                <div class="category-card" onclick="searchVendors('venues')">
                                    <span class="category-icon">ðŸ›ï¸</span>
                                    <span class="category-name">Venues</span>
                                </div>
                                <div class="category-card" onclick="searchVendors('photography')">
                                    <span class="category-icon">ðŸ“¸</span>
                                    <span class="category-name">Photography</span>
                                </div>
                                <div class="category-card" onclick="searchVendors('catering')">
                                    <span class="category-icon">ðŸ½ï¸</span>
                                    <span class="category-name">Catering</span>
                                </div>
                                <div class="category-card" onclick="searchVendors('decor')">
                                    <span class="category-icon">ðŸŽ¨</span>
                                    <span class="category-name">Decor</span>
                                </div>
                                <div class="category-card" onclick="searchVendors('beauty')">
                                    <span class="category-icon">ðŸ’„</span>
                                    <span class="category-name">Beauty</span>
                                </div>
                                <div class="category-card" onclick="searchVendors('entertainment')">
                                    <span class="category-icon">ðŸŽµ</span>
                                    <span class="category-name">Entertainment</span>
                                </div>
                            </div>
                        </div>

                        <div class="search-controls">
                            <select id="vendor-city" class="form-select">
                                <option value="bangalore">Bangalore</option>
                                <option value="mumbai">Mumbai</option>
                                <option value="delhi">Delhi</option>
                                <option value="pune">Pune</option>
                                <option value="hyderabad">Hyderabad</option>
                                <option value="chennai">Chennai</option>
                            </select>
                            <button class="btn btn-primary-solid" onclick="searchVendors()">
                                ðŸ” Search Vendors
                            </button>
                        </div>

                        <div id="vendor-results" class="vendor-results">
                            <p class="text-center">Select a category and location to find vendors</p>
                        </div>
                    </div>
                </div>

                <!-- Other Screens (Placeholder) -->

                <div id="budget" class="screen">
                    <div class="budget-container">
                        <!-- Budget Overview Card -->
                        <div class="budget-overview-card">
                            <div class="budget-header">
                                <div class="budget-title">
                                    <h2>Wedding Budget Overview</h2>
                                    <div class="budget-actions">
                                        <button class="action-btn" onclick="downloadBudgetReport()">
                                            <span class="icon">ðŸ“Š</span> Export Report
                                        </button>
                                        <button class="action-btn" onclick="showCollaborators()">
                                            <span class="icon">ðŸ‘¥</span> Share
                                        </button>
                                    </div>
                                </div>
                                <div class="total-budget">
                                    <div class="budget-info">
                                        <span class="budget-label">Total Budget:</span>
                                        <span class="budget-amount" id="total-budget-display">â‚¹0</span>
                                    </div>
                                    <button class="edit-budget-btn" onclick="editTotalBudget()">Edit</button>
                                    <button class="smart-allocation-btn" onclick="triggerIntelligentAllocation()" style="margin-left: 10px; padding: 8px 15px; background: #8B4B6B; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 12px;">ðŸª Regenerate Budget</button>
                                </div>
                            </div>
                            <div class="budget-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="budget-progress-fill"></div>
                                </div>
                                <div class="budget-stats">
                                    <div class="stat">
                                        <span class="stat-label">Allocated</span>
                                        <span class="stat-value" id="allocated-amount">â‚¹0</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-label">Remaining</span>
                                        <span class="stat-value" id="remaining-amount">â‚¹0</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-label">Contingency</span>
                                        <span class="stat-value" id="contingency-amount">â‚¹0</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Budget Categories -->
                        <div class="budget-categories">
                            <div class="categories-header">
                                <h3>Budget Allocation</h3>
                                <div class="view-toggle">
                                    <button class="toggle-btn active" onclick="toggleView('grid')">Grid</button>
                                    <button class="toggle-btn" onclick="toggleView('list')">List</button>
                                </div>
                            </div>
                            
                            <div class="category-grid" id="budget-categories-grid">
                                <!-- Venue & Space -->
                                <div class="budget-category-card" data-category="venue">
                                    <div class="category-header">
                                        <span class="category-icon">ðŸ°</span>
                                        <h3>Venue & Space</h3>
                                        <span class="percentage">30%</span>
                                    </div>
                                    <div class="category-amount">
                                        <input type="number" class="amount-input" placeholder="Enter amount" onchange="updateCategoryAmount('venue', this.value)">
                                    </div>
                                    <div class="category-progress">
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 30%"></div>
                                        </div>
                                    </div>
                                    <div class="subcategories">
                                        <span class="subcategory">Ceremony Venue</span>
                                        <span class="subcategory">Reception Hall</span>
                                        <span class="subcategory">Outdoor Space</span>
                                    </div>
                                    <div class="category-actions">
                                        <button class="action-btn" onclick="showCategoryDetails('venue')">
                                            <span class="icon">ðŸ“‹</span> Details
                                        </button>
                                        <button class="action-btn" onclick="showVendorSuggestions('venue')">
                                            <span class="icon">ðŸ’¡</span> Suggestions
                                        </button>
                                    </div>
                                </div>

                                <!-- Catering & Food -->
                                <div class="budget-category-card" data-category="catering">
                                    <div class="category-header">
                                        <span class="category-icon">ðŸ½ï¸</span>
                                        <h3>Catering & Food</h3>
                                        <span class="percentage">25%</span>
                                    </div>
                                    <div class="category-amount">
                                        <input type="number" class="amount-input" placeholder="Enter amount" onchange="updateCategoryAmount('catering', this.value)">
                                    </div>
                                    <div class="category-progress">
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 25%"></div>
                                        </div>
                                    </div>
                                    <div class="subcategories">
                                        <span class="subcategory">Main Course</span>
                                        <span class="subcategory">Appetizers</span>
                                        <span class="subcategory">Desserts</span>
                                        <span class="subcategory">Bar Service</span>
                                    </div>
                                    <div class="category-actions">
                                        <button class="action-btn" onclick="showCategoryDetails('catering')">
                                            <span class="icon">ðŸ“‹</span> Details
                                        </button>
                                        <button class="action-btn" onclick="showVendorSuggestions('catering')">
                                            <span class="icon">ðŸ’¡</span> Suggestions
                                        </button>
                                    </div>
                                </div>

                                <!-- Decor & Design -->
                                <div class="budget-category-card" data-category="decor">
                                    <div class="category-header">
                                        <span class="category-icon">ðŸ’</span>
                                        <h3>Decor & Design</h3>
                                        <span class="percentage">15%</span>
                                    </div>
                                    <div class="category-amount">
                                        <input type="number" class="amount-input" placeholder="Enter amount" onchange="updateCategoryAmount('decor', this.value)">
                                    </div>
                                    <div class="category-progress">
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 15%"></div>
                                        </div>
                                    </div>
                                    <div class="subcategories">
                                        <span class="subcategory">Flowers</span>
                                        <span class="subcategory">Lighting</span>
                                        <span class="subcategory">Stage Design</span>
                                        <span class="subcategory">Table Settings</span>
                                    </div>
                                    <div class="category-actions">
                                        <button class="action-btn" onclick="showCategoryDetails('decor')">
                                            <span class="icon">ðŸ“‹</span> Details
                                        </button>
                                        <button class="action-btn" onclick="showVendorSuggestions('decor')">
                                            <span class="icon">ðŸ’¡</span> Suggestions
                                        </button>
                                    </div>
                                </div>

                                <!-- Photography & Video -->
                                <div class="budget-category-card" data-category="photography">
                                    <div class="category-header">
                                        <span class="category-icon">ðŸ“¸</span>
                                        <h3>Photography & Video</h3>
                                        <span class="percentage">10%</span>
                                    </div>
                                    <div class="category-amount">
                                        <input type="number" class="amount-input" placeholder="Enter amount" onchange="updateCategoryAmount('photography', this.value)">
                                    </div>
                                    <div class="category-progress">
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 10%"></div>
                                        </div>
                                    </div>
                                    <div class="subcategories">
                                        <span class="subcategory">Photography</span>
                                        <span class="subcategory">Videography</span>
                                        <span class="subcategory">Drone Shots</span>
                                        <span class="subcategory">Albums</span>
                                    </div>
                                    <div class="category-actions">
                                        <button class="action-btn" onclick="showCategoryDetails('photography')">
                                            <span class="icon">ðŸ“‹</span> Details
                                        </button>
                                        <button class="action-btn" onclick="showVendorSuggestions('photography')">
                                            <span class="icon">ðŸ’¡</span> Suggestions
                                        </button>
                                    </div>
                                </div>

                                <!-- Attire & Accessories -->
                                <div class="budget-category-card" data-category="attire">
                                    <div class="category-header">
                                        <span class="category-icon">ðŸ‘—</span>
                                        <h3>Attire & Accessories</h3>
                                        <span class="percentage">10%</span>
                                    </div>
                                    <div class="category-amount">
                                        <input type="number" class="amount-input" placeholder="Enter amount" onchange="updateCategoryAmount('attire', this.value)">
                                    </div>
                                    <div class="category-progress">
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 10%"></div>
                                        </div>
                                    </div>
                                    <div class="subcategories">
                                        <span class="subcategory">Bridal Wear</span>
                                        <span class="subcategory">Groom Wear</span>
                                        <span class="subcategory">Jewelry</span>
                                        <span class="subcategory">Accessories</span>
                                    </div>
                                    <div class="category-actions">
                                        <button class="action-btn" onclick="showCategoryDetails('attire')">
                                            <span class="icon">ðŸ“‹</span> Details
                                        </button>
                                        <button class="action-btn" onclick="showVendorSuggestions('attire')">
                                            <span class="icon">ðŸ’¡</span> Suggestions
                                        </button>
                                    </div>
                                </div>

                                <!-- Entertainment -->
                                <div class="budget-category-card" data-category="entertainment">
                                    <div class="category-header">
                                        <span class="category-icon">ðŸŽµ</span>
                                        <h3>Entertainment</h3>
                                        <span class="percentage">5%</span>
                                    </div>
                                    <div class="category-amount">
                                        <input type="number" class="amount-input" placeholder="Enter amount" onchange="updateCategoryAmount('entertainment', this.value)">
                                    </div>
                                    <div class="category-progress">
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 5%"></div>
                                        </div>
                                    </div>
                                    <div class="subcategories">
                                        <span class="subcategory">Music Band</span>
                                        <span class="subcategory">DJ</span>
                                        <span class="subcategory">Performers</span>
                                    </div>
                                    <div class="category-actions">
                                        <button class="action-btn" onclick="showCategoryDetails('entertainment')">
                                            <span class="icon">ðŸ“‹</span> Details
                                        </button>
                                        <button class="action-btn" onclick="showVendorSuggestions('entertainment')">
                                            <span class="icon">ðŸ’¡</span> Suggestions
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Budget Insights -->
                        <div class="budget-insights">
                            <div class="insights-header">
                                <h3>ðŸ’¡ Smart Budget Insights</h3>
                                <button class="refresh-btn" onclick="refreshInsights()">
                                    <span class="icon">ðŸ”„</span> Refresh
                                </button>
                            </div>
                            <div class="insights-grid" id="budget-insights">
                                <!-- Cost Optimization Card -->
                                <div class="insight-card optimization">
                                    <h4>Cost Optimization</h4>
                                    <ul class="optimization-tips">
                                        <li>Consider weekday venue booking for 20% savings</li>
                                        <li>Bundle photography & videography services</li>
                                        <li>Off-season decor packages available</li>
                                    </ul>
                                </div>
                                
                                <!-- Alerts Card -->
                                <div class="insight-card alerts">
                                    <h4>Budget Alerts</h4>
                                    <ul class="alert-list">
                                        <li class="alert warning">Decor budget nearing limit</li>
                                        <li class="alert info">Catering deposit due in 7 days</li>
                                    </ul>
                                </div>
                                
                                <!-- Recommendations Card -->
                                <div class="insight-card recommendations">
                                    <h4>Smart Recommendations</h4>
                                    <ul class="recommendation-list">
                                        <li>Trending: Farm-to-table catering options</li>
                                        <li>Popular: LED wall backdrops for photos</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Payment Timeline -->
                        <div class="payment-timeline">
                            <div class="timeline-header">
                                <h3>ðŸ“… Payment Schedule</h3>
                                <button class="calendar-btn" onclick="syncToCalendar()">
                                    <span class="icon">ðŸ“±</span> Sync to Calendar
                                </button>
                            </div>
                            <div class="timeline-grid">
                                <!-- Timeline items will be populated dynamically -->
                            </div>
                        </div>
                    </div>
                </div>

                <div id="timeline" class="screen">
                    <div class="form-section">
                        <h2>Wedding Timeline</h2>
                        <p>Timeline planning interface coming soon...</p>
                    </div>
                </div>

                <div id="guest-list" class="screen">
                    <div class="form-section">
                        <h2>Guest List Management</h2>
                        <p>Guest list tools coming soon...</p>
                    </div>
                </div>

                <div id="checklist" class="screen">
                    <div class="form-section">
                        <h2>Wedding Checklist</h2>
                        <p>Wedding checklist coming soon...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Copilot Integration -->
    <script src="/js/ai-copilot.js"></script>
    
    <script>
        // Global variables
        let weddingData = JSON.parse(localStorage.getItem('vivaha_wedding_data')) || {};
        let preferencesData = JSON.parse(localStorage.getItem('vivaha_preferences')) || {};
        const API_BASE = 'http://localhost:8000';  // AI Agent Service

        // Page titles mapping
        const pageTitles = {
            'overview': 'Overview',
            'couple-form': 'Couple Details',
            'preferences': 'Style & Design',
            'vendors': 'Vendors',
            'budget': 'Budget',
            'timeline': 'Timeline',
            'guest-list': 'Guest List',
            'checklist': 'Checklist'
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸŽ¯ Vivaha AI - Initializing...');
            loadSavedData();
            updateProgress();
            updateStats();
            checkAPIConnection();
        });

        // Navigation
        function showScreen(screenId) {
            console.log('ðŸ“± Switching to screen:', screenId);
            
            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Show target screen
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.classList.add('active');
                console.log('âœ… Successfully switched to screen:', screenId);
                
                // Special handling for preferences screen
                if (screenId === 'preferences') {
                    console.log('ðŸŽ¨ Loading preferences screen with beautiful themes');
                    // Force re-render of theme cards if needed
                    setTimeout(() => {
                        const themeCards = document.querySelectorAll('.theme-card');
                        const decorCards = document.querySelectorAll('.decor-card');
                        const cuisineCards = document.querySelectorAll('.cuisine-card');
                        console.log('ðŸŽ­ Found', themeCards.length, 'theme cards');
                        console.log('ðŸŒº Found', decorCards.length, 'decor cards');
                        console.log('ðŸ½ï¸ Found', cuisineCards.length, 'cuisine cards');
                    }, 100);
                }
            } else {
                console.error('âŒ Screen not found:', screenId);
            }
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update page title
            document.getElementById('page-title').textContent = pageTitles[screenId] || 'Vivaha AI';

            // Load specific screen data
            if (screenId === 'vendors') {
                loadVendors();
            }
        }

        // API Functions
        async function checkAPIConnection() {
            try {
                const response = await fetch(`${API_BASE}/api/health`);
                const data = await response.json();
                
                if (data.status === 'healthy') {
                    updateStatus('Connected', 'green');
                    console.log('âœ… API Connected');
                } else {
                    updateStatus('API Issues', 'orange');
                }
            } catch (error) {
                console.log('âŒ API Offline');
                updateStatus('Offline', 'red');
            }
        }

        async function testAPI() {
            console.log('ðŸ§ª Testing API connection...');
            try {
                const response = await fetch(`${API_BASE}/api/couples`);
                const data = await response.json();
                alert(`API Test Result:\nStatus: Success\nCouples in database: ${data.data ? data.data.length : 0}`);
            } catch (error) {
                alert(`API Test Result:\nStatus: Failed\nError: ${error.message}`);
            }
        }

        function selectDateOption(element, category, value) {
            // Remove selection from other buttons in same category
            document.querySelectorAll(`[data-category="${category}"]`).forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Add selection to clicked button
            element.classList.add('selected');
            
            // Update weddingData object
            if (!weddingData.datePreferences) {
                weddingData.datePreferences = {};
            }
            weddingData.datePreferences[category] = value;
            
            // Save to localStorage
            localStorage.setItem('vivaha_wedding_data', JSON.stringify(weddingData));
        }

        async function saveWeddingData() {
            const partner1Element = document.getElementById('partner1');
            const partner2Element = document.getElementById('partner2');
            const weddingDateElement = document.getElementById('weddingDate');
            const weddingCityElement = document.getElementById('weddingCity');
            const weddingDaysElement = document.getElementById('weddingDays');
            
            if (!partner1Element || !partner2Element || !weddingDateElement || !weddingCityElement) {
                alert('âš ï¸ Form elements not found. Please refresh the page.');
                return;
            }
            
            const formData = {
                partner1Name: partner1Element.value,
                partner2Name: partner2Element.value,
                weddingDate: weddingDateElement.value,
                region: weddingCityElement.value,
                weddingDays: weddingDaysElement ? weddingDaysElement.value : '1',
                datePreferences: weddingData.datePreferences || {}
            };

            // Validate required fields
            if (!formData.partner1Name || !formData.partner2Name) {
                alert('âš ï¸ Please enter both partner names');
                return;
            }

            // Save locally first
            weddingData = formData;
            localStorage.setItem('vivaha_wedding_data', JSON.stringify(weddingData));
            
            // Show loading state
            const saveButton = document.querySelector('button[onclick="saveWeddingData()"]');
            if (saveButton) {
                saveButton.textContent = 'Saving...';
                saveButton.disabled = true;
            }
            
            try {
                // Save to server
                const aiFormData = {
                    yourName: formData.partner1Name,
                    partnerName: formData.partner2Name,
                    weddingDate: formData.weddingDate,
                    city: formData.region,
                    budget: formData.datePreferences.budget || "Premium (â‚¹15-30L)",
                    guestCount: formData.datePreferences.guestCount || "Medium (100-300)",
                    weddingType: "Traditional Hindu",
                    duration: formData.weddingDays + " days",
                    events: ["Wedding", "Reception"],
                    priorities: ["Photography", "Venue"],
                    specialRequirements: "",
                    location: currentUserLocation,
                    dateFlexibility: formData.datePreferences.dateFlexibility,
                    season: formData.datePreferences.season,
                    weddingDays: parseInt(formData.weddingDays) || 1
                };

                const response = await fetch(`${API_BASE}/api/wedding-data`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(aiFormData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        alert('âœ… Wedding data saved successfully!\nðŸ’° Ready for budget planning\nðŸ” Vendor discovery available');
                        updateStatus('Data saved successfully', 'green');
                        updateCoupleDisplay(formData);
                        updateProgress();
                        showScreen('preferences');
                    } else {
                        throw new Error(result.error || 'Failed to save data');
                    }
                } else {
                    throw new Error(`Server error: ${response.status}`);
                }
                
            } catch (error) {
                console.error('Error saving to server:', error);
                alert('ðŸ’¾ Saved locally, but couldn\'t sync to server.\nData will sync when connection is restored.');
                updateStatus('Saved locally only', 'orange');
                updateCoupleDisplay(formData);
                updateProgress();
                showScreen('preferences');
            } finally {
                // Reset button state
                if (saveButton) {
                    saveButton.textContent = 'Save & Continue';
                    saveButton.disabled = false;
                }
            }
        }

        function testPreferences() {
            console.log('ðŸ§ª Testing preferences screen...');
            
            // Count theme cards
            const themeCards = document.querySelectorAll('.theme-card');
            const decorCards = document.querySelectorAll('.decor-card');
            const cuisineCards = document.querySelectorAll('.cuisine-card');
            
            console.log('ðŸŽ­ Theme cards found:', themeCards.length);
            console.log('ðŸŒº Decor cards found:', decorCards.length);
            console.log('ðŸ½ï¸ Cuisine cards found:', cuisineCards.length);
            
            // Test theme selection
            if (themeCards.length > 0) {
                console.log('âœ… Testing theme selection...');
                selectTheme('royal');
                setTimeout(() => {
                    const selectedCard = document.querySelector('.theme-card.selected');
                    if (selectedCard) {
                        console.log('âœ… Theme selection working!');
                        alert('ðŸŽ‰ Preferences screen is working!\n\nðŸŽ­ Found ' + themeCards.length + ' theme cards\nðŸŒº Found ' + decorCards.length + ' decor cards\nðŸ½ï¸ Found ' + cuisineCards.length + ' cuisine cards\n\nâœ… Theme selection is functional!');
                    } else {
                        console.log('âŒ Theme selection not working');
                        alert('âš ï¸ Theme selection not working properly');
                    }
                }, 500);
            } else {
                alert('âŒ No theme cards found!\nPlease check the HTML structure.');
            }
        }

        async function saveAndContinue() {
            // Validate required fields
            const partner1 = document.getElementById('partner1').value.trim();
            const partner2 = document.getElementById('partner2').value.trim();
            const weddingCity = document.getElementById('weddingCity').value.trim();
            
            if (!partner1 || !partner2 || !weddingCity) {
                alert('âš ï¸ Please fill in all required fields:\nâ€¢ Partner 1 Name\nâ€¢ Partner 2 Name\nâ€¢ Wedding City');
                return;
            }
            
            // Show loading state
            const continueBtn = event.target;
            const originalText = continueBtn.textContent;
            continueBtn.textContent = 'Saving...';
            continueBtn.disabled = true;
            
            try {
                // Save the data
                await saveWeddingData();
                
                // Show success message
                alert('âœ… Wedding details saved successfully!\nðŸŽ¨ Let\'s choose your style preferences next.');
                
                // Navigate to preferences screen
                showScreen('preferences');
                
            } catch (error) {
                console.error('Error saving data:', error);
                alert('âš ï¸ Error saving data. Please try again.');
            } finally {
                // Reset button state
                continueBtn.textContent = originalText;
                continueBtn.disabled = false;
            }
        }

        // Enhanced Preferences Functions
        let selectedPreferences = {
            theme: null,
            decor: null,
            cuisine: null,
            photography: null,
            venue: null,
            floral: [],
            lighting: [],
            furniture: [],
            colors: [],
            music: [],
            entertainment: []
        };

        function selectTheme(theme) {
            // Remove previous selection
            document.querySelectorAll('.theme-card').forEach(card => card.classList.remove('selected'));
            
            // Add selection to clicked card
            const selectedCard = document.querySelector(`[data-theme="${theme}"]`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
                selectedCard.style.transform = 'translateY(-8px)';
                selectedCard.style.boxShadow = '0 12px 40px rgba(139, 75, 107, 0.3)';
                selectedCard.style.border = '3px solid #8B4B6B';
            }
            
            // Update selection
            selectedPreferences.theme = theme;
            updatePreferencesSummary();
        }

        function selectDecor(decor) {
            // Remove previous selection
            document.querySelectorAll('.decor-card').forEach(card => card.classList.remove('selected'));
            
            // Add selection to clicked card
            document.querySelector(`[data-decor="${decor}"]`).classList.add('selected');
            
            // Update selection
            selectedPreferences.decor = decor;
            updatePreferencesSummary();
        }

        function selectCuisine(cuisine) {
            // Remove previous selection
            document.querySelectorAll('.cuisine-card').forEach(card => card.classList.remove('selected'));
            
            // Add selection to clicked card
            document.querySelector(`[data-cuisine="${cuisine}"]`).classList.add('selected');
            
            // Update selection
            selectedPreferences.cuisine = cuisine;
            updatePreferencesSummary();
        }



        function selectPhotography(style) {
            // Remove previous selection
            document.querySelectorAll('.photography-card').forEach(card => card.classList.remove('selected'));
            
            // Add selection to clicked card
            document.querySelector(`[data-style="${style}"]`).classList.add('selected');
            
            // Update selection
            selectedPreferences.photography = style;
            updatePreferencesSummary();
        }

        function selectOption(category, option) {
            // Remove previous selection in category
            document.querySelectorAll(`[onclick*="${category}"]`).forEach(btn => btn.classList.remove('selected'));
            
            // Add selection to clicked button
            event.target.classList.add('selected');
            
            // Update selection
            selectedPreferences[category] = option;
            updatePreferencesSummary();
        }

        function selectVenue(venue) {
            // Remove previous selection
            document.querySelectorAll('.venue-card').forEach(card => card.classList.remove('selected'));
            
            // Add selection to clicked card
            document.querySelector(`[data-venue="${venue}"]`).classList.add('selected');
            
            // Update selection
            selectedPreferences.venue = venue;
            updatePreferencesSummary();
        }

        function updatePreferencesSummary() {
            document.getElementById('selected-theme').textContent = 
                selectedPreferences.theme ? selectedPreferences.theme.charAt(0).toUpperCase() + selectedPreferences.theme.slice(1) : 'Not selected';
            
            document.getElementById('selected-photography').textContent = 
                selectedPreferences.photography ? selectedPreferences.photography.charAt(0).toUpperCase() + selectedPreferences.photography.slice(1) : 'Not selected';
            
            document.getElementById('selected-venue').textContent = 
                selectedPreferences.venue ? selectedPreferences.venue.charAt(0).toUpperCase() + selectedPreferences.venue.slice(1) : 'Not selected';

            // Update decor summary if element exists
            const decorElement = document.getElementById('selected-decor');
            if (decorElement) {
                decorElement.textContent = selectedPreferences.decor ? 
                    selectedPreferences.decor.charAt(0).toUpperCase() + selectedPreferences.decor.slice(1) : 'Not selected';
            }

            // Update cuisine summary if element exists
            const cuisineElement = document.getElementById('selected-cuisine');
            if (cuisineElement) {
                cuisineElement.textContent = selectedPreferences.cuisine ? 
                    selectedPreferences.cuisine.charAt(0).toUpperCase() + selectedPreferences.cuisine.slice(1) : 'Not selected';
            }
        }



        function selectMultiOption(category, option, element) {
            // Toggle the button selection
            element.classList.toggle('selected');
            
            // Initialize array if not exists
            if (!selectedPreferences[category]) {
                selectedPreferences[category] = [];
            }
            
            // Add or remove from selection
            const index = selectedPreferences[category].indexOf(option);
            if (index > -1) {
                selectedPreferences[category].splice(index, 1);
            } else {
                selectedPreferences[category].push(option);
            }
            
            // Update display
            updatePreferencesDisplay();
        }

        function collectMusicPreferences() {
            const musicChecked = Array.from(document.querySelectorAll('input[name="music"]:checked'))
                .map(input => input.value);
            const entertainmentChecked = Array.from(document.querySelectorAll('input[name="entertainment"]:checked'))
                .map(input => input.value);
            
            selectedPreferences.music = musicChecked;
            selectedPreferences.entertainment = entertainmentChecked;
        }

        async function savePreferences() {
            // Collect all current selections
            collectMusicPreferences();
            
            const prefsData = {
                // Enhanced preferences data
                weddingTheme: selectedPreferences.theme,
                photographyStyle: selectedPreferences.photography,
                venueType: selectedPreferences.venue,
                decorStyle: selectedPreferences.decor,
                cuisineStyle: selectedPreferences.cuisine,
                floralStyle: selectedPreferences.floral,
                lightingStyle: selectedPreferences.lighting,
                furnitureStyle: selectedPreferences.furniture,
                musicPreferences: selectedPreferences.music,
                entertainmentPreferences: selectedPreferences.entertainment,
                
                // Legacy fields for compatibility
                decorationTheme: selectedPreferences.theme,
                venuePreference: selectedPreferences.venue
            };

            // Save locally
            preferencesData = prefsData;
            localStorage.setItem('vivaha_preferences', JSON.stringify(preferencesData));
            
            // Save to API
            try {
                const response = await fetch(`${API_BASE}/api/visual-preferences`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(prefsData)
                });
                
                if (response.ok) {
                    // Create confetti effect
                    createConfetti();
                    
                    // Show success message with details
                    const selectedCount = Object.values(selectedPreferences).filter(v => 
                        v && (Array.isArray(v) ? v.length > 0 : true)
                    ).length;
                    
                    alert(`âœ… Preferences saved successfully!\n\nðŸŽ¨ You've selected ${selectedCount} style preferences\nðŸ’¡ Ready to find matching vendors!`);
                    updateProgress();
                    showScreen('vendors');
                } else {
                    alert('âš ï¸ Saved locally, but API sync failed');
                }
            } catch (error) {
                alert('ðŸ’¾ Saved locally only (API offline)');
            }
        }

        function createConfetti() {
            // Simple confetti effect for successful save
            const colors = ['#8B4B6B', '#4A1B2E', '#F59E0B', '#EF4444', '#8B4B6B'];
            const confettiCount = 50;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'fixed';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = '-10px';
                confetti.style.zIndex = '10000';
                confetti.style.pointerEvents = 'none';
                confetti.style.animation = `confetti-fall ${Math.random() * 2 + 1}s linear forwards`;
                
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        // Add CSS for confetti animation
        if (!document.querySelector('#confetti-styles')) {
            const style = document.createElement('style');
            style.id = 'confetti-styles';
            style.textContent = `
                @keyframes confetti-fall {
                    to {
                        transform: translateY(100vh) rotate(360deg);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
        }

        // Add event listener for custom color input
        document.addEventListener('DOMContentLoaded', function() {

        });

        async function saveProgress() {
            try {
                await saveWeddingData();
                await savePreferences();
                alert('ðŸ’¾ All progress saved!');
            } catch (error) {
                console.log('Error saving progress:', error);
            }
        }

        async function loadVendors() {
            try {
                const response = await fetch(`${API_BASE}/api/vendors`);
                const data = await response.json();
                
                const vendorsList = document.getElementById('vendors-list');
                if (data.data && data.data.length > 0) {
                    vendorsList.innerHTML = data.data.map(vendor => `
                        <div class="form-section" style="margin-bottom: 20px;">
                            <h3>${vendor['Vendor Name'] || 'Unknown Vendor'}</h3>
                            <p><strong>Type:</strong> ${vendor['Vendor Type'] || 'N/A'}</p>
                            <p><strong>Location:</strong> ${vendor['Service Location'] || 'N/A'}</p>
                            <p><strong>Contact:</strong> ${vendor['Contact Email'] || vendor['Contact Phone'] || 'N/A'}</p>
                        </div>
                    `).join('');
                } else {
                    vendorsList.innerHTML = '<p>No vendors found. Please check API connection.</p>';
                }
            } catch (error) {
                document.getElementById('vendors-list').innerHTML = '<p>Error loading vendors. API might be offline.</p>';
            }
        }

        // Helper Functions
        function loadSavedData() {
            // Load wedding data
            if (weddingData.partner1Name) {
                const partner1 = document.getElementById('partner1');
                const partner2 = document.getElementById('partner2');
                const weddingDate = document.getElementById('weddingDate');
                const weddingCity = document.getElementById('weddingCity');
                const guestCount = document.getElementById('guestCount');
                const budget = document.getElementById('budget');
                
                if (partner1) partner1.value = weddingData.partner1Name;
                if (partner2) partner2.value = weddingData.partner2Name;
                if (weddingDate) weddingDate.value = weddingData.weddingDate;
                if (weddingCity) weddingCity.value = weddingData.region;
                if (guestCount) guestCount.value = weddingData.guestCount;
                if (budget) budget.value = weddingData.budgetRange;
            }
            
            // Load preferences
            if (preferencesData.decorationTheme) {
                const theme = document.getElementById('theme');
                const colors = document.getElementById('colors');
                const photography = document.getElementById('photography');
                const venueType = document.getElementById('venue-type');
                
                if (theme) theme.value = preferencesData.decorationTheme;
                if (colors) colors.value = preferencesData.colorScheme;
                if (photography) photography.value = preferencesData.photographyStyle;
                if (venueType) venueType.value = preferencesData.venueType;
            }
        }

        function updateProgress() {
            // Couple details progress
            const coupleFields = ['partner1Name', 'partner2Name', 'weddingDate', 'region'];
            const filledCoupleFields = coupleFields.filter(field => weddingData[field]);
            const coupleProgress = filledCoupleFields.length / coupleFields.length;
            
            document.getElementById('progress-couple-status').textContent = 
                coupleProgress === 1 ? 'Completed' : 
                coupleProgress > 0 ? 'In Progress' : 'Not started';

            // Style progress
            const styleFields = Object.keys(preferencesData);
            const styleProgress = styleFields.length > 0 ? 0.5 : 0;
            
            const progressStyleStatus = document.getElementById('progress-style-status');
            if (progressStyleStatus) {
                progressStyleStatus.textContent = styleProgress > 0 ? 'In Progress' : 'Not started';
            }
        }

        function updateStats() {
            // Days to wedding
            if (weddingData.weddingDate) {
                const today = new Date();
                const weddingDate = new Date(weddingData.weddingDate);
                const diffTime = weddingDate - today;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                const daysCountElement = document.getElementById('days-count');
                if (daysCountElement) {
                    daysCountElement.textContent = diffDays > 0 ? diffDays : 0;
                }
            }

            // Budget display
            if (weddingData.budgetRange) {
                document.getElementById('budget-display').textContent = `â‚¹${weddingData.budgetRange} Lakhs`;
            }
        }

        function updateStatus(text, color) {
            const statusEl = document.getElementById('status');
            const dot = statusEl.querySelector('.status-dot');
            const span = statusEl.querySelector('span');
            
            span.textContent = text;
                        dot.style.background = color === 'green' ? '#8B4B6B' :
                                   color === 'orange' ? '#D4A574' : '#8B4B6B';
        }

        // Auto-save on form changes
        document.addEventListener('input', function(e) {
            if (e.target.form && e.target.form.id === 'weddingForm') {
                setTimeout(updateProgress, 100);
                setTimeout(updateStats, 100);
            }
        });

        console.log('âœ¨ Vivaha AI - Ready!');

        // Google Maps Integration for City Autocomplete
        let autocompleteService;
        let placesService;
        let currentUserLocation = null;

        function initGoogleMaps() {
            if (typeof google !== 'undefined') {
                autocompleteService = new google.maps.places.AutocompleteService();
                
                // Create a dummy map for PlacesService
                const dummyMap = new google.maps.Map(document.createElement('div'));
                placesService = new google.maps.places.PlacesService(dummyMap);
                
                console.log('âœ… Google Maps API initialized for city selection');
                setupCityAutocomplete();
                addLocationDetection();
            } else {
                console.warn('âš ï¸ Google Maps API not available');
                setupFallbackCityAutocomplete();
            }
        }

        function setupCityAutocomplete() {
            const cityInput = document.getElementById('weddingCity');
            if (!cityInput) return;

            // Create suggestions container
            const suggestionsContainer = document.createElement('div');
            suggestionsContainer.id = 'city-suggestions';
            suggestionsContainer.style.cssText = `
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: white;
                border: 1px solid #ddd;
                border-top: none;
                border-radius: 0 0 8px 8px;
                max-height: 200px;
                overflow-y: auto;
                z-index: 1000;
                display: none;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            `;

            // Make city input container relative
            cityInput.parentElement.style.position = 'relative';
            cityInput.parentElement.appendChild(suggestionsContainer);

            cityInput.addEventListener('input', function() {
                const query = this.value.trim();
                
                if (query.length < 2) {
                    suggestionsContainer.style.display = 'none';
                    return;
                }

                if (autocompleteService) {
                    const request = {
                        input: query,
                        types: ['(cities)'],
                        componentRestrictions: { country: 'IN' }
                    };

                    autocompleteService.getPlacePredictions(request, (predictions, status) => {
                        if (status === google.maps.places.PlacesServiceStatus.OK && predictions) {
                            displayCitySuggestions(predictions.slice(0, 6), suggestionsContainer);
                        } else {
                            suggestionsContainer.style.display = 'none';
                        }
                    });
                } else {
                    // Fallback to static city list
                    const indianCities = [
                        'Mumbai, Maharashtra', 'Delhi, Delhi', 'Bangalore, Karnataka', 
                        'Chennai, Tamil Nadu', 'Kolkata, West Bengal', 'Pune, Maharashtra',
                        'Hyderabad, Telangana', 'Ahmedabad, Gujarat', 'Jaipur, Rajasthan',
                        'Surat, Gujarat', 'Lucknow, Uttar Pradesh', 'Kanpur, Uttar Pradesh'
                    ];
                    
                    const matches = indianCities.filter(city => 
                        city.toLowerCase().includes(query.toLowerCase())
                    ).slice(0, 6);
                    
                    if (matches.length > 0) {
                        const html = matches.map(city => `
                            <div onclick="selectCity('${city.split(',')[0]}')" style="
                                padding: 12px 16px;
                                cursor: pointer;
                                border-bottom: 1px solid #f0f0f0;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                            " onmouseover="this.style.background='rgba(139, 75, 107, 0.05)'" 
                               onmouseout="this.style.background='white'">
                                <span style="color: #8B4B6B;">ðŸ“</span>
                                <div>
                                    <div style="font-weight: 600;">${city.split(',')[0]}</div>
                                    <div style="font-size: 12px; color: #666;">${city.split(',')[1]}, India</div>
                                </div>
                            </div>
                        `).join('');
                        
                        suggestionsContainer.innerHTML = html;
                        suggestionsContainer.style.display = 'block';
                    } else {
                        suggestionsContainer.style.display = 'none';
                    }
                }
            });

            // Hide suggestions when clicking outside
            document.addEventListener('click', function(e) {
                if (!cityInput.contains(e.target) && !suggestionsContainer.contains(e.target)) {
                    suggestionsContainer.style.display = 'none';
                }
            });
        }

        function displayCitySuggestions(predictions, container) {
            const suggestionsHTML = predictions.map(prediction => {
                const mainText = prediction.structured_formatting.main_text;
                const secondaryText = prediction.structured_formatting.secondary_text;
                
                return `
                    <div onclick="selectCityFromMaps('${mainText}', '${prediction.place_id}')" style="
                        padding: 12px 16px;
                        cursor: pointer;
                        border-bottom: 1px solid #f0f0f0;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                    " onmouseover="this.style.background='rgba(139, 75, 107, 0.05)'" 
                       onmouseout="this.style.background='white'">
                        <span style="color: #8B4B6B;">ðŸ“</span>
                        <div>
                            <div style="font-weight: 600;">${mainText}</div>
                            <div style="font-size: 12px; color: #666;">${secondaryText}</div>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = suggestionsHTML;
            container.style.display = 'block';
        }

        function selectCity(cityName) {
            document.getElementById('weddingCity').value = cityName;
            document.getElementById('city-suggestions').style.display = 'none';
        }

        function selectCityFromMaps(cityName, placeId) {
            document.getElementById('weddingCity').value = cityName;
            document.getElementById('city-suggestions').style.display = 'none';

            // Get additional place details
            if (placesService && placeId) {
                const request = { placeId: placeId, fields: ['geometry', 'formatted_address'] };
                
                placesService.getDetails(request, (place, status) => {
                    if (status === google.maps.places.PlacesServiceStatus.OK) {
                        currentUserLocation = {
                            lat: place.geometry.location.lat(),
                            lng: place.geometry.location.lng(),
                            city: cityName,
                            address: place.formatted_address
                        };
                        console.log('ðŸ“ City selected with coordinates:', currentUserLocation);
                        
                        // Update status to show location-based features are available
                        updateStatus('Location-based recommendations enabled', 'green');
                    }
                });
            }
        }

        function addLocationDetection() {
            const cityInput = document.getElementById('weddingCity');
            if (!cityInput || !navigator.geolocation) return;

            // Add location detection button
            const locationBtn = document.createElement('button');
            locationBtn.type = 'button';
            locationBtn.innerHTML = 'ðŸ“ Use My Location';
            locationBtn.style.cssText = `
                position: absolute;
                right: 8px;
                top: 50%;
                transform: translateY(-50%);
                background: #8B4B6B;
                color: white;
                border: none;
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 12px;
                cursor: pointer;
                z-index: 10;
            `;

            cityInput.parentElement.style.position = 'relative';
            cityInput.style.paddingRight = '120px';
            cityInput.parentElement.appendChild(locationBtn);

            locationBtn.addEventListener('click', function() {
                this.textContent = 'Detecting...';
                this.disabled = true;

                navigator.geolocation.getCurrentPosition(
                    position => {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        
                        if (typeof google !== 'undefined') {
                            const geocoder = new google.maps.Geocoder();
                            const latlng = { lat, lng };
                            
                            geocoder.geocode({ location: latlng }, (results, status) => {
                                if (status === 'OK' && results[0]) {
                                    const cityComponent = results[0].address_components.find(
                                        component => component.types.includes('locality') || 
                                                    component.types.includes('administrative_area_level_2')
                                    );
                                    
                                    if (cityComponent) {
                                        cityInput.value = cityComponent.long_name;
                                        currentUserLocation = { lat, lng, city: cityComponent.long_name };
                                        updateStatus(`Location detected: ${cityComponent.long_name}`, 'green');
                                    }
                                }
                                this.textContent = 'ðŸ“ Use My Location';
                                this.disabled = false;
                            });
                        }
                    },
                    error => {
                        console.error('Geolocation error:', error);
                        updateStatus('Location detection failed', 'orange');
                        this.textContent = 'ðŸ“ Use My Location';
                        this.disabled = false;
                    }
                );
            });
        }

        function setupFallbackCityAutocomplete() {
            // This function is called if Google Maps API is not available
            console.log('ðŸ”„ Using fallback city autocomplete');
            setupCityAutocomplete(); // Will use the fallback logic
        }

        // Initialize Maps when script loads (fallback)
        if (typeof google === 'undefined') {
            setTimeout(() => {
                if (typeof google === 'undefined') {
                    console.warn('ðŸ”„ Google Maps API not loaded, using fallback');
                    setupFallbackCityAutocomplete();
                }
            }, 3000);
        }

        // Enhanced Dashboard Management
        class EnhancedDashboard {
            constructor() {
                this.overallProgress = 0;
                this.activities = [];
                this.init();
            }

            init() {
                this.loadDashboardData();
                this.updateDashboard();
                this.setupRealtimeUpdates();
                console.log('âœ… Enhanced Dashboard initialized');
            }

            loadDashboardData() {
                // Load saved wedding data
                const savedWedding = JSON.parse(localStorage.getItem('vivaha_wedding_data') || '{}');
                const savedPreferences = JSON.parse(localStorage.getItem('vivaha_preferences') || '{}');
                
                // Update couple info
                const coupleNamesElement = document.getElementById('couple-names');
                if (coupleNamesElement) {
                    if (savedWedding.partner1 && savedWedding.partner2) {
                        coupleNamesElement.textContent = `${savedWedding.partner1} & ${savedWedding.partner2}`;
                    } else {
                        coupleNamesElement.textContent = 'Start Your Story';
                    }
                }

                // Update wedding date and countdown
                if (savedWedding.weddingDate) {
                    const weddingDate = new Date(savedWedding.weddingDate);
                    const today = new Date();
                    const timeDiff = weddingDate.getTime() - today.getTime();
                    const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
                    
                    document.getElementById('wedding-date-display').textContent = weddingDate.toLocaleDateString('en-IN', {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                    
                    if (daysDiff > 0) {
                        document.getElementById('days-count').textContent = daysDiff;
                    } else if (daysDiff === 0) {
                        document.getElementById('days-count').textContent = 'ðŸŽ‰';
                        document.querySelector('.days-label').textContent = 'Today!';
                    } else {
                        document.getElementById('days-count').textContent = 'âœ¨';
                        document.querySelector('.days-label').textContent = 'Memories';
                    }
                } else {
                    document.getElementById('wedding-date-display').textContent = 'Set Your Date';
                    document.getElementById('days-count').textContent = '--';
                }

                // Update stats
                document.getElementById('budget-amount').textContent = savedWedding.budgetRange || 'Not Set';
                document.getElementById('guest-count').textContent = savedWedding.guestCount || '--';
                document.getElementById('wedding-city').textContent = savedWedding.weddingCity || 'Not Set';

                // Calculate and update progress
                this.calculateProgress(savedWedding, savedPreferences);
            }

            calculateProgress(weddingData, preferencesData) {
                let completedSteps = 0;
                const totalSteps = 6; // Total possible steps

                // Check couple details completion
                if (weddingData.partner1 && weddingData.partner2 && weddingData.weddingDate) {
                    completedSteps += 1;
                    this.updateActionStatus('couple', 'complete', 'âœ… Complete');
                } else if (weddingData.partner1 || weddingData.partner2) {
                    this.updateActionStatus('couple', 'progress', 'ðŸ”„ In Progress');
                } else {
                    this.updateActionStatus('couple', 'pending', 'â³ Not Started');
                }

                // Check preferences completion
                if (preferencesData.weddingTheme && preferencesData.colorScheme && preferencesData.photographyStyle) {
                    completedSteps += 1;
                    this.updateActionStatus('style', 'complete', 'âœ… Complete');
                } else if (preferencesData.weddingTheme || preferencesData.colorScheme) {
                    this.updateActionStatus('style', 'progress', 'ðŸ”„ In Progress');
                } else {
                    this.updateActionStatus('style', 'pending', 'â³ Not Started');
                }

                // Calculate percentage
                this.overallProgress = Math.round((completedSteps / totalSteps) * 100);
                
                // Update progress circle
                this.animateProgressCircle(this.overallProgress);
                
                // Update percentage display
                document.getElementById('overall-progress').textContent = `${this.overallProgress}%`;
            }

            updateActionStatus(action, status, text) {
                const statusElement = document.getElementById(`status-${action}`);
                if (statusElement) {
                    const indicator = statusElement.querySelector('.status-indicator');
                    if (indicator) {
                        indicator.className = `status-indicator ${status}`;
                        indicator.textContent = text;
                    }
                }
            }

            animateProgressCircle(percentage) {
                const circle = document.getElementById('progress-ring');
                if (circle) {
                    const circumference = 2 * Math.PI * 70; // r = 70
                    const offset = circumference - (percentage / 100) * circumference;
                    
                    // Set CSS custom property for animation
                    document.documentElement.style.setProperty('--progress-offset', offset);
                    
                    // Trigger animation
                    circle.style.strokeDashoffset = offset;
                }
            }

            addActivity(message, priority = 'normal') {
                const activity = {
                    id: Date.now(),
                    message,
                    time: new Date().toLocaleTimeString('en-US', { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    }),
                    priority
                };
                
                this.activities.unshift(activity);
                
                // Keep only last 5 activities
                if (this.activities.length > 5) {
                    this.activities = this.activities.slice(0, 5);
                }
                
                this.updateActivityFeed();
            }

            updateActivityFeed() {
                const activityList = document.getElementById('recent-activity');
                if (activityList && this.activities.length > 0) {
                    activityList.innerHTML = this.activities.map(activity => `
                        <div class="activity-item">
                            <div class="activity-time">${activity.time}</div>
                            <div class="activity-text">${activity.message}</div>
                        </div>
                    `).join('');
                }
            }

            updateDashboard() {
                // This method is called when data changes
                this.loadDashboardData();
            }

            setupRealtimeUpdates() {
                // Listen for storage changes to update dashboard in real-time
                window.addEventListener('storage', (e) => {
                    if (e.key === 'vivaha_wedding_data' || e.key === 'vivaha_preferences') {
                        this.updateDashboard();
                    }
                });

                // Listen for custom events
                document.addEventListener('weddingDataUpdated', () => {
                    this.updateDashboard();
                    this.addActivity('ðŸ“ Wedding details updated');
                });

                document.addEventListener('preferencesUpdated', () => {
                    this.updateDashboard();
                    this.addActivity('ðŸŽ¨ Style preferences updated');
                });
            }

            // Helper method to trigger custom events
            static triggerUpdate(type) {
                const event = new CustomEvent(type === 'wedding' ? 'weddingDataUpdated' : 'preferencesUpdated');
                document.dispatchEvent(event);
            }
        }

        // Initialize enhanced dashboard
        let enhancedDashboard;
        document.addEventListener('DOMContentLoaded', () => {
            enhancedDashboard = new EnhancedDashboard();
        });

        // Update existing save functions to trigger dashboard updates
        const originalSaveWeddingData = saveWeddingData;
        saveWeddingData = async function() {
            await originalSaveWeddingData();
            EnhancedDashboard.triggerUpdate('wedding');
        };

        const originalSavePreferences = savePreferences;
        savePreferences = async function() {
            await originalSavePreferences();
            EnhancedDashboard.triggerUpdate('preferences');
        };

        // Enhanced progress update function
        function updateProgress() {
            if (enhancedDashboard) {
                enhancedDashboard.updateDashboard();
            }
        }

        // Add welcome activity on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (enhancedDashboard) {
                    enhancedDashboard.addActivity('ðŸŽ‰ Welcome to Vivaha AI! Your wedding planning journey begins.', 'high');
                }
            }, 1000);
        });

        // Budget Management Functions
        function initializeBudget() {
            const savedBudget = localStorage.getItem('weddingBudget');
            if (savedBudget) {
                const budgetData = JSON.parse(savedBudget);
                updateBudgetDisplay(budgetData);
                loadInsights(budgetData);
            }
        }

        function editTotalBudget() {
            const amount = prompt('Enter total budget amount:');
            if (amount && !isNaN(amount)) {
                const budgetData = {
                    total: parseFloat(amount),
                    allocated: 0,
                    categories: {},
                    contingency: parseFloat(amount) * 0.1 // 10% contingency
                };
                localStorage.setItem('weddingBudget', JSON.stringify(budgetData));
                updateBudgetDisplay(budgetData);
                loadInsights(budgetData);
            }
        }

        function updateBudgetDisplay(budgetData) {
            if (!budgetData || !budgetData.total) return;
            
            document.getElementById('total-budget-display').textContent = `â‚¹${budgetData.total.toLocaleString()}`;
            document.getElementById('allocated-amount').textContent = `â‚¹${budgetData.allocated.toLocaleString()}`;
            document.getElementById('remaining-amount').textContent = `â‚¹${(budgetData.total - budgetData.allocated).toLocaleString()}`;
            document.getElementById('contingency-amount').textContent = `â‚¹${(budgetData.total * 0.1).toLocaleString()}`;
            
            const progressPercentage = (budgetData.allocated / budgetData.total) * 100;
            document.getElementById('budget-progress-fill').style.width = `${progressPercentage}%`;
            
            // Update blueprint budget display
            updateBlueprintBudget(budgetData);
            
            // Show smart allocation indicator if generated by AI
            if (budgetData.reasoning && budgetData.confidence) {
                let smartIndicator = document.querySelector('.smart-allocation-indicator');
                if (!smartIndicator) {
                    smartIndicator = document.createElement('div');
                    smartIndicator.className = 'smart-allocation-indicator';
                    smartIndicator.style.cssText = `
                        background: linear-gradient(135deg, #8B4B6B, #6B3A54);
                        color: white; padding: 12px; margin: 15px 0; border-radius: 10px;
                        font-size: 14px; display: flex; align-items: center; gap: 12px;
                        cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 12px rgba(139, 75, 107, 0.2);
                    `;
                    
                    const isVendorBased = budgetData.vendorBased;
                    const selectedVendors = getSelectedVendors();
                    const vendorCount = Object.values(selectedVendors).reduce((count, vendors) => count + (vendors ? vendors.length : 0), 0);
                    
                    smartIndicator.innerHTML = `
                        <span style="font-size: 20px;">${isVendorBased ? 'ðŸª' : 'ðŸ§ '}</span>
                        <div style="flex: 1;">
                            <strong>${isVendorBased ? 'Vendor-Based' : 'Smart'} Budget Allocation</strong>
                            <div style="font-size: 12px; opacity: 0.9; margin-top: 2px;">
                                ${isVendorBased ? `${vendorCount} vendors selected â€¢ ` : ''}Confidence: ${budgetData.confidence}% â€¢ Click to see details
                            </div>
                        </div>
                        <span style="font-size: 18px; opacity: 0.7;">â†’</span>
                    `;
                    
                    smartIndicator.onclick = () => showAllocationReasoning(budgetData);
                    smartIndicator.onmouseover = () => smartIndicator.style.transform = 'translateY(-2px)';
                    smartIndicator.onmouseout = () => smartIndicator.style.transform = 'translateY(0)';
                    
                    // Insert after budget overview
                    const budgetContainer = document.querySelector('.budget-container');
                    if (budgetContainer) {
                        budgetContainer.insertBefore(smartIndicator, budgetContainer.children[1]);
                    }
                } else {
                    // Update existing indicator
                    const isVendorBased = budgetData.vendorBased;
                    const selectedVendors = getSelectedVendors();
                    const vendorCount = Object.values(selectedVendors).reduce((count, vendors) => count + (vendors ? vendors.length : 0), 0);
                    
                    smartIndicator.innerHTML = `
                        <span style="font-size: 20px;">${isVendorBased ? 'ðŸª' : 'ðŸ§ '}</span>
                        <div style="flex: 1;">
                            <strong>${isVendorBased ? 'Vendor-Based' : 'Smart'} Budget Allocation</strong>
                            <div style="font-size: 12px; opacity: 0.9; margin-top: 2px;">
                                ${isVendorBased ? `${vendorCount} vendors selected â€¢ ` : ''}Confidence: ${budgetData.confidence}% â€¢ Click to see details
                            </div>
                        </div>
                        <span style="font-size: 18px; opacity: 0.7;">â†’</span>
                    `;
                }
            }
            
            // Update category amounts and percentages
            if (budgetData.categories) {
                Object.entries(budgetData.categories).forEach(([category, amount]) => {
                    // Update input fields
                    const input = document.querySelector(`[data-category="${category}"] .amount-input`);
                    if (input) {
                        input.value = amount;
                    }
                    
                    // Update displays
                    const amountDisplay = document.querySelector(`[data-category="${category}"] .category-amount`);
                    if (amountDisplay) {
                        amountDisplay.textContent = `â‚¹${amount.toLocaleString()}`;
                    }
                    
                    // Update progress bars
                    const progressBar = document.querySelector(`[data-category="${category}"] .category-progress-fill`);
                    if (progressBar && budgetData.total > 0) {
                        const categoryPercent = (amount / budgetData.total) * 100;
                        progressBar.style.width = `${categoryPercent}%`;
                        
                        // Add percentage text
                        let percentText = progressBar.parentElement.querySelector('.percentage-text');
                        if (!percentText) {
                            percentText = document.createElement('div');
                            percentText.className = 'percentage-text';
                            percentText.style.cssText = 'position: absolute; right: 8px; top: 50%; transform: translateY(-50%); font-size: 11px; font-weight: 600; color: #666;';
                            progressBar.parentElement.style.position = 'relative';
                            progressBar.parentElement.appendChild(percentText);
                        }
                        percentText.textContent = `${categoryPercent.toFixed(1)}%`;
                    }
                });
            }
        }

        function updateCategoryAmount(category, amount) {
            const savedBudget = JSON.parse(localStorage.getItem('weddingBudget') || '{"total":0,"allocated":0,"categories":{},"contingency":0}');
            savedBudget.categories[category] = parseFloat(amount) || 0;
            
            savedBudget.allocated = Object.values(savedBudget.categories).reduce((a, b) => a + b, 0);
            
            localStorage.setItem('weddingBudget', JSON.stringify(savedBudget));
            updateBudgetDisplay(savedBudget);
            loadInsights(savedBudget);
        }

        function showCategoryDetails(category) {
            // Implement modal with detailed breakdown
            const details = getCategoryDetails(category);
            // Show modal with details
        }

        function showVendorSuggestions(category) {
            // Implement AI-powered vendor suggestions
            const suggestions = getVendorSuggestions(category);
            // Show suggestions modal
        }

        function downloadBudgetReport() {
            const budgetData = JSON.parse(localStorage.getItem('weddingBudget'));
            // Generate and download PDF report
        }

        function showCollaborators() {
            // Show collaborator management modal
        }

        function toggleView(view) {
            // Toggle between grid and list view
            const grid = document.getElementById('budget-categories-grid');
            grid.className = view === 'grid' ? 'category-grid' : 'category-list';
        }

        function refreshInsights() {
            const budgetData = JSON.parse(localStorage.getItem('weddingBudget'));
            loadInsights(budgetData);
        }

        function loadInsights(budgetData) {
            if (budgetData) {
                // Generate and display insights
                generateInsights(budgetData);
            }
        }

        function generateInsights(budgetData) {
            // Cost optimization insights
            const costOptimization = document.getElementById('cost-optimization-content');
            if (costOptimization) {
                costOptimization.innerHTML = `
                    <div class="insight-item">
                        <span class="insight-icon">ðŸ’¡</span>
                        <div class="insight-text">
                            <strong>Venue Savings</strong>
                            <p>Consider off-season dates for 20-30% savings on venue costs</p>
                        </div>
                    </div>
                    <div class="insight-item">
                        <span class="insight-icon">ðŸ“Š</span>
                        <div class="insight-text">
                            <strong>Budget Distribution</strong>
                            <p>Your largest allocation: ${getLargestCategory(budgetData)} - Consider if this aligns with your priorities</p>
                        </div>
                    </div>
                `;
            }

            // Budget alerts
            const budgetAlerts = document.getElementById('budget-alerts-content');
            if (budgetAlerts) {
                const totalSpent = Object.values(budgetData.categories || {}).reduce((sum, val) => sum + val, 0);
                const remaining = budgetData.total - totalSpent;
                
                budgetAlerts.innerHTML = `
                    <div class="alert-item ${remaining < budgetData.total * 0.1 ? 'alert-warning' : 'alert-success'}">
                        <span class="alert-icon">${remaining < budgetData.total * 0.1 ? 'âš ï¸' : 'âœ…'}</span>
                        <div class="alert-text">
                            <strong>Budget Status</strong>
                            <p>â‚¹${remaining.toLocaleString()} remaining (${((remaining/budgetData.total)*100).toFixed(1)}%)</p>
                        </div>
                    </div>
                `;
            }

            // Smart recommendations
            const smartRecommendations = document.getElementById('smart-recommendations-content');
            if (smartRecommendations) {
                smartRecommendations.innerHTML = `
                    <div class="recommendation-item">
                        <span class="recommendation-icon">ðŸŽ¯</span>
                        <div class="recommendation-text">
                            <strong>Vendor Selection</strong>
                            <p>Select more vendors to get more accurate budget allocations</p>
                        </div>
                    </div>
                    <div class="recommendation-item">
                        <span class="recommendation-icon">ðŸ’°</span>
                        <div class="recommendation-text">
                            <strong>Payment Planning</strong>
                            <p>Set up a payment timeline to manage cash flow effectively</p>
                        </div>
                    </div>
                `;
            }
        }

        function getLargestCategory(budgetData) {
            if (!budgetData.categories) return 'venue';
            
            let maxCategory = 'venue';
            let maxAmount = 0;
            
            Object.entries(budgetData.categories).forEach(([category, amount]) => {
                if (amount > maxAmount) {
                    maxAmount = amount;
                    maxCategory = category;
                }
            });
            
            return maxCategory.charAt(0).toUpperCase() + maxCategory.slice(1);
        }

        // Blueprint Display Functions
        function updatePreferencesDisplay() {
            // Update theme display
            const themeDisplay = document.getElementById('theme-display');
            if (themeDisplay) {
                themeDisplay.textContent = selectedPreferences.theme || 'Not selected';
            }

            // Update venue type display
            const venueTypeDisplay = document.getElementById('venue-type-display');
            if (venueTypeDisplay) {
                venueTypeDisplay.textContent = selectedPreferences.venue || 'Not selected';
            }

            // Update photography display
            const photographyDisplay = document.getElementById('photography-display');
            if (photographyDisplay) {
                photographyDisplay.textContent = selectedPreferences.photography || 'Not selected';
            }

            // Update decor display
            const decorDisplay = document.getElementById('decor-display');
            if (decorDisplay) {
                decorDisplay.textContent = selectedPreferences.decor || 'Not selected';
            }

            // Update cuisine display
            const cuisineDisplay = document.getElementById('cuisine-display');
            if (cuisineDisplay) {
                cuisineDisplay.textContent = selectedPreferences.cuisine || 'Not selected';
            }

            // Update multi-select displays
            const floralDisplay = document.getElementById('florals-display');
            if (floralDisplay) {
                floralDisplay.textContent = selectedPreferences.floral.length > 0 
                    ? selectedPreferences.floral.join(', ') 
                    : 'Not selected';
            }

            const lightingDisplay = document.getElementById('lighting-display');
            if (lightingDisplay) {
                lightingDisplay.textContent = selectedPreferences.lighting.length > 0 
                    ? selectedPreferences.lighting.join(', ') 
                    : 'Not selected';
            }

            const musicDisplay = document.getElementById('music-display');
            if (musicDisplay) {
                musicDisplay.textContent = selectedPreferences.music.length > 0 
                    ? selectedPreferences.music.join(', ') 
                    : 'Not selected';
            }
        }

        function updateBlueprintCoupleInfo(data) {
            // Update couple names
            const coupleNamesText = document.getElementById('couple-names-text');
            if (coupleNamesText && data.partner1Name && data.partner2Name) {
                coupleNamesText.textContent = `${data.partner1Name} & ${data.partner2Name}`;
            }

            // Update wedding date
            const weddingDateBlueprint = document.getElementById('wedding-date-blueprint');
            if (weddingDateBlueprint && data.weddingDate) {
                const date = new Date(data.weddingDate);
                const options = { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                };
                weddingDateBlueprint.textContent = date.toLocaleDateString('en-US', options);
            }

            // Update location
            const weddingLocationBlueprint = document.getElementById('wedding-location-blueprint');
            if (weddingLocationBlueprint && data.region) {
                weddingLocationBlueprint.textContent = data.region;
            }

            // Update countdown
            const daysCountdown = document.getElementById('days-countdown');
            if (daysCountdown && data.weddingDate) {
                const today = new Date();
                const weddingDay = new Date(data.weddingDate);
                const timeDiff = weddingDay - today;
                const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));
                daysCountdown.textContent = daysDiff > 0 ? daysDiff : 0;
            }
        }

        function updateBlueprintBudget(budgetData) {
            // Update total budget
            const totalBudgetDisplay = document.getElementById('total-budget-display');
            if (totalBudgetDisplay && budgetData.total) {
                totalBudgetDisplay.textContent = `â‚¹${budgetData.total.toLocaleString()}`;
            }

            // Update budget breakdown
            if (budgetData.categories) {
                const venueBudget = document.getElementById('venue-budget');
                const photographyBudget = document.getElementById('photography-budget');
                const cateringBudget = document.getElementById('catering-budget');
                const decorBudget = document.getElementById('decor-budget');

                if (venueBudget) venueBudget.textContent = budgetData.categories.venue ? `â‚¹${budgetData.categories.venue.toLocaleString()}` : '--';
                if (photographyBudget) photographyBudget.textContent = budgetData.categories.photography ? `â‚¹${budgetData.categories.photography.toLocaleString()}` : '--';
                if (cateringBudget) cateringBudget.textContent = budgetData.categories.catering ? `â‚¹${budgetData.categories.catering.toLocaleString()}` : '--';
                if (decorBudget) decorBudget.textContent = budgetData.categories.decor ? `â‚¹${budgetData.categories.decor.toLocaleString()}` : '--';
            }
        }

        function updateVendorSelections() {
            const vendorSelections = getSelectedVendors();
            
            Object.keys(vendorSelections).forEach(category => {
                const vendors = vendorSelections[category];
                const countElement = document.getElementById(`${category}-count`);
                const listElement = document.getElementById(`${category}-list`);
                
                if (countElement) {
                    countElement.textContent = `${vendors.length} selected`;
                }
                
                if (listElement) {
                    if (vendors.length === 0) {
                        listElement.innerHTML = `<div class="no-selection">No ${category} selected</div>`;
                    } else {
                        listElement.innerHTML = vendors.map(vendor => `
                            <div class="vendor-item">
                                <span class="vendor-name">${vendor.name}</span>
                                <span class="vendor-status">Selected</span>
                            </div>
                        `).join('');
                    }
                }
            });
        }

        function syncToCalendar() {
            // Implement calendar sync functionality
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeBudget();
            
            // Initialize blueprint displays
            const savedWeddingData = JSON.parse(localStorage.getItem('vivaha_wedding_data') || '{}');
            const savedPreferences = JSON.parse(localStorage.getItem('vivaha_preferences') || '{}');
            const savedBudget = JSON.parse(localStorage.getItem('vivaha_budget_data') || '{}');
            
            if (savedWeddingData.partner1Name) {
                updateBlueprintCoupleInfo(savedWeddingData);
            }
            
            if (Object.keys(savedPreferences).length > 0) {
                // Load preferences into selectedPreferences
                Object.assign(selectedPreferences, savedPreferences);
                updatePreferencesDisplay();
            }
            
            if (savedBudget.total) {
                updateBlueprintBudget(savedBudget);
            }
            
            // Update vendor selections
            updateVendorSelections();
        });

        // Load saved couple data and update displays
        async function loadSavedCoupleData() {
            try {
                // First try to load from localStorage
                const localData = localStorage.getItem('vivaha_wedding_data');
                if (localData) {
                    const weddingData = JSON.parse(localData);
                    updateCoupleDisplay(weddingData);
                }
                
                // Then try to fetch from server
                const response = await fetch(`${API_BASE}/api/wedding-data`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success && result.data && result.data.length > 0) {
                        // Get the most recent record
                        const latestCouple = result.data[result.data.length - 1];
                        updateCoupleDisplay({
                            partner1Name: latestCouple['Partner1 Name'],
                            partner2Name: latestCouple['Partner2 Name'], 
                            weddingDate: latestCouple['Wedding Date'],
                            region: latestCouple['City'],
                            budget: latestCouple['Budget'],
                            guestCount: latestCouple['Guest Count']
                        });
                    }
                }
            } catch (error) {
                console.error('Error loading couple data:', error);
            }
        }

        function updateCoupleDisplay(data) {
            // Update overview screen
            const coupleNames = document.getElementById('couple-names');
            const weddingDateDisplay = document.getElementById('wedding-date-display');
            const daysCount = document.getElementById('days-count');
            
            if (data.partner1Name && data.partner2Name && coupleNames) {
                coupleNames.textContent = `${data.partner1Name} & ${data.partner2Name}`;
            }
            
            if (data.weddingDate && weddingDateDisplay) {
                const date = new Date(data.weddingDate);
                const options = { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                };
                weddingDateDisplay.textContent = date.toLocaleDateString('en-US', options);
                
                // Update countdown
                if (daysCount) {
                    const today = new Date();
                    const weddingDay = new Date(data.weddingDate);
                    const timeDiff = weddingDay - today;
                    const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));
                    daysCount.textContent = daysDiff > 0 ? daysDiff : 0;
                }
            }
            
            // Update form fields if they exist
            const fields = [
                { id: 'partner1', value: data.partner1Name },
                { id: 'partner2', value: data.partner2Name },
                { id: 'weddingDate', value: data.weddingDate },
                { id: 'weddingCity', value: data.region }
            ];
            
            fields.forEach(field => {
                const element = document.getElementById(field.id);
                if (element && field.value) {
                    element.value = field.value;
                }
            });

            // Update blueprint display
            updateBlueprintCoupleInfo(data);
        }

        // Vendor selection tracking functions
        function saveVendorSelection(category, vendor) {
            const selectedVendors = JSON.parse(localStorage.getItem('selectedVendors') || '{}');
            
            if (!selectedVendors[category]) {
                selectedVendors[category] = [];
            }
            
            // Check if vendor already selected
            const existing = selectedVendors[category].find(v => v.name === vendor.name);
            if (!existing) {
                selectedVendors[category].push(vendor);
                localStorage.setItem('selectedVendors', JSON.stringify(selectedVendors));
                
                // Update blueprint vendor display immediately
                updateVendorSelections();
                
                // Regenerate budget with new vendor selection
                setTimeout(() => {
                    generateBudgetFromSelections();
                }, 500);
                
                console.log(`âœ… Saved vendor selection: ${vendor.name} in ${category}`);
            }
        }

        function removeVendorSelection(category, vendorName) {
            const selectedVendors = JSON.parse(localStorage.getItem('selectedVendors') || '{}');
            
            if (selectedVendors[category]) {
                selectedVendors[category] = selectedVendors[category].filter(v => v.name !== vendorName);
                if (selectedVendors[category].length === 0) {
                    delete selectedVendors[category];
                }
                localStorage.setItem('selectedVendors', JSON.stringify(selectedVendors));
                
                // Regenerate budget with updated selections
                setTimeout(() => {
                    generateBudgetFromSelections();
                }, 500);
                
                console.log(`âŒ Removed vendor selection: ${vendorName} from ${category}`);
            }
        }

        function getSelectedVendors() {
            return JSON.parse(localStorage.getItem('selectedVendors') || '{}');
        }

        function showSelectedVendorsSummary() {
            const selectedVendors = getSelectedVendors();
            const categories = Object.keys(selectedVendors);
            
            if (categories.length === 0) {
                return 'No vendors selected yet';
            }
            
            return categories.map(category => {
                const count = selectedVendors[category].length;
                return `${category}: ${count} selected`;
            }).join(', ');
        }

        // Enhanced budget trigger on vendor page navigation
        function showScreen(screenName) {
            // Hide all screens first
            const screens = document.querySelectorAll('.screen');
            screens.forEach(screen => screen.style.display = 'none');
            
            // Show selected screen
            const targetScreen = document.getElementById(screenName);
            if (targetScreen) {
                targetScreen.style.display = 'block';
            }
            
            // Update navigation
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            const activeNav = document.querySelector(`[onclick="showScreen('${screenName}')"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }
            
            // Trigger budget regeneration when viewing budget screen
            if (screenName === 'budget') {
                setTimeout(() => {
                    generateBudgetFromSelections();
                }, 300);
            }
            
            // Load couple data when viewing overview
            if (screenName === 'overview') {
                setTimeout(loadSavedCoupleData, 100);
            }
            

        }

        // Load couple data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedCoupleData();
            
            // Initialize budget on page load
            setTimeout(() => {
                generateBudgetFromSelections();
            }, 1000);
        });

        // Intelligent Budget Allocation System
        class BudgetAllocationEngine {
            constructor() {
                this.baseAllocation = {
                    venue: 30,      // Base 30%
                    catering: 25,   // Base 25%
                    photography: 15, // Base 15%
                    decor: 12,      // Base 12%
                    attire: 8,      // Base 8%
                    entertainment: 10 // Base 10%
                };
                
                // Budget multipliers based on guest count
                this.guestMultipliers = {
                    'Small (50-100)': { catering: 1.0, venue: 0.9, entertainment: 0.8 },
                    'Medium (100-300)': { catering: 1.1, venue: 1.0, entertainment: 1.0 },
                    'Large (300-500)': { catering: 1.2, venue: 1.1, entertainment: 1.2 },
                    'Grand (500+)': { catering: 1.3, venue: 1.2, entertainment: 1.4 }
                };
                
                // Style-based adjustments
                this.styleAdjustments = {
                    // Venue type preferences
                    venue: {
                        'heritage-palace': { venue: +8, decor: +3, photography: +2 },
                        'resort': { venue: +5, catering: +3, entertainment: +2 },
                        'garden-outdoor': { decor: +5, catering: +2, venue: -3 },
                        'banquet-hall': { venue: -2, catering: +2, decor: +1 },
                        'temple': { venue: -5, decor: +2, photography: +1 }
                    },
                    
                    // Photography style preferences
                    photography: {
                        'artistic': { photography: +5, decor: +2 },
                        'traditional': { photography: +2, venue: +1 },
                        'candid': { photography: +3, entertainment: +1 },
                        'cinematic': { photography: +7, decor: +1 }
                    },
                    
                    // Theme-based adjustments
                    theme: {
                        'royal-maharaja': { venue: +6, decor: +8, attire: +4, entertainment: +3 },
                        'boho-garden': { decor: +6, venue: +2, photography: +3 },
                        'modern-minimalist': { venue: +3, photography: +4, decor: -2 },
                        'vintage-classic': { decor: +5, photography: +3, attire: +2 },
                        'destination-beach': { venue: +8, photography: +4, entertainment: +4 }
                    },
                    
                    // Decor style adjustments
                    decor: {
                        'luxury-opulent': { decor: +8, venue: +3, attire: +2 },
                        'floral-romantic': { decor: +5, photography: +2 },
                        'contemporary-chic': { decor: +3, photography: +3 },
                        'traditional-classic': { decor: +4, venue: +2 }
                    }
                };
                
                // Budget tiers with different allocation strategies
                this.budgetTiers = {
                    'Budget (â‚¹5-10L)': {
                        priorities: ['venue', 'catering', 'photography'],
                        adjustments: { venue: -3, decor: -5, attire: -2, entertainment: -3 }
                    },
                    'Premium (â‚¹15-30L)': {
                        priorities: ['venue', 'photography', 'decor', 'catering'],
                        adjustments: { photography: +2, decor: +3 }
                    },
                    'Luxury (â‚¹30-50L)': {
                        priorities: ['venue', 'photography', 'decor', 'entertainment'],
                        adjustments: { venue: +3, photography: +3, decor: +5, entertainment: +2 }
                    },
                    'Ultra-Luxury (â‚¹50L+)': {
                        priorities: ['venue', 'photography', 'decor', 'entertainment', 'attire'],
                        adjustments: { venue: +5, photography: +5, decor: +8, entertainment: +4, attire: +3 }
                    }
                };
            }
            
            calculateVendorBasedAllocation(weddingData, preferencesData, vendorSelections, totalBudget) {
                console.log('ðŸ§  Starting vendor-based budget allocation...');
                console.log('ðŸ“Š Input data:', { weddingData, preferencesData, vendorSelections, totalBudget });
                
                let allocation = { ...this.baseAllocation };
                let reasoning = [];
                
                // First apply preference-based adjustments
                const preferenceAllocation = this.calculateIntelligentAllocation(weddingData, preferencesData, totalBudget);
                allocation = { ...preferenceAllocation.percentages };
                reasoning = [...preferenceAllocation.reasoning];
                
                // Then apply vendor-based adjustments
                reasoning.push('ðŸ“ Vendor Selection Adjustments:');
                
                // Analyze vendor selections to adjust budget
                if (vendorSelections && Object.keys(vendorSelections).length > 0) {
                    Object.entries(vendorSelections).forEach(([category, vendors]) => {
                        if (vendors && vendors.length > 0) {
                            const avgPrice = this.estimateVendorCategoryPrice(category, vendors, weddingData);
                            const adjustment = this.calculateVendorAdjustment(category, avgPrice, allocation[category]);
                            
                            if (adjustment !== 0) {
                                allocation[category] += adjustment;
                                reasoning.push(`ðŸª ${adjustment > 0 ? 'Increased' : 'Decreased'} ${category} by ${Math.abs(adjustment).toFixed(1)}% based on selected vendors`);
                            }
                        }
                    });
                }
                
                // Apply dynamic preference boosts based on selections
                this.applyDynamicBoosts(allocation, reasoning, preferencesData, vendorSelections);
                
                // Normalize to 100%
                const total = Object.values(allocation).reduce((sum, val) => sum + val, 0);
                Object.keys(allocation).forEach(category => {
                    allocation[category] = (allocation[category] / total) * 100;
                });
                
                // Calculate actual amounts
                const amounts = {};
                Object.entries(allocation).forEach(([category, percentage]) => {
                    amounts[category] = Math.round((percentage / 100) * totalBudget);
                });
                
                reasoning.push(`ðŸ’° Total budget: â‚¹${totalBudget.toLocaleString()}`);
                reasoning.push(`ðŸŽ¯ Vendor-based allocation complete`);
                
                return {
                    percentages: allocation,
                    amounts: amounts,
                    totalBudget: totalBudget,
                    reasoning: reasoning,
                    confidence: this.calculateVendorBasedConfidence(weddingData, preferencesData, vendorSelections)
                };
            }

            calculateIntelligentAllocation(weddingData, preferencesData, totalBudget) {
                console.log('ðŸ§  Starting intelligent budget allocation...');
                console.log('ðŸ“Š Input data:', { weddingData, preferencesData, totalBudget });
                
                let allocation = { ...this.baseAllocation };
                let reasoning = [];
                
                // 1. Apply budget tier adjustments
                const budget = weddingData.budget || weddingData.datePreferences?.budget;
                if (budget && this.budgetTiers[budget]) {
                    const tierData = this.budgetTiers[budget];
                    reasoning.push(`ðŸŽ¯ Budget tier: ${budget}`);
                    
                    Object.entries(tierData.adjustments).forEach(([category, adjustment]) => {
                        allocation[category] += adjustment;
                        if (adjustment > 0) {
                            reasoning.push(`ðŸ“ˆ Increased ${category} by ${adjustment}% for ${budget} tier`);
                        } else {
                            reasoning.push(`ðŸ“‰ Reduced ${category} by ${Math.abs(adjustment)}% for ${budget} tier`);
                        }
                    });
                }
                
                // 2. Apply guest count multipliers
                const guestCount = weddingData.guestCount || weddingData.datePreferences?.guestCount;
                if (guestCount && this.guestMultipliers[guestCount]) {
                    const multipliers = this.guestMultipliers[guestCount];
                    reasoning.push(`ðŸ‘¥ Guest count: ${guestCount}`);
                    
                    Object.entries(multipliers).forEach(([category, multiplier]) => {
                        const adjustment = (multiplier - 1) * 100;
                        allocation[category] += adjustment;
                        if (adjustment !== 0) {
                            reasoning.push(`ðŸ‘¥ ${multiplier > 1 ? 'Increased' : 'Decreased'} ${category} by ${Math.abs(adjustment).toFixed(1)}% for ${guestCount} guests`);
                        }
                    });
                }
                
                // 3. Apply venue type preferences
                const venueType = preferencesData?.venueType || preferencesData?.venue;
                if (venueType && this.styleAdjustments.venue[venueType]) {
                    const adjustments = this.styleAdjustments.venue[venueType];
                    reasoning.push(`ðŸ›ï¸ Venue preference: ${venueType.replace('-', ' ')}`);
                    
                    Object.entries(adjustments).forEach(([category, adjustment]) => {
                        allocation[category] += adjustment;
                        if (adjustment > 0) {
                            reasoning.push(`ðŸ›ï¸ Increased ${category} by ${adjustment}% for ${venueType} venue`);
                        } else {
                            reasoning.push(`ðŸ›ï¸ Reduced ${category} by ${Math.abs(adjustment)}% for ${venueType} venue`);
                        }
                    });
                }
                
                // 4. Apply photography style preferences
                const photoStyle = preferencesData?.photographyStyle || preferencesData?.photography;
                if (photoStyle && this.styleAdjustments.photography[photoStyle]) {
                    const adjustments = this.styleAdjustments.photography[photoStyle];
                    reasoning.push(`ðŸ“¸ Photography style: ${photoStyle}`);
                    
                    Object.entries(adjustments).forEach(([category, adjustment]) => {
                        allocation[category] += adjustment;
                        reasoning.push(`ðŸ“¸ Increased ${category} by ${adjustment}% for ${photoStyle} photography`);
                    });
                }
                
                // 5. Apply theme preferences
                const theme = preferencesData?.weddingTheme || preferencesData?.theme;
                if (theme && this.styleAdjustments.theme[theme]) {
                    const adjustments = this.styleAdjustments.theme[theme];
                    reasoning.push(`ðŸŽ¨ Wedding theme: ${theme.replace('-', ' ')}`);
                    
                    Object.entries(adjustments).forEach(([category, adjustment]) => {
                        allocation[category] += adjustment;
                        reasoning.push(`ðŸŽ¨ Increased ${category} by ${adjustment}% for ${theme} theme`);
                    });
                }
                
                // 6. Apply decor style preferences
                const decorStyle = preferencesData?.decorStyle || preferencesData?.decor;
                if (decorStyle && this.styleAdjustments.decor[decorStyle]) {
                    const adjustments = this.styleAdjustments.decor[decorStyle];
                    reasoning.push(`ðŸŽ­ Decor style: ${decorStyle.replace('-', ' ')}`);
                    
                    Object.entries(adjustments).forEach(([category, adjustment]) => {
                        allocation[category] += adjustment;
                        reasoning.push(`ðŸŽ­ Increased ${category} by ${adjustment}% for ${decorStyle} decor`);
                    });
                }
                
                // 7. Apply special preference boosts
                if (preferencesData?.musicPreferences?.length > 0 || preferencesData?.entertainmentPreferences?.length > 0) {
                    allocation.entertainment += 3;
                    reasoning.push(`ðŸŽµ Boosted entertainment by 3% due to music/entertainment preferences`);
                }
                
                // 8. Normalize to 100%
                const total = Object.values(allocation).reduce((sum, val) => sum + val, 0);
                Object.keys(allocation).forEach(category => {
                    allocation[category] = (allocation[category] / total) * 100;
                });
                
                // 9. Calculate actual amounts
                const amounts = {};
                const totalBudgetNumber = this.extractBudgetNumber(totalBudget, budget);
                
                Object.entries(allocation).forEach(([category, percentage]) => {
                    amounts[category] = Math.round((percentage / 100) * totalBudgetNumber);
                });
                
                reasoning.push(`ðŸ’° Total budget: â‚¹${totalBudgetNumber.toLocaleString()}`);
                
                return {
                    percentages: allocation,
                    amounts: amounts,
                    totalBudget: totalBudgetNumber,
                    reasoning: reasoning,
                    confidence: this.calculateConfidence(weddingData, preferencesData)
                };
            }
            
            extractBudgetNumber(inputBudget, selectedBudget) {
                // Try to extract from input first
                if (inputBudget && typeof inputBudget === 'number') {
                    return inputBudget;
                }
                
                // Parse from selected budget range
                const budgetRanges = {
                    'Budget (â‚¹5-10L)': 750000,      // 7.5L average
                    'Premium (â‚¹15-30L)': 2250000,   // 22.5L average  
                    'Luxury (â‚¹30-50L)': 4000000,    // 40L average
                    'Ultra-Luxury (â‚¹50L+)': 6000000 // 60L average
                };
                
                return budgetRanges[selectedBudget] || 2000000; // Default 20L
            }
            
            calculateConfidence(weddingData, preferencesData) {
                let score = 0;
                const factors = [
                    weddingData?.budget || weddingData?.datePreferences?.budget,
                    weddingData?.guestCount || weddingData?.datePreferences?.guestCount,
                    preferencesData?.venueType,
                    preferencesData?.photographyStyle,
                    preferencesData?.weddingTheme,
                    preferencesData?.decorStyle
                ];
                
                factors.forEach(factor => {
                    if (factor) score += 15;
                });
                
                return Math.min(score, 90); // Max 90% confidence
            }

            estimateVendorCategoryPrice(category, vendors, weddingData) {
                // Map vendor category to budget category
                const categoryMap = {
                    'venues': 'venue',
                    'venue': 'venue',
                    'catering': 'catering',
                    'caterers': 'catering',
                    'photography': 'photography',
                    'photographers': 'photography',
                    'decoration': 'decor',
                    'decorators': 'decor',
                    'flowers': 'decor',
                    'attire': 'attire',
                    'clothing': 'attire',
                    'entertainment': 'entertainment',
                    'music': 'entertainment'
                };

                const budgetCategory = categoryMap[category.toLowerCase()] || category;
                
                // Estimate price tier based on vendor names and descriptions
                let priceLevel = 'medium'; // default
                
                if (vendors && vendors.length > 0) {
                    const vendor = vendors[0]; // Use first vendor for estimation
                    const name = vendor.name?.toLowerCase() || '';
                    const description = vendor.description?.toLowerCase() || '';
                    const combined = name + ' ' + description;
                    
                    // Look for price indicators
                    if (combined.includes('luxury') || combined.includes('premium') || combined.includes('elite') || 
                        combined.includes('exclusive') || combined.includes('royal') || combined.includes('grand')) {
                        priceLevel = 'high';
                    } else if (combined.includes('budget') || combined.includes('affordable') || combined.includes('economical') ||
                               combined.includes('reasonable') || combined.includes('cost-effective')) {
                        priceLevel = 'low';
                    }
                }
                
                return priceLevel;
            }

            calculateVendorAdjustment(category, priceLevel, currentPercentage) {
                // Adjustment factors based on price level
                const adjustments = {
                    'low': -2,     // Reduce by 2%
                    'medium': 0,   // No change
                    'high': +3     // Increase by 3%
                };
                
                return adjustments[priceLevel] || 0;
            }

            applyDynamicBoosts(allocation, reasoning, preferencesData, vendorSelections) {
                // Boost categories where user has made specific selections
                let vendorCategoryCount = 0;
                if (vendorSelections) {
                    Object.entries(vendorSelections).forEach(([category, vendors]) => {
                        if (vendors && vendors.length > 0) {
                            vendorCategoryCount++;
                        }
                    });
                }
                
                // If user has actively selected vendors in specific categories, they care more about those
                if (vendorCategoryCount > 0) {
                    reasoning.push(`ðŸŽ¯ Applied vendor selection boost - ${vendorCategoryCount} categories with vendor selections`);
                    
                    // Small boost for having vendor selections
                    if (vendorSelections.venues?.length > 0) {
                        allocation.venue += 2;
                        reasoning.push(`ðŸ›ï¸ Boosted venue budget due to venue selections`);
                    }
                    if (vendorSelections.catering?.length > 0) {
                        allocation.catering += 2;
                        reasoning.push(`ðŸ½ï¸ Boosted catering budget due to caterer selections`);
                    }
                    if (vendorSelections.photography?.length > 0) {
                        allocation.photography += 1;
                        reasoning.push(`ðŸ“¸ Boosted photography budget due to photographer selections`);
                    }
                }
                
                // Apply preference-vendor synergy boosts
                if (preferencesData?.weddingTheme === 'royal-maharaja' && vendorSelections.venues?.length > 0) {
                    allocation.venue += 2;
                    allocation.decor += 2;
                    reasoning.push(`ðŸ‘‘ Royal theme + venue selection synergy boost`);
                }
                
                if (preferencesData?.photographyStyle === 'artistic' && vendorSelections.photography?.length > 0) {
                    allocation.photography += 2;
                    reasoning.push(`ðŸŽ¨ Artistic photography + photographer selection synergy boost`);
                }
            }

            calculateVendorBasedConfidence(weddingData, preferencesData, vendorSelections) {
                let score = this.calculateConfidence(weddingData, preferencesData);
                
                // Boost confidence based on vendor selections
                if (vendorSelections && Object.keys(vendorSelections).length > 0) {
                    const vendorCount = Object.values(vendorSelections).reduce((count, vendors) => {
                        return count + (vendors ? vendors.length : 0);
                    }, 0);
                    
                    // Add 5% confidence for each vendor selection (max 15%)
                    score += Math.min(vendorCount * 5, 15);
                }
                
                return Math.min(score, 95); // Max 95% confidence with vendor data
            }
        }

        // Initialize budget allocation engine
        const budgetEngine = new BudgetAllocationEngine();

        // Enhanced budget initialization - no popup, generate from data
        function initializeBudget() {
            const savedBudget = localStorage.getItem('weddingBudget');
            if (savedBudget) {
                const budgetData = JSON.parse(savedBudget);
                updateBudgetDisplay(budgetData);
                loadInsights(budgetData);
                return;
            }
            
            // Check if we have enough data for intelligent allocation
            setTimeout(() => {
                generateBudgetFromSelections();
            }, 1000);
        }

        function generateBudgetFromSelections() {
            const weddingData = JSON.parse(localStorage.getItem('vivaha_wedding_data') || '{}');
            const preferencesData = JSON.parse(localStorage.getItem('vivaha_preferences') || '{}');
            const vendorSelections = JSON.parse(localStorage.getItem('selectedVendors') || '{}');
            
            console.log('ðŸ“Š Generating budget from:', { weddingData, preferencesData, vendorSelections });
            
            // Extract budget from preferences or wedding data
            const budgetRange = weddingData.budget || weddingData.datePreferences?.budget || preferencesData.budget;
            const totalBudget = extractBudgetAmount(budgetRange);
            
            if (totalBudget > 0) {
                const allocation = budgetEngine.calculateVendorBasedAllocation(
                    weddingData, 
                    preferencesData, 
                    vendorSelections, 
                    totalBudget
                );
                
                // Save the intelligent allocation
                const budgetData = {
                    total: totalBudget,
                    allocated: Object.values(allocation.amounts).reduce((sum, val) => sum + val, 0),
                    categories: allocation.amounts,
                    percentages: allocation.percentages,
                    reasoning: allocation.reasoning,
                    confidence: allocation.confidence,
                    vendorBased: true,
                    generatedAt: new Date().toISOString()
                };
                
                localStorage.setItem('weddingBudget', JSON.stringify(budgetData));
                updateBudgetDisplay(budgetData);
                loadInsights(budgetData);
                
                // Show subtle notification about auto-generation
                showBudgetGeneratedNotification(allocation);
            }
        }

        function extractBudgetAmount(budgetRange) {
            if (!budgetRange) return 2000000; // Default 20L
            
            const budgetRanges = {
                'Budget (â‚¹5-10L)': 750000,      // 7.5L average
                'Premium (â‚¹15-30L)': 2250000,   // 22.5L average  
                'Luxury (â‚¹30-50L)': 4000000,    // 40L average
                'Ultra-Luxury (â‚¹50L+)': 6000000 // 60L average
            };
            
            return budgetRanges[budgetRange] || 2000000;
        }

        function showBudgetGeneratedNotification(allocation) {
            // Create a subtle notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 9999;
                background: linear-gradient(135deg, #8B4B6B, #6B3A54);
                color: white; padding: 15px 20px; border-radius: 10px;
                box-shadow: 0 4px 20px rgba(139, 75, 107, 0.3);
                max-width: 350px; font-size: 14px;
                opacity: 0; transform: translateX(100%);
                transition: all 0.5s ease;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 18px;">ðŸ’°</span>
                    <div>
                        <strong>Budget Generated Automatically</strong>
                        <div style="font-size: 12px; opacity: 0.9; margin-top: 2px;">
                            Based on your preferences and vendor selections (${allocation.confidence}% confidence)
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Auto-hide after 4 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 500);
            }, 4000);
        }

        // Remove old popup functions
        function triggerIntelligentAllocation() {
            generateBudgetFromSelections();
        }

        // ===============================================
        // VENDOR DISCOVERY FUNCTIONS
        // ===============================================

        // Simple Vendor Search Function
        function searchVendors(category = null) {
            const citySelect = document.getElementById('vendor-city');
            const selectedCity = citySelect ? citySelect.value : 'bangalore';
            const resultsContainer = document.getElementById('vendor-results');
            
            if (category) {
                // Category was clicked
                console.log(`ðŸ” Searching for ${category} vendors in ${selectedCity}`);
                
                // Update active category
                document.querySelectorAll('.category-card').forEach(card => card.classList.remove('active'));
                event.target.closest('.category-card').classList.add('active');
                
                // Show loading state
                resultsContainer.innerHTML = `
                    <div class="text-center">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">â³</div>
                        <p>Searching for ${category} vendors in ${selectedCity}...</p>
                    </div>
                `;
                
                // Simulate API call (replace with actual API call)
                setTimeout(() => {
                    showVendorResults(category, selectedCity);
                }, 1000);
            } else {
                // Search button was clicked
                const activeCategory = document.querySelector('.category-card.active');
                if (activeCategory) {
                    const categoryName = activeCategory.querySelector('.category-name').textContent.toLowerCase();
                    searchVendors(categoryName);
                } else {
                    resultsContainer.innerHTML = `
                        <div class="text-center">
                            <p>Please select a vendor category first</p>
                        </div>
                    `;
                }
            }
        }

        function showVendorResults(category, city) {
            const resultsContainer = document.getElementById('vendor-results');
            
            // Mock vendor data (replace with actual API response)
            const mockVendors = [
                {
                    name: `Premium ${category.charAt(0).toUpperCase() + category.slice(1)} Services`,
                    location: city,
                    rating: '4.8',
                    description: `Top-rated ${category} services in ${city} with excellent reviews and competitive pricing.`
                },
                {
                    name: `${city.charAt(0).toUpperCase() + city.slice(1)} ${category.charAt(0).toUpperCase() + category.slice(1)} Experts`,
                    location: city,
                    rating: '4.6',
                    description: `Professional ${category} services with years of experience in the ${city} area.`
                },
                {
                    name: `Elite ${category.charAt(0).toUpperCase() + category.slice(1)} Solutions`,
                    location: city,
                    rating: '4.7',
                    description: `Luxury ${category} services offering premium quality and personalized attention.`
                }
            ];
            
            resultsContainer.innerHTML = `
                <div style="width: 100%;">
                    <h3 style="margin-bottom: 1.5rem; color: #374151;">Found ${mockVendors.length} ${category} vendors in ${city}</h3>
                    <div style="display: grid; gap: 1rem;">
                        ${mockVendors.map(vendor => `
                            <div style="background: #f8fafc; border: 1px solid #e5e7eb; border-radius: 8px; padding: 1rem;">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                    <h4 style="margin: 0; color: #374151;">${vendor.name}</h4>
                                    <span style="background: #fef3c7; color: #d97706; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">
                                        â­ ${vendor.rating}
                                    </span>
                                </div>
                                <p style="margin: 0; color: #6b7280; font-size: 0.9rem;">${vendor.description}</p>
                                <div style="margin-top: 1rem;">
                                    <button onclick="selectVendor('${category}', '${vendor.name}')" style="background: #8B5CF6; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; margin-right: 0.5rem;">
                                        âœ¨ Select
                                    </button>
                                    <button onclick="viewVendorDetails('${vendor.name}')" style="background: #f3f4f6; color: #374151; border: 1px solid #e5e7eb; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">
                                        ðŸ‘ï¸ Details
                                    </button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function selectVendor(category, vendorName) {
            console.log(`âœ¨ Selected ${vendorName} for ${category}`);
            alert(`âœ… ${vendorName} has been selected for ${category}!`);
            // Here you would typically save the selection to your data store
        }

        function viewVendorDetails(vendorName) {
            alert(`ðŸ“‹ Vendor Details:\n\nName: ${vendorName}\n\nContact information and additional details would be displayed here.`);
        }

        // Show allocation reasoning modal
        function showAllocationReasoning(budgetData) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
                align-items: center; justify-content: center;
            `;
            
            const reasoningHtml = budgetData.reasoning?.map(reason => `<li style="margin-bottom: 8px;">${reason}</li>`).join('') || '';
            const selectedVendors = getSelectedVendors();
            const vendorSummary = showSelectedVendorsSummary();
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 15px; max-width: 700px; max-height: 80vh; overflow-y: auto;">
                    <h2 style="color: #8B4B6B; margin-bottom: 20px;">ðŸŽ¯ Your ${budgetData.vendorBased ? 'Vendor-Based' : 'Smart'} Budget Allocation</h2>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                        <strong>Confidence Score: ${budgetData.confidence}%</strong>
                        <p style="margin: 5px 0 0 0; font-size: 14px; color: #666;">
                            ${budgetData.vendorBased ? 'Based on your vendor selections, preferences, and wedding details' : 'Based on your preferences and wedding details'}
                        </p>
                    </div>
                    
                    ${Object.keys(selectedVendors).length > 0 ? `
                        <div style="background: #e8f5e8; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                            <strong>ðŸª Selected Vendors:</strong>
                            <p style="margin: 5px 0 0 0; font-size: 14px;">${vendorSummary}</p>
                        </div>
                    ` : ''}
                    
                    <h3 style="color: #333; margin-bottom: 15px;">ðŸ’¡ How I calculated your allocation:</h3>
                    <ul style="padding-left: 20px; line-height: 1.6;">
                        ${reasoningHtml}
                    </ul>
                    
                    <div style="margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 10px;">
                        <strong>ðŸ’° Your budget has been automatically distributed across all categories!</strong>
                        <p style="margin: 5px 0 0 0; font-size: 14px;">You can adjust individual amounts on the budget screen. Select more vendors to get even more accurate allocations.</p>
                    </div>
                    
                    <div style="display: flex; justify-content: center; margin-top: 20px;">
                        <button onclick="closeReasoningModal()" 
                                style="padding: 12px 30px; background: #8B4B6B; color: white; border: none; border-radius: 5px; cursor: pointer;">
                            Got it!
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            window.reasoningModal = modal;
        }

        function closeReasoningModal() {
            if (window.reasoningModal) {
                window.reasoningModal.remove();
                delete window.reasoningModal;
            }
        }

        // Remove popup modal functions - replaced with automatic generation
        function showIntelligentAllocationModal() {
            // Deprecated - now auto-generates
            generateBudgetFromSelections();
        }

        function closeAllocationModal() {
            // No longer needed
        }

        function generateIntelligentAllocation() {
            // Deprecated - now auto-generates
            generateBudgetFromSelections();
        }

        // ... existing code ...
    </script>
</body>
</html> 
</html> 